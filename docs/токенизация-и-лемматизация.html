<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 10 Токенизация и лемматизация | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 10 Токенизация и лемматизация | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 10 Токенизация и лемматизация | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-08-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="веб-скрапинг.html"/>
<link rel="next" href="распределения-слов-и-анализ-частотностей.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.1</b> Что такое R?</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.2</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#если-не-хватает-пакетов"><i class="fa fa-check"></i><b>2.3</b> Если не хватает пакетов</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-мы-не-будем-делать"><i class="fa fa-check"></i><b>2.5</b> Что мы (не) будем делать?</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.6</b> RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.7</b> Установка</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.8</b> Начало работы</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.9</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.10</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.11</b> Векторы</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#шорткаты"><i class="fa fa-check"></i><b>2.15</b> Шорткаты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.4</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-базовый-r-и-tidyverse"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: базовый R и tidyverse</a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a></li>
<li class="chapter" data-level="5.8" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#пример-итерации"><i class="fa fa-check"></i><b>5.8</b> Пример итерации</a></li>
<li class="chapter" data-level="5.9" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#furrr"><i class="fa fa-check"></i><b>5.9</b> Furrr</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-файлов-из-интернета"><i class="fa fa-check"></i><b>6.2</b> Чтение файлов из интернета</a></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-локальных-файлов"><i class="fa fa-check"></i><b>6.3</b> Чтение локальных файлов</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.3.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.3.2</b> xls и xlsx</a></li>
<li class="chapter" data-level="6.3.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.3.3</b> txt</a></li>
<li class="chapter" data-level="6.3.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.3.4</b> doc</a></li>
<li class="chapter" data-level="6.3.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.3.5</b> pdf</a></li>
<li class="chapter" data-level="6.3.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.3.6</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml-и-html"><i class="fa fa-check"></i><b>6.4</b> xml и html</a></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5</b> json</a></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
<li class="chapter" data-level="6.7" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rperseus"><i class="fa fa-check"></i><b>6.7</b> RPerseus</a></li>
<li class="chapter" data-level="6.8" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-нескольких-файлов"><i class="fa fa-check"></i><b>6.8</b> Чтение нескольких файлов</a></li>
<li class="chapter" data-level="6.9" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#экспорт"><i class="fa fa-check"></i><b>6.9</b> Экспорт</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rdata"><i class="fa fa-check"></i><b>6.9.1</b> Rdata</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html"><i class="fa fa-check"></i><b>9</b> Веб-скрапинг</a>
<ul>
<li class="chapter" data-level="9.1" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#структура-html"><i class="fa fa-check"></i><b>9.1</b> Структура html</a></li>
<li class="chapter" data-level="9.2" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#каскадные-таблицы-стилей"><i class="fa fa-check"></i><b>9.2</b> Каскадные таблицы стилей</a></li>
<li class="chapter" data-level="9.3" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-данных"><i class="fa fa-check"></i><b>9.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="9.4" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-в-тиббл"><i class="fa fa-check"></i><b>9.4</b> Извлечение в тиббл</a></li>
<li class="chapter" data-level="9.5" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#скрапим-телеграм-канал"><i class="fa fa-check"></i><b>9.5</b> Скрапим телеграм-канал</a></li>
<li class="chapter" data-level="9.6" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#эмотиконы"><i class="fa fa-check"></i><b>9.6</b> Эмотиконы</a></li>
<li class="chapter" data-level="9.7" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#рутинная-уборка"><i class="fa fa-check"></i><b>9.7</b> Рутинная уборка</a></li>
<li class="chapter" data-level="9.8" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#лемматизация"><i class="fa fa-check"></i><b>9.8</b> Лемматизация</a></li>
<li class="chapter" data-level="9.9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#таблицы-html"><i class="fa fa-check"></i><b>9.9</b> Таблицы html</a></li>
<li class="chapter" data-level="9.10" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#wikisource"><i class="fa fa-check"></i><b>9.10</b> Wikisource</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>10</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="10.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>10.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="10.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>10.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="10.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>10.3</b> Скипграмы</a></li>
<li class="chapter" data-level="10.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>10.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="10.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>10.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="10.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>10.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="10.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>10.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="10.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>10.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html"><i class="fa fa-check"></i><b>11</b> Распределения слов и анализ частотностей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#извлечение-источников"><i class="fa fa-check"></i><b>11.1</b> Извлечение источников</a></li>
<li class="chapter" data-level="11.2" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#подготовка-источников"><i class="fa fa-check"></i><b>11.2</b> Подготовка источников</a></li>
<li class="chapter" data-level="11.3" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#токенизация"><i class="fa fa-check"></i><b>11.3</b> Токенизация</a></li>
<li class="chapter" data-level="11.4" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#cтоп-слова"><i class="fa fa-check"></i><b>11.4</b> Cтоп-слова</a></li>
<li class="chapter" data-level="11.5" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#абсолютная-частотность"><i class="fa fa-check"></i><b>11.5</b> Абсолютная частотность</a></li>
<li class="chapter" data-level="11.6" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#стемминг"><i class="fa fa-check"></i><b>11.6</b> Стемминг</a></li>
<li class="chapter" data-level="11.7" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#относительная-частотность"><i class="fa fa-check"></i><b>11.7</b> Относительная частотность</a></li>
<li class="chapter" data-level="11.8" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#распределения-слов-токенов"><i class="fa fa-check"></i><b>11.8</b> Распределения слов (токенов)</a></li>
<li class="chapter" data-level="11.9" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#закон-ципфа"><i class="fa fa-check"></i><b>11.9</b> Закон Ципфа</a></li>
<li class="chapter" data-level="11.10" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#ttr-type-token-ratio"><i class="fa fa-check"></i><b>11.10</b> TTR (type-token ratio)</a></li>
<li class="chapter" data-level="11.11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#tf-idf"><i class="fa fa-check"></i><b>11.11</b> TF-IDF</a></li>
<li class="chapter" data-level="11.12" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#сравнение-при-помощи-диаграммы-рассеяния"><i class="fa fa-check"></i><b>11.12</b> Сравнение при помощи диаграммы рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>12</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="12.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>12.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="12.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>12.2</b> Подходы</a></li>
<li class="chapter" data-level="12.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>12.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="12.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>12.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>12.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="12.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>12.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="12.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>12.4.3</b> AFINN</a></li>
<li class="chapter" data-level="12.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>12.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>12.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="12.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подготовка-текста"><i class="fa fa-check"></i><b>12.6</b> Подготовка текста</a></li>
<li class="chapter" data-level="12.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#модификация-лексикона"><i class="fa fa-check"></i><b>12.7</b> Модификация лексикона</a></li>
<li class="chapter" data-level="12.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#соединение-лексикона-и-текста"><i class="fa fa-check"></i><b>12.8</b> Соединение лексикона и текста</a></li>
<li class="chapter" data-level="12.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-на-оси-времени"><i class="fa fa-check"></i><b>12.9</b> Тональность на оси времени</a></li>
<li class="chapter" data-level="12.10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#для-других-языков"><i class="fa fa-check"></i><b>12.10</b> Для других языков</a></li>
<li class="chapter" data-level="12.11" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#виды-эмоций"><i class="fa fa-check"></i><b>12.11</b> Виды эмоций</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html"><i class="fa fa-check"></i><b>13</b> Тематическое моделирование</a>
<ul>
<li class="chapter" data-level="13.1" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#что-такое-lda"><i class="fa fa-check"></i><b>13.1</b> Что такое LDA</a></li>
<li class="chapter" data-level="13.2" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределение-дирихле"><i class="fa fa-check"></i><b>13.2</b> Распределение Дирихле</a></li>
<li class="chapter" data-level="13.3" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#подтоговка-данных"><i class="fa fa-check"></i><b>13.3</b> Подтоговка данных</a></li>
<li class="chapter" data-level="13.4" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#матрица-встречаемости"><i class="fa fa-check"></i><b>13.4</b> Матрица встречаемости</a></li>
<li class="chapter" data-level="13.5" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#число-тем"><i class="fa fa-check"></i><b>13.5</b> Число тем</a></li>
<li class="chapter" data-level="13.6" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#модель-lda"><i class="fa fa-check"></i><b>13.6</b> Модель LDA</a></li>
<li class="chapter" data-level="13.7" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#слова-и-темы"><i class="fa fa-check"></i><b>13.7</b> Слова и темы</a></li>
<li class="chapter" data-level="13.8" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#сравнение-топиков"><i class="fa fa-check"></i><b>13.8</b> Сравнение топиков</a></li>
<li class="chapter" data-level="13.9" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#темы-и-документы"><i class="fa fa-check"></i><b>13.9</b> Темы и документы</a></li>
<li class="chapter" data-level="13.10" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределения-вероятности-для-топиков"><i class="fa fa-check"></i><b>13.10</b> Распределения вероятности для топиков</a></li>
<li class="chapter" data-level="13.11" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#интерактивные-визуализации"><i class="fa fa-check"></i><b>13.11</b> Интерактивные визуализации</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html"><i class="fa fa-check"></i><b>14</b> Латентно-семантический анализ</a>
<ul>
<li class="chapter" data-level="14.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#что-это-такое"><i class="fa fa-check"></i><b>14.1</b> Что это такое</a></li>
<li class="chapter" data-level="14.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторное-представление-слов"><i class="fa fa-check"></i><b>14.2</b> Векторное представление слов</a></li>
<li class="chapter" data-level="14.3" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#сингулярное-разложение-матрицы"><i class="fa fa-check"></i><b>14.3</b> Сингулярное разложение матрицы</a></li>
<li class="chapter" data-level="14.4" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#простой-пример"><i class="fa fa-check"></i><b>14.4</b> Простой пример</a></li>
<li class="chapter" data-level="14.5" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторы-слов"><i class="fa fa-check"></i><b>14.5</b> Векторы слов</a></li>
<li class="chapter" data-level="14.6" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#пакеты-для-работы-с-lsa"><i class="fa fa-check"></i><b>14.6</b> Пакеты для работы с LSA</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa"><i class="fa fa-check"></i><b>14.6.1</b> lsa</a></li>
<li class="chapter" data-level="14.6.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#textminer"><i class="fa fa-check"></i><b>14.6.2</b> TextmineR</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa-c-использованием-tidy-data"><i class="fa fa-check"></i><b>14.7</b> LSA c использованием Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html"><i class="fa fa-check"></i><b>15</b> Кластеризация и метод главных компонент</a>
<ul>
<li class="chapter" data-level="15.1" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#виды-кластерного-анализа"><i class="fa fa-check"></i><b>15.1</b> Виды кластерного анализа</a></li>
<li class="chapter" data-level="15.2" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#кластеризация-по-методу-k-средних"><i class="fa fa-check"></i><b>15.2</b> Кластеризация по методу K средних</a></li>
<li class="chapter" data-level="15.3" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-в-r"><i class="fa fa-check"></i><b>15.3</b> K-means в R</a></li>
<li class="chapter" data-level="15.4" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-для-кластеризации-текстов"><i class="fa fa-check"></i><b>15.4</b> K-means для кластеризации текстов</a></li>
<li class="chapter" data-level="15.5" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#нормализация-данных"><i class="fa fa-check"></i><b>15.5</b> Нормализация данных</a></li>
<li class="chapter" data-level="15.6" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.6</b> Иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.7" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#алгоритм-иерархической-кластеризации"><i class="fa fa-check"></i><b>15.7</b> Алгоритм иерархической кластеризации</a></li>
<li class="chapter" data-level="15.8" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-в-r"><i class="fa fa-check"></i><b>15.8</b> Иерархическая кластеризация в R</a></li>
<li class="chapter" data-level="15.9" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-текстов"><i class="fa fa-check"></i><b>15.9</b> Иерархическая кластеризация текстов</a></li>
<li class="chapter" data-level="15.10" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#метод-главных-компонент"><i class="fa fa-check"></i><b>15.10</b> Метод главных компонент</a></li>
<li class="chapter" data-level="15.11" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-для-визуализации-кластеров-k-means"><i class="fa fa-check"></i><b>15.11</b> PCA для визуализации кластеров K-means</a></li>
<li class="chapter" data-level="15.12" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-и-иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.12</b> PCA и иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.13" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#многомерное-шкалирование"><i class="fa fa-check"></i><b>15.13</b> Многомерное шкалирование</a></li>
<li class="chapter" data-level="15.14" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-с-factominer"><i class="fa fa-check"></i><b>15.14</b> PCA с FactoMineR</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html"><i class="fa fa-check"></i><b>16</b> Сетевые данные и графы</a>
<ul>
<li class="chapter" data-level="16.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#базовое-описание"><i class="fa fa-check"></i><b>16.1</b> Базовое описание</a></li>
<li class="chapter" data-level="16.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#создание-сетевых-данных"><i class="fa fa-check"></i><b>16.2</b> Создание сетевых данных</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#социоматрица"><i class="fa fa-check"></i><b>16.2.1</b> Социоматрица</a></li>
<li class="chapter" data-level="16.2.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#список-ребер"><i class="fa fa-check"></i><b>16.2.2</b> Список ребер</a></li>
<li class="chapter" data-level="16.2.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#формула"><i class="fa fa-check"></i><b>16.2.3</b> Формула</a></li>
<li class="chapter" data-level="16.2.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-данных"><i class="fa fa-check"></i><b>16.2.4</b> Импорт данных</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-вершин-узлов"><i class="fa fa-check"></i><b>16.3</b> Атрибуты вершин (узлов)</a></li>
<li class="chapter" data-level="16.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-узлу"><i class="fa fa-check"></i><b>16.4</b> Фильтрация по узлу</a></li>
<li class="chapter" data-level="16.5" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-ребер"><i class="fa fa-check"></i><b>16.5</b> Атрибуты ребер</a></li>
<li class="chapter" data-level="16.6" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-из-gexf"><i class="fa fa-check"></i><b>16.6</b> Импорт из gexf</a></li>
<li class="chapter" data-level="16.7" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#визуализация-с-ggraph"><i class="fa fa-check"></i><b>16.7</b> Визуализация с ggraph</a></li>
<li class="chapter" data-level="16.8" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-атрибутам-ребер"><i class="fa fa-check"></i><b>16.8</b> Фильтрация по атрибутам ребер</a></li>
<li class="chapter" data-level="16.9" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#укладка-сети"><i class="fa fa-check"></i><b>16.9</b> Укладка сети</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="анализ-сетей.html"><a href="анализ-сетей.html"><i class="fa fa-check"></i><b>17</b> Анализ сетей</a>
<ul>
<li class="chapter" data-level="17.1" data-path="анализ-сетей.html"><a href="анализ-сетей.html#от-conllu-к-совместной-встречаемости"><i class="fa fa-check"></i><b>17.1</b> От conllu к совместной встречаемости</a></li>
<li class="chapter" data-level="17.2" data-path="анализ-сетей.html"><a href="анализ-сетей.html#граф-слов-с-igraph"><i class="fa fa-check"></i><b>17.2</b> Граф слов с igraph</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="токенизация-и-лемматизация" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Тема 10</span> Токенизация и лемматизация<a href="токенизация-и-лемматизация.html#токенизация-и-лемматизация" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Токенизация — процесс разделения текста на составляющие (их называют «токенами»). Токенами могут быть слова, символьные или словесные <strong>энграмы</strong> (n-grams), то есть сочетания символов или слов, даже предложения или параграфы. Все зависит от того, какие единицы вам нужны для анализа.</p>
<p>Визуально процесс токенизации можно представить так<a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a>:</p>
<p><img src="https://smltar.com/diagram-files/tokenization-black-box.png" style="width:60.0%" /></p>
<p>Токенизировать можно в базовом R, и <span class="citation">Jockers (<a href="#ref-jockers2014">2014</a>)</span> прекрасно показывает, как это можно делать. Но вы воспользуемся двумя пакетами, которые предназначены специально для работы с текстовыми данными и разделяют идеологию <code>tidyverse</code>. Оба пакета придется загрузить отдельно.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="токенизация-и-лемматизация.html#cb560-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb560-2"><a href="токенизация-и-лемматизация.html#cb560-2" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb560-3"><a href="токенизация-и-лемматизация.html#cb560-3" tabindex="-1"></a><span class="fu">library</span>(tokenizers)</span></code></pre></div>
<p>Для их освоения рекомендую изучить две книги: <span class="citation">Silge and Robinson (<a href="#ref-textmining2017">2017</a>)</span> и @ Обе доступны бесплатно онлайн. Обе содержат множество примеров для английских текстов. Для разнообразия я покажу, как это работает, на русских текстах (потому что латинские и древнегреческие никому не интересны).</p>
<p>Для анализа я снова (ср. урок 6) загружу “Бедную Лизу” Карамзина, на этот раз полностью.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="токенизация-и-лемматизация.html#cb561-1" tabindex="-1"></a>liza <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="at">con =</span> <span class="st">&quot;files/karamzin_liza.txt&quot;</span>) </span>
<span id="cb561-2"><a href="токенизация-и-лемматизация.html#cb561-2" tabindex="-1"></a><span class="fu">class</span>(liza)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="токенизация-и-лемматизация.html#cb563-1" tabindex="-1"></a><span class="fu">length</span>(liza)</span></code></pre></div>
<pre><code>## [1] 46</code></pre>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="токенизация-и-лемматизация.html#cb565-1" tabindex="-1"></a><span class="fu">nchar</span>(liza)</span></code></pre></div>
<pre><code>##  [1] 1045  505 1524  218  285  999  254  658 1149  629  121  284  170  252  701
## [16] 1091  632  936 1726   96  698  167  985  316 1323 1844  763 1104  617  959
## [31] 1191  305 1433  119  830  414  257 1218  977  225  513 1695  132  214  251
## [46]  267</code></pre>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="токенизация-и-лемматизация.html#cb567-1" tabindex="-1"></a>liza[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;    Может быть, никто из живущих в Москве не знает так хорошо окрестностей города сего, как я, потому что никто чаще моего не бывает в поле, никто более моего не бродит пешком, без плана, без цели -- куда глаза глядят -- по лугам и рощам, по холмам и равнинам. Всякое лето нахожу новые приятные места или в старых новые красоты. Но всего приятнее для меня то место, на котором возвышаются мрачные, готические башни Си...нова монастыря. Стоя на сей горе, видишь на правой стороне почти всю Москву, сию ужасную громаду домов и церквей, которая представляется глазам в образе величественного амфитеатра: великолепная картина, особливо когда светит на нее солнце, когда вечерние лучи его пылают на бесчисленных златых куполах, на бесчисленных крестах, к небу возносящихся! Внизу расстилаются тучные, густо-зеленые цветущие луга, а за ними, по желтым пескам, течет светлая река, волнуемая легкими веслами рыбачьих лодок или шумящая под рулем грузных стругов, которые плывут от плодоноснейших стран Российской империи и наделяют алчную Москву хлебом. &quot;</code></pre>
<div id="токенизация-в-tidytext" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Токенизация в tidytext<a href="токенизация-и-лемматизация.html#токенизация-в-tidytext" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Прежде чем передать текст пакету <code>tidytext</code>, его следует трансформировать в тиббл – этого требуют функции на входе. По умолчанию столбец будет называться value, и я его сразу переименую.</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="токенизация-и-лемматизация.html#cb569-1" tabindex="-1"></a>liza_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(liza) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">text =</span> value)</span>
<span id="cb569-2"><a href="токенизация-и-лемматизация.html#cb569-2" tabindex="-1"></a>liza_tbl</span></code></pre></div>
<pre><code>## # A tibble: 46 × 1
##    text                                                                         
##    &lt;chr&gt;                                                                        
##  1 &quot;    Может быть, никто из живущих в Москве не знает так хорошо окрестностей …
##  2 &quot;       На другой стороне реки видна дубовая роща, подле которой пасутся мно…
##  3 &quot;       Часто прихожу на сие место и почти всегда встречаю там весну; туда ж…
##  4 &quot;       Но всего чаще привлекает меня к стенам Си...нова монастыря воспомина…
##  5 &quot;       Саженях в семидесяти от монастырской стены, подле березовой рощицы, …
##  6 &quot;       Отец Лизин был довольно зажиточный поселянин, потому что он любил ра…
##  7 &quot;       \&quot;Бог дал мне руки, чтобы работать, -- говорила Лиза, -- ты кормила …
##  8 &quot;       Но часто нежная Лиза не могла удержать собственных слез своих -- ах!…
##  9 &quot;       Прошло два года после смерти отца Лизина. Луга покрылись цветами, и …
## 10 &quot;       Лиза, пришедши домой, рассказала матери, что с нею случилось. \&quot;Ты х…
## # ℹ 36 more rows</code></pre>
<p>Этот текст мы передаем функции <code>unnest_tokens()</code>, которая принимает следующие аргументы:</p>
<pre><code>unnest_tokens(
  tbl,
  output,
  input,
  token = &quot;words&quot;,
  format = c(&quot;text&quot;, &quot;man&quot;, &quot;latex&quot;, &quot;html&quot;, &quot;xml&quot;),
  to_lower = TRUE,
  drop = TRUE,
  collapse = NULL,
  ...
)</code></pre>
<p>Аргумент <code>token</code> принимает следующие значения:</p>
<ul>
<li>“words” (default),</li>
<li>“characters”,</li>
<li>“character_shingles”,</li>
<li>“ngrams”,</li>
<li>“skip_ngrams”,</li>
<li>“sentences”,</li>
<li>“lines”,</li>
<li>“paragraphs”,</li>
<li>“regex”,</li>
<li>“ptb” (Penn Treebank).</li>
</ul>
<p>Используя уже знакомую функцию <code>map</code>, можно запустить <code>unnest_tokens()</code> с разными аргументами:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="токенизация-и-лемматизация.html#cb572-1" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb572-2"><a href="токенизация-и-лемматизация.html#cb572-2" tabindex="-1"></a>  <span class="sc">~</span>tbl, <span class="sc">~</span>output, <span class="sc">~</span>input, <span class="sc">~</span>token,</span>
<span id="cb572-3"><a href="токенизация-и-лемматизация.html#cb572-3" tabindex="-1"></a>  liza_tbl[<span class="dv">1</span>,], <span class="st">&quot;word&quot;</span>, <span class="st">&quot;text&quot;</span>, <span class="st">&quot;words&quot;</span>, </span>
<span id="cb572-4"><a href="токенизация-и-лемматизация.html#cb572-4" tabindex="-1"></a>  liza_tbl[<span class="dv">1</span>,], <span class="st">&quot;sentence&quot;</span>, <span class="st">&quot;text&quot;</span>, <span class="st">&quot;sentences&quot;</span>,</span>
<span id="cb572-5"><a href="токенизация-и-лемматизация.html#cb572-5" tabindex="-1"></a>  liza_tbl[<span class="dv">1</span>,], <span class="st">&quot;char&quot;</span>, <span class="st">&quot;text&quot;</span>, <span class="st">&quot;characters&quot;</span>, </span>
<span id="cb572-6"><a href="токенизация-и-лемматизация.html#cb572-6" tabindex="-1"></a>)</span>
<span id="cb572-7"><a href="токенизация-и-лемматизация.html#cb572-7" tabindex="-1"></a></span>
<span id="cb572-8"><a href="токенизация-и-лемматизация.html#cb572-8" tabindex="-1"></a>params <span class="sc">%&gt;%</span> <span class="fu">pmap</span>(unnest_tokens) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 159 × 1
##    word   
##    &lt;chr&gt;  
##  1 может  
##  2 быть   
##  3 никто  
##  4 из     
##  5 живущих
##  6 в      
##  7 москве 
##  8 не     
##  9 знает  
## 10 так    
## # ℹ 149 more rows
## 
## [[2]]
## # A tibble: 5 × 1
##   sentence                                                                      
##   &lt;chr&gt;                                                                         
## 1 может быть, никто из живущих в москве не знает так хорошо окрестностей города…
## 2 всякое лето нахожу новые приятные места или в старых новые красоты.           
## 3 но всего приятнее для меня то место, на котором возвышаются мрачные, готическ…
## 4 стоя на сей горе, видишь на правой стороне почти всю москву, сию ужасную гром…
## 5 внизу расстилаются тучные, густо-зеленые цветущие луга, а за ними, по желтым …
## 
## [[3]]
## # A tibble: 846 × 1
##    char 
##    &lt;chr&gt;
##  1 м    
##  2 о    
##  3 ж    
##  4 е    
##  5 т    
##  6 б    
##  7 ы    
##  8 т    
##  9 ь    
## 10 н    
## # ℹ 836 more rows</code></pre>
<p>Следующие значения аргумента <code>token</code> требуют также аргумента <code>n</code>:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="токенизация-и-лемматизация.html#cb574-1" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb574-2"><a href="токенизация-и-лемматизация.html#cb574-2" tabindex="-1"></a>  <span class="sc">~</span>tbl, <span class="sc">~</span>output, <span class="sc">~</span>input, <span class="sc">~</span>token, <span class="sc">~</span>n,</span>
<span id="cb574-3"><a href="токенизация-и-лемматизация.html#cb574-3" tabindex="-1"></a>  liza_tbl[<span class="dv">1</span>,], <span class="st">&quot;ngram&quot;</span>, <span class="st">&quot;text&quot;</span>, <span class="st">&quot;ngrams&quot;</span>, <span class="dv">3</span>,</span>
<span id="cb574-4"><a href="токенизация-и-лемматизация.html#cb574-4" tabindex="-1"></a>  liza_tbl[<span class="dv">1</span>,], <span class="st">&quot;shingles&quot;</span>, <span class="st">&quot;text&quot;</span>, <span class="st">&quot;character_shingles&quot;</span>, <span class="dv">3</span></span>
<span id="cb574-5"><a href="токенизация-и-лемматизация.html#cb574-5" tabindex="-1"></a>)</span>
<span id="cb574-6"><a href="токенизация-и-лемматизация.html#cb574-6" tabindex="-1"></a></span>
<span id="cb574-7"><a href="токенизация-и-лемматизация.html#cb574-7" tabindex="-1"></a>params <span class="sc">%&gt;%</span> <span class="fu">pmap</span>(unnest_tokens) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 157 × 1
##    ngram                  
##    &lt;chr&gt;                  
##  1 может быть никто       
##  2 быть никто из          
##  3 никто из живущих       
##  4 из живущих в           
##  5 живущих в москве       
##  6 в москве не            
##  7 москве не знает        
##  8 не знает так           
##  9 знает так хорошо       
## 10 так хорошо окрестностей
## # ℹ 147 more rows
## 
## [[2]]
## # A tibble: 844 × 1
##    shingles
##    &lt;chr&gt;   
##  1 мож     
##  2 оже     
##  3 жет     
##  4 етб     
##  5 тбы     
##  6 быт     
##  7 ыть     
##  8 тьн     
##  9 ьни     
## 10 ник     
## # ℹ 834 more rows</code></pre>
</div>
<div id="токенизация-в-tokenizers" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Токенизация в tokenizers<a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>При работе с данными в текстовом формате <code>unnest_tokens()</code> опирается на пакет <code>tokenizers</code>, но <code>tokenize_words</code> требует на входе вектор, а не тиббл. Несколько полезных аргументов, о которых стоит помнить: <code>strip_non_alphanum</code> (удаляет пробельные символы и пунктуацию), <code>strip_punct</code> (удаляет пунктуацию), <code>strip_numeric</code> (удаляет числа).</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="токенизация-и-лемматизация.html#cb576-1" tabindex="-1"></a>words_no_punct <span class="ot">&lt;-</span> <span class="fu">tokenize_words</span>(liza[<span class="dv">1</span>], <span class="at">strip_punct =</span> T)</span>
<span id="cb576-2"><a href="токенизация-и-лемматизация.html#cb576-2" tabindex="-1"></a>words_no_punct[[<span class="dv">1</span>]][<span class="dv">25</span><span class="sc">:</span><span class="dv">40</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;поле&quot;   &quot;никто&quot;  &quot;более&quot;  &quot;моего&quot;  &quot;не&quot;     &quot;бродит&quot; &quot;пешком&quot; &quot;без&quot;   
##  [9] &quot;плана&quot;  &quot;без&quot;    &quot;цели&quot;   &quot;куда&quot;   &quot;глаза&quot;  &quot;глядят&quot; &quot;по&quot;     &quot;лугам&quot;</code></pre>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="токенизация-и-лемматизация.html#cb578-1" tabindex="-1"></a>words_punct <span class="ot">&lt;-</span> <span class="fu">tokenize_words</span>(liza[<span class="dv">1</span>], <span class="at">strip_punct =</span> F)</span>
<span id="cb578-2"><a href="токенизация-и-лемматизация.html#cb578-2" tabindex="-1"></a>words_punct[[<span class="dv">1</span>]][<span class="dv">25</span><span class="sc">:</span><span class="dv">40</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;не&quot;     &quot;бывает&quot; &quot;в&quot;      &quot;поле&quot;   &quot;,&quot;      &quot;никто&quot;  &quot;более&quot;  &quot;моего&quot; 
##  [9] &quot;не&quot;     &quot;бродит&quot; &quot;пешком&quot; &quot;,&quot;      &quot;без&quot;    &quot;плана&quot;  &quot;,&quot;      &quot;без&quot;</code></pre>
</div>
<div id="скипграмы" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Скипграмы<a href="токенизация-и-лемматизация.html#скипграмы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Скипграмы, или скользящие окна, применяются в некоторых языковых моделях.</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="токенизация-и-лемматизация.html#cb580-1" tabindex="-1"></a>skipgrams <span class="ot">&lt;-</span> <span class="fu">tokenize_skip_ngrams</span>(liza[<span class="dv">1</span>], <span class="at">n=</span><span class="dv">3</span>) </span>
<span id="cb580-2"><a href="токенизация-и-лемматизация.html#cb580-2" tabindex="-1"></a>skipgrams[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;может&quot;               &quot;может быть&quot;          &quot;может никто&quot;        
##  [4] &quot;может быть никто&quot;    &quot;может быть из&quot;       &quot;может никто из&quot;     
##  [7] &quot;может никто живущих&quot; &quot;быть&quot;                &quot;быть никто&quot;         
## [10] &quot;быть из&quot;</code></pre>
<p>Функция считает все скипграмы длиной до трех включительно; это можно поправить:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="токенизация-и-лемматизация.html#cb582-1" tabindex="-1"></a>skipgrams <span class="ot">&lt;-</span> <span class="fu">tokenize_skip_ngrams</span>(liza[<span class="dv">1</span>], <span class="at">n=</span><span class="dv">3</span>, <span class="at">n_min =</span> <span class="dv">3</span>) </span>
<span id="cb582-2"><a href="токенизация-и-лемматизация.html#cb582-2" tabindex="-1"></a>skipgrams[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;может быть никто&quot;    &quot;может быть из&quot;       &quot;может никто из&quot;     
##  [4] &quot;может никто живущих&quot; &quot;быть никто из&quot;       &quot;быть никто живущих&quot; 
##  [7] &quot;быть из живущих&quot;     &quot;быть из в&quot;           &quot;никто из живущих&quot;   
## [10] &quot;никто из в&quot;</code></pre>
<p>Важно выбрать правильное значение n при использовании энграм. Использование униграм быстрее и эффективнее, но мы не получаем информации о порядке слов. Чем выше n, тем больше сохраняется информации, но при этом резко увеличивается векторное пространство, а встречаемость отдельных токенов уменьшается<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a>.</p>
<p>Уже на этапе токенизации можно удалить стоп-слова (используя аргумент <code>stopwords</code>), но это имеет смысл, если текст изначально лемматизирован (то есть слова даны в начальной форме): это возможно, если леммы хранились, например, в исходном xml. Наша “Лиза” не лемматизирована, поэтому удалять стоп-слова мы не будем.</p>
</div>
<div id="лемматизация-и-частеречная-разметка" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Лемматизация и частеречная разметка<a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Помимо деления на токены, предварительная обработка текста может включать в себя лемматизацию, то есть приведение слов к начальной форме (лемме) и синтаксическую разметку.</p>
<p>Для аннотации мы воспользуемся морфологическим и синтаксическим анализатором UDPipe (Universal Dependencies Pipeline), который существует в виде одноименного пакета в R. В отличие от других анализаторов, доступных в R, он позволяет работать со множеством языков (всего 65), для многих из которых представлено несколько моделей, обученных на разных данных.</p>
<p>Прежде всего нужно выбрать и загрузить модель для (<a href="https://cran.r-project.org/web/packages/udpipe/vignettes/udpipe-annotation.html">список</a>). Модель GSD-Russian<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a>, с которой мы начнем работу, обучена на статьях в Википедии, и, вероятно, не очень подойдет для наших задач – но можно попробовать.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="токенизация-и-лемматизация.html#cb584-1" tabindex="-1"></a><span class="fu">library</span>(udpipe)</span>
<span id="cb584-2"><a href="токенизация-и-лемматизация.html#cb584-2" tabindex="-1"></a></span>
<span id="cb584-3"><a href="токенизация-и-лемматизация.html#cb584-3" tabindex="-1"></a><span class="co"># скачиваем модель в рабочую директорию</span></span>
<span id="cb584-4"><a href="токенизация-и-лемматизация.html#cb584-4" tabindex="-1"></a><span class="co"># udpipe_download_model(language = &quot;russian-gsd&quot;)</span></span>
<span id="cb584-5"><a href="токенизация-и-лемматизация.html#cb584-5" tabindex="-1"></a></span>
<span id="cb584-6"><a href="токенизация-и-лемматизация.html#cb584-6" tabindex="-1"></a><span class="co"># загружаем модель</span></span>
<span id="cb584-7"><a href="токенизация-и-лемматизация.html#cb584-7" tabindex="-1"></a>russian_gsd <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(<span class="at">file =</span> <span class="st">&quot;russian-gsd-ud-2.5-191206.udpipe&quot;</span>)</span></code></pre></div>
<p>Модели передается вектор с текстом.</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="токенизация-и-лемматизация.html#cb585-1" tabindex="-1"></a>liza_ann <span class="ot">&lt;-</span> <span class="fu">udpipe_annotate</span>(russian_gsd, liza)</span></code></pre></div>
<p>Результат возвращается в формате CONLL-U; это широко применяемый формат
представления результат морфологического и синтаксического анализа текстов. Формат разбора предложения в Conll-U выглядит так:</p>
<p><img src="https://www.researchgate.net/publication/341522061/figure/fig1/AS:893293068046336@1589989072121/1-CONLL-U-format-example.ppm" /></p>
<p>Cтроки слов содержат следующие поля:
1. ID: индекс слова, целое число, начиная с 1 для каждого нового
предложения; может быть диапазоном токенов с несколькими словами.
2. FORM: словоформа или знак препинания.
3. LEMMA: Лемма или основа словоформы.
4. UPOSTAG: универсальный тег части речи.
5. XPOSTAG: тег части речи для конкретного языка.
6. FEATS: список морфологических характеристик.
7. HEAD: заголовок текущего токена, который является либо
значением ID, либо нулем (0).
8. DEPREL: Universal Stanford dependency relation к (root iff HEAD
= 0) или определенному зависящему от языка подтипу.
9. DEPS: Список вторичных зависимостей.
10. MISC: любая другая аннотация.</p>
<p>Для работы данные удобнее трансформировать в прямоугольный формат.</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="токенизация-и-лемматизация.html#cb586-1" tabindex="-1"></a>liza_df <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(liza_ann) <span class="sc">%&gt;%</span> </span>
<span id="cb586-2"><a href="токенизация-и-лемматизация.html#cb586-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sentence, <span class="sc">-</span>paragraph_id)</span>
<span id="cb586-3"><a href="токенизация-и-лемматизация.html#cb586-3" tabindex="-1"></a></span>
<span id="cb586-4"><a href="токенизация-и-лемматизация.html#cb586-4" tabindex="-1"></a><span class="fu">str</span>(liza_df)</span></code></pre></div>
<pre><code>## tibble [6,447 × 12] (S3: tbl_df/tbl/data.frame)
##  $ doc_id       : chr [1:6447] &quot;doc1&quot; &quot;doc1&quot; &quot;doc1&quot; &quot;doc1&quot; ...
##  $ sentence_id  : int [1:6447] 1 1 1 1 1 1 1 1 1 1 ...
##  $ token_id     : chr [1:6447] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ token        : chr [1:6447] &quot;Может&quot; &quot;быть&quot; &quot;,&quot; &quot;никто&quot; ...
##  $ lemma        : chr [1:6447] &quot;мочь&quot; &quot;быть&quot; &quot;,&quot; &quot;никто&quot; ...
##  $ upos         : chr [1:6447] &quot;VERB&quot; &quot;AUX&quot; &quot;PUNCT&quot; &quot;PRON&quot; ...
##  $ xpos         : chr [1:6447] &quot;VBC&quot; &quot;VB&quot; &quot;,&quot; &quot;DT&quot; ...
##  $ feats        : chr [1:6447] &quot;Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act&quot; &quot;Aspect=Imp|VerbForm=Inf&quot; NA &quot;Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing&quot; ...
##  $ head_token_id: chr [1:6447] &quot;0&quot; &quot;4&quot; &quot;2&quot; &quot;10&quot; ...
##  $ dep_rel      : chr [1:6447] &quot;root&quot; &quot;cop&quot; &quot;punct&quot; &quot;nsubj&quot; ...
##  $ deps         : chr [1:6447] NA NA NA NA ...
##  $ misc         : chr [1:6447] &quot;SpacesBefore=\\s\\s\\s\\s&quot; &quot;SpaceAfter=No&quot; NA NA ...</code></pre>
<p>Выведем часть (!) столбцов для первого предложения:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="токенизация-и-лемматизация.html#cb588-1" tabindex="-1"></a>liza_df <span class="sc">%&gt;%</span> </span>
<span id="cb588-2"><a href="токенизация-и-лемматизация.html#cb588-2" tabindex="-1"></a>  <span class="fu">filter</span>(doc_id <span class="sc">==</span> <span class="st">&quot;doc1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb588-3"><a href="токенизация-и-лемматизация.html#cb588-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sentence_id, <span class="sc">-</span>head_token_id, <span class="sc">-</span>deps, <span class="sc">-</span>dep_rel, <span class="sc">-</span>misc) <span class="sc">%&gt;%</span> </span>
<span id="cb588-4"><a href="токенизация-и-лемматизация.html#cb588-4" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4d6360b2bad80124e6e0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4d6360b2bad80124e6e0">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188"],["doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1"],["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45"],["Может","быть",",","никто","из","живущих","в","Москве","не","знает","так","хорошо","окрестностей","города","сего",",","как","я",",","потому","что","никто","чаще","моего","не","бывает","в","поле",",","никто","более","моего","не","бродит","пешком",",","без","плана",",","без","цели","--","куда","глаза","глядят","--","по","лугам","и","рощам",",","по","холмам","и","равнинам",".","Всякое","лето","нахожу","новые","приятные","места","или","в","старых","новые","красоты",".","Но","всего","приятнее","для","меня","то","место",",","на","котором","возвышаются","мрачные",",","готические","башни","Си","...нова","монастыря",".","Стоя","на","сей","горе",",","видишь","на","правой","стороне","почти","всю","Москву",",","сию","ужасную","громаду","домов","и","церквей",",","которая","представляется","глазам","в","образе","величественного","амфитеатра",":","великолепная","картина",",","особливо","когда","светит","на","нее","солнце",",","когда","вечерние","лучи","его","пылают","на","бесчисленных","златых","куполах",",","на","бесчисленных","крестах",",","к","небу","возносящихся","!","Внизу","расстилаются","тучные",",","густо-зеленые","цветущие","луга",",","а","за","ними",",","по","желтым","пескам",",","течет","светлая","река",",","волнуемая","легкими","веслами","рыбачьих","лодок","или","шумящая","под","рулем","грузных","стругов",",","которые","плывут","от","плодоноснейших","стран","Российской","империи","и","наделяют","алчную","Москву","хлебом","."],["мочь","быть",",","никто","из","живущая","в","Москва","не","знать","так","хорошо","окрестность","город","сего",",","как","я",",","потому","что","никто","чаще","мой","не","бывать","в","поле",",","никто","более","мой","не","бродить","пешко",",","без","план",",","без","цель","--","куда","глаз","глядят","--","по","луг","и","роща",",","по","холм","и","равнина",".","Всякий","лето","нахож","новый","приятный","место","или","в","старый","новый","красота",".","но","всё","приятно","для","я","тот","место",",","на","который","возвышаться","мрачный",",","готический","башня","Си","...нов","монастырь",".","Стой","на","сей","гора",",","видишь","на","правый","сторона","почти","весь","Москва",",","сия","ужасный","громада","дом","и","церковь",",","который","представляться","глаз","в","образ","величественный","амфитеатр",":","великолепный","картина",",","особливо","когда","светить","на","она","солнце",",","когда","вечерний","луч","он","пылать","на","бесчисленный","златый","купол",",","на","бесчисленный","кресты",",","к","небо","возноситься","!","внизу","расстилаться","тучный",",","густо-зеленый","цветущий","луг",",","а","за","они",",","по","желтый","песко",",","течь","светлый","река",",","волнуть","легкой","весл","рыбачий","лодка","или","шумить","под","руль","грузный","струг",",","который","плыть","от","плодоноснейший","страна","российский","империя","и","наделять","алчный","Москва","хлеб","."],["VERB","AUX","PUNCT","PRON","ADP","VERB","ADP","PROPN","PART","VERB","ADV","ADV","NOUN","NOUN","NOUN","PUNCT","ADP","PRON","PUNCT","SCONJ","SCONJ","PRON","ADV","DET","PART","VERB","ADP","NOUN","PUNCT","PRON","ADV","DET","PART","VERB","NOUN","PUNCT","ADP","NOUN","PUNCT","ADP","NOUN","PUNCT","ADV","NOUN","VERB","PUNCT","ADP","NOUN","CCONJ","NOUN","PUNCT","ADP","NOUN","CCONJ","NOUN","PUNCT","ADJ","NOUN","PROPN","ADJ","ADJ","NOUN","CCONJ","ADP","ADJ","ADJ","NOUN","PUNCT","CCONJ","ADV","ADV","ADP","PRON","DET","NOUN","PUNCT","ADP","PRON","VERB","ADJ","PUNCT","ADJ","NOUN","PROPN","ADJ","NOUN","PUNCT","NOUN","ADP","DET","NOUN","PUNCT","VERB","ADP","NOUN","NOUN","ADV","DET","PROPN","PUNCT","NOUN","ADJ","NOUN","NOUN","CCONJ","NOUN","PUNCT","PRON","VERB","NOUN","ADP","NOUN","ADJ","NOUN","PUNCT","ADJ","NOUN","PUNCT","NOUN","ADV","VERB","ADP","PRON","NOUN","PUNCT","ADV","ADJ","NOUN","PRON","VERB","ADP","ADJ","ADJ","NOUN","PUNCT","ADP","ADJ","NOUN","PUNCT","ADP","NOUN","VERB","PUNCT","ADV","VERB","ADJ","PUNCT","ADJ","ADJ","NOUN","PUNCT","CCONJ","ADP","PRON","PUNCT","ADP","ADJ","NOUN","PUNCT","NOUN","ADJ","NOUN","PUNCT","VERB","ADJ","NOUN","ADJ","NOUN","CCONJ","VERB","ADP","NOUN","ADJ","NOUN","PUNCT","PRON","VERB","ADP","ADJ","NOUN","ADJ","NOUN","CCONJ","VERB","ADJ","PROPN","NOUN","PUNCT"],["VBC","VB",",","DT","IN","VBNL","IN","NNP","NEG","VBC","RB","RB","NN","NN","NN",",","IN","PRP",",","IN","IN","DT","RBR","PRP$","NEG","VBC","IN","NN",",","DT","RBR","PRP$","NEG","VBC","NN",",","IN","NN",",","IN","NN","--","WRB","NN","VBC","--","IN","NN","CC","NN",",","IN","NN","CC","NN",".","JJL","NN","NNP","JJL","JJL","NN","CC","IN","JJL","JJL","NN",".","CC","RB","RBR","IN","PRP","DT","NN",",","IN","AWP","VBC","JJL",",","JJL","NN","NNP","JJL","NN",".","NN","IN","DT","NN",",","VB","IN","NN","NN","RB","DT","NNP",",","NN","JJL","NN","NN","CC","NN",",","AWP","VBC","NN","IN","NN","JJL","NN",":","JJL","NN",",","NN","WRB","VBC","IN","PRP","NN",",","WRB","JJL","NN","PRP","VBC","IN","JJL","JJL","NN",",","IN","JJL","NN",",","IN","NN","VBNL",".","RB","VBC","JJL",",","JJL","JJL","NN",",","CC","IN","PRP",",","IN","JJL","NN",",","NN","JJL","NN",",","VBG","JJL","NN","JJL","NN","CC","VBNL","IN","NN","JJL","NN",",","AWP","VBC","IN","JJL","NN","JJL","NN","CC","VBC","JJL","NNP","NN","."],["Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Aspect=Imp|VerbForm=Inf",null,"Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing",null,"Animacy=Inan|Aspect=Imp|Case=Gen|Number=Plur|Tense=Pres|VerbForm=Part|Voice=Act",null,"Animacy=Inan|Case=Loc|Gender=Fem|Number=Sing","Polarity=Neg","Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Degree=Pos","Degree=Pos","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing","Animacy=Inan|Case=Gen|Gender=Neut|Number=Sing",null,null,"Case=Nom|Number=Sing|Person=1",null,null,null,"Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing","Degree=Cmp","Case=Gen|Gender=Masc|Number=Sing","Polarity=Neg","Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Animacy=Inan|Case=Acc|Gender=Neut|Number=Sing",null,"Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing","Degree=Cmp","Case=Gen|Gender=Masc|Number=Sing","Polarity=Neg","Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Animacy=Inan|Case=Ins|Gender=Masc|Number=Sing",null,null,"Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,null,"Animacy=Inan|Case=Dat|Gender=Fem|Number=Sing",null,null,"Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,null,"Animacy=Anim|Case=Dat|Gender=Masc|Number=Plur",null,"Animacy=Anim|Case=Dat|Gender=Masc|Number=Plur",null,null,"Animacy=Anim|Case=Dat|Gender=Masc|Number=Plur",null,"Animacy=Anim|Case=Dat|Gender=Masc|Number=Plur",null,"Case=Nom|Degree=Pos|Gender=Neut|Number=Sing","Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing","Animacy=Inan|Case=Nom|Gender=Masc|Number=Sing","Case=Nom|Degree=Pos|Number=Plur","Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Neut|Number=Plur",null,null,"Case=Gen|Degree=Pos|Number=Plur","Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Masc|Number=Plur",null,null,"Degree=Pos","Degree=Cmp",null,"Case=Gen|Number=Sing|Person=1","Case=Nom|Gender=Neut|Number=Sing","Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing",null,null,"Animacy=Inan|Case=Loc|Gender=Masc|Number=Sing","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Case=Nom|Degree=Pos|Number=Plur",null,"Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Fem|Number=Plur","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing","Case=Gen|Degree=Pos|Gender=Masc|Number=Sing","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,"Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,"Case=Nom|Gender=Masc|Number=Sing","Animacy=Inan|Case=Gen|Gender=Neut|Number=Sing",null,"Aspect=Perf|VerbForm=Inf|Voice=Act",null,"Animacy=Inan|Case=Ins|Gender=Fem|Number=Sing","Animacy=Anim|Case=Nom|Gender=Masc|Number=Plur","Degree=Pos","Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing",null,"Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing","Case=Acc|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Gen|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur",null,"Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing","Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Animacy=Inan|Case=Dat|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Loc|Gender=Masc|Number=Sing","Case=Gen|Degree=Pos|Gender=Masc|Number=Sing","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,"Case=Nom|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,"Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Acc|Gender=Fem|Number=Sing|Person=3","Animacy=Anim|Case=Dat|Gender=Fem|Number=Sing",null,null,"Animacy=Inan|Case=Acc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Acc|Gender=Masc|Number=Plur","Case=Acc|Gender=Masc|Number=Sing|Person=3","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Gen|Degree=Pos|Number=Plur","Case=Gen|Degree=Pos|Number=Plur","Animacy=Anim|Case=Loc|Gender=Fem|Number=Plur",null,null,"Case=Loc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Loc|Gender=Masc|Number=Plur",null,null,"Animacy=Inan|Case=Dat|Gender=Neut|Number=Sing","Animacy=Inan|Aspect=Imp|Case=Gen|Number=Plur|Tense=Pres|VerbForm=Part|Voice=Act",null,"Degree=Pos","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Case=Nom|Degree=Pos|Number=Plur",null,"Case=Nom|Degree=Pos|Number=Plur","Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,null,null,"Case=Ins|Number=Plur|Person=3",null,null,"Case=Dat|Degree=Pos|Number=Plur","Animacy=Inan|Case=Dat|Gender=Fem|Number=Plur",null,"Animacy=Inan|Case=Nom|Gender=Masc|Number=Sing","Case=Nom|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,"Aspect=Imp|Tense=Pres|VerbForm=Conv|Voice=Act","Case=Ins|Degree=Pos|Number=Plur","Animacy=Inan|Case=Ins|Gender=Fem|Number=Plur","Case=Gen|Degree=Pos|Number=Plur","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur",null,"Animacy=Inan|Aspect=Imp|Case=Nom|Gender=Fem|Number=Sing|Tense=Pres|VerbForm=Part|Voice=Act",null,"Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur","Case=Gen|Degree=Pos|Number=Plur","Animacy=Inan|Case=Gen|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Nom|Number=Plur","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Gen|Degree=Pos|Number=Plur","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur","Case=Gen|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Gen|Gender=Fem|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Case=Acc|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Masc|Number=Sing",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>doc_id<\/th>\n      <th>token_id<\/th>\n      <th>token<\/th>\n      <th>lemma<\/th>\n      <th>upos<\/th>\n      <th>xpos<\/th>\n      <th>feats<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Если полистать эту таблицу, можно заметить несколько ошибок, например странное существительное “пешко” (наречие “пешком” понято как форма творительного падежа). Но, как уже говорилось, для некоторых языков, в том числе русского, в uppide представлено несколько моделей, некоторые из которых лучше справляются с текстами определенных жанров. Попробуем использовать другую модель, обученную на корпусе <strong>СинТагРус</strong> (сокр. от англ. <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BD%D0%A2%D0%B0%D0%B3%D0%A0%D1%83%D1%81">Syntactically Tagged Russian text corpus</a>, «синтаксически аннотированный корпус русских текстов»)<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a>.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="токенизация-и-лемматизация.html#cb589-1" tabindex="-1"></a><span class="co">#  скачиваем модель в рабочую директорию</span></span>
<span id="cb589-2"><a href="токенизация-и-лемматизация.html#cb589-2" tabindex="-1"></a><span class="co"># udpipe_download_model(language = &quot;russian-syntagrus&quot;)</span></span>
<span id="cb589-3"><a href="токенизация-и-лемматизация.html#cb589-3" tabindex="-1"></a></span>
<span id="cb589-4"><a href="токенизация-и-лемматизация.html#cb589-4" tabindex="-1"></a><span class="co"># загружаем модель</span></span>
<span id="cb589-5"><a href="токенизация-и-лемматизация.html#cb589-5" tabindex="-1"></a>russian_syntagrus <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(<span class="at">file =</span> <span class="st">&quot;russian-syntagrus-ud-2.5-191206.udpipe&quot;</span>)</span>
<span id="cb589-6"><a href="токенизация-и-лемматизация.html#cb589-6" tabindex="-1"></a></span>
<span id="cb589-7"><a href="токенизация-и-лемматизация.html#cb589-7" tabindex="-1"></a>liza_ann <span class="ot">&lt;-</span> <span class="fu">udpipe_annotate</span>(russian_syntagrus, liza)</span></code></pre></div>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="токенизация-и-лемматизация.html#cb590-1" tabindex="-1"></a>liza_df <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(liza_ann) <span class="sc">%&gt;%</span> </span>
<span id="cb590-2"><a href="токенизация-и-лемматизация.html#cb590-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>paragraph_id, <span class="sc">-</span>sentence, <span class="sc">-</span>xpos)</span>
<span id="cb590-3"><a href="токенизация-и-лемматизация.html#cb590-3" tabindex="-1"></a></span>
<span id="cb590-4"><a href="токенизация-и-лемматизация.html#cb590-4" tabindex="-1"></a>liza_df <span class="sc">%&gt;%</span> </span>
<span id="cb590-5"><a href="токенизация-и-лемматизация.html#cb590-5" tabindex="-1"></a>  <span class="fu">filter</span>(doc_id <span class="sc">==</span> <span class="st">&quot;doc1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb590-6"><a href="токенизация-и-лемматизация.html#cb590-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sentence_id, <span class="sc">-</span>head_token_id, <span class="sc">-</span>deps, <span class="sc">-</span>dep_rel, <span class="sc">-</span>misc) <span class="sc">%&gt;%</span> </span>
<span id="cb590-7"><a href="токенизация-и-лемматизация.html#cb590-7" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7906cb0ca5b9a9a87a8c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7906cb0ca5b9a9a87a8c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191"],["doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1","doc1"],["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47"],["Может","быть",",","никто","из","живущих","в","Москве","не","знает","так","хорошо","окрестностей","города","сего",",","как","я",",","потому","что","никто","чаще","моего","не","бывает","в","поле",",","никто","более","моего","не","бродит","пешком",",","без","плана",",","без","цели","-","-","куда","глаза","глядят","-","-","по","лугам","и","рощам",",","по","холмам","и","равнинам",".","Всякое","лето","нахожу","новые","приятные","места","или","в","старых","новые","красоты",".","Но","всего","приятнее","для","меня","то","место",",","на","котором","возвышаются","мрачные",",","готические","башни","Си...нова","монастыря",".","Стоя","на","сей","горе",",","видишь","на","правой","стороне","почти","всю","Москву",",","сию","ужасную","громаду","домов","и","церквей",",","которая","представляется","глазам","в","образе","величественного","амфитеатра",":","великолепная","картина",",","особливо","когда","светит","на","нее","солнце",",","когда","вечерние","лучи","его","пылают","на","бесчисленных","златых","куполах",",","на","бесчисленных","крестах",",","к","небу","возносящихся","!","Внизу","расстилаются","тучные",",","густо","-","зеленые","цветущие","луга",",","а","за","ними",",","по","желтым","пескам",",","течет","светлая","река",",","волнуемая","легкими","веслами","рыбачьих","лодок","или","шумящая","под","рулем","грузных","стругов",",","которые","плывут","от","плодоноснейших","стран","Российской","империи","и","наделяют","алчную","Москву","хлебом","."],["мочь","быть",",","никто","из","жить","в","Москва","не","знать","так","хорошо","окрестность","город","сей",",","как","я",",","потому","что","никто","часто","мой","не","бывать","в","поле",",","никто","более","мой","не","бродить","пешком",",","без","план",",","без","цель","-","-","куда","глаз","глядеть","-","-","по","луг","и","роща",",","по","холм","и","равнина",".","всякий","лето","находить","новый","приятный","место","или","в","старый","новый","красота",".","но","все","приятный","для","я","то","место",",","на","который","возвышаться","мрачный",",","готический","башня","Си...нов","монастырь",".","стоять","на","сей","горе",",","видеть","на","правый","сторона","почти","весь","Москва",",","сей","ужасный","громада","дом","и","церковь",",","который","представляться","глаз","в","образ","величественный","амфитеатр",":","великолепный","картина",",","особливо","когда","светить","на","она","солнце",",","когда","вечерний","луч","он","пылать","на","бесчисленный","златый","купол",",","на","бесчисленный","крест",",","к","небо","возноситься","!","внизу","расстилать","тучный",",","густой","-","зеленый","цветущий","луг",",","а","за","они",",","по","желтый","песок",",","течь","светлый","река",",","волновать","легкий","весло","рыбачий","лодка","или","шуметь","под","руль","грузный","струг",",","который","плыть","от","плодоносный","страна","российский","империя","и","наделять","алчный","Москва","хлеб","."],["VERB","VERB","PUNCT","PRON","ADP","VERB","ADP","PROPN","PART","VERB","ADV","ADV","NOUN","NOUN","ADV","PUNCT","SCONJ","PRON","PUNCT","ADV","SCONJ","PRON","ADV","DET","PART","VERB","ADP","NOUN","PUNCT","PRON","ADV","DET","PART","VERB","ADV","PUNCT","ADP","NOUN","PUNCT","ADP","NOUN","PUNCT","PUNCT","ADV","NOUN","VERB","PUNCT","PUNCT","ADP","NOUN","CCONJ","NOUN","PUNCT","ADP","NOUN","CCONJ","NOUN","PUNCT","ADJ","NOUN","VERB","ADJ","ADJ","NOUN","CCONJ","ADP","ADJ","ADJ","NOUN","PUNCT","CCONJ","PART","ADJ","ADP","PRON","DET","NOUN","PUNCT","ADP","PRON","VERB","ADJ","PUNCT","ADJ","NOUN","PROPN","NOUN","PUNCT","VERB","ADP","DET","NOUN","PUNCT","VERB","ADP","ADJ","NOUN","ADV","DET","PROPN","PUNCT","DET","ADJ","NOUN","NOUN","CCONJ","NOUN","PUNCT","PRON","VERB","NOUN","ADP","NOUN","ADJ","NOUN","PUNCT","ADJ","NOUN","PUNCT","ADV","SCONJ","VERB","ADP","PRON","NOUN","PUNCT","SCONJ","ADJ","NOUN","PRON","VERB","ADP","ADJ","ADJ","NOUN","PUNCT","ADP","ADJ","NOUN","PUNCT","ADP","NOUN","VERB","PUNCT","ADV","VERB","ADJ","PUNCT","ADJ","PUNCT","ADJ","ADJ","NOUN","PUNCT","CCONJ","ADP","PRON","PUNCT","ADP","ADJ","NOUN","PUNCT","VERB","ADJ","NOUN","PUNCT","VERB","ADJ","NOUN","ADJ","NOUN","CCONJ","VERB","ADP","NOUN","ADJ","NOUN","PUNCT","PRON","VERB","ADP","ADJ","NOUN","ADJ","NOUN","CCONJ","VERB","ADJ","PROPN","NOUN","PUNCT"],["Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Aspect=Imp|VerbForm=Inf|Voice=Act",null,"Case=Nom",null,"Aspect=Imp|Case=Gen|Number=Plur|Tense=Pres|VerbForm=Part|Voice=Act",null,"Animacy=Inan|Case=Loc|Gender=Fem|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Degree=Pos","Degree=Pos","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing","Degree=Pos",null,null,"Case=Nom|Number=Sing|Person=1",null,"Degree=Pos",null,"Case=Nom","Degree=Cmp","Case=Gen|Gender=Neut|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Animacy=Inan|Case=Acc|Gender=Neut|Number=Sing",null,"Case=Nom","Degree=Cmp","Case=Gen|Gender=Neut|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Degree=Pos",null,null,"Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,null,"Animacy=Inan|Case=Gen|Gender=Fem|Number=Sing",null,null,"Degree=Pos","Animacy=Inan|Case=Nom|Gender=Masc|Number=Plur","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,null,null,"Animacy=Inan|Case=Dat|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Dat|Gender=Fem|Number=Plur",null,null,"Animacy=Inan|Case=Dat|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Dat|Gender=Fem|Number=Plur",null,"Case=Nom|Degree=Pos|Gender=Neut|Number=Sing","Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing","Aspect=Imp|Mood=Ind|Number=Sing|Person=1|Tense=Pres|VerbForm=Fin|Voice=Act","Animacy=Inan|Case=Acc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Acc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Acc|Gender=Neut|Number=Plur",null,null,"Case=Loc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Acc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Acc|Gender=Fem|Number=Plur",null,null,null,"Degree=Cmp",null,"Case=Gen|Number=Sing|Person=1","Case=Nom|Gender=Neut|Number=Sing","Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing",null,null,"Case=Loc","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Case=Nom|Degree=Pos|Number=Plur",null,"Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Fem|Number=Plur",null,"Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,"Aspect=Imp|Tense=Pres|VerbForm=Conv|Voice=Act",null,"Case=Acc|Gender=Masc|Number=Sing","Animacy=Inan|Case=Acc|Gender=Neut|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=2|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Loc|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Loc|Gender=Fem|Number=Sing","Degree=Pos","Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing",null,"Case=Acc|Gender=Fem|Number=Sing","Case=Acc|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Gen|Gender=Masc|Number=Plur",null,"Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur",null,"Case=Nom","Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Animacy=Anim|Case=Nom|Gender=Masc|Number=Sing",null,"Animacy=Inan|Case=Loc|Gender=Masc|Number=Sing","Case=Gen|Degree=Pos|Gender=Masc|Number=Sing","Animacy=Inan|Case=Gen|Gender=Masc|Number=Sing",null,"Case=Nom|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,"Degree=Pos",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Acc|Gender=Fem|Number=Sing|Person=3","Animacy=Inan|Case=Nom|Gender=Neut|Number=Sing",null,null,"Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Masc|Number=Plur","Case=Acc|Gender=Masc|Number=Sing|Person=3","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Loc|Degree=Pos|Number=Plur","Case=Loc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Loc|Gender=Fem|Number=Plur",null,null,"Case=Loc|Degree=Pos|Number=Plur","Animacy=Inan|Case=Loc|Gender=Masc|Number=Plur",null,null,"Animacy=Inan|Case=Dat|Gender=Neut|Number=Sing","Aspect=Imp|Case=Gen|Number=Plur|Tense=Pres|VerbForm=Part|Voice=Mid",null,"Degree=Pos","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Mid","Case=Nom|Degree=Pos|Number=Plur",null,"Degree=Pos",null,"Case=Nom|Degree=Pos|Number=Plur","Case=Nom|Degree=Pos|Number=Plur","Animacy=Inan|Case=Nom|Gender=Masc|Number=Plur",null,null,null,"Case=Ins|Number=Plur|Person=3",null,null,"Case=Dat|Degree=Pos|Number=Plur","Animacy=Inan|Case=Dat|Gender=Fem|Number=Plur",null,"Aspect=Imp|Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Case=Nom|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Nom|Gender=Fem|Number=Sing",null,"Aspect=Imp|Case=Nom|Gender=Fem|Number=Sing|Tense=Pres|VerbForm=Part|Voice=Pass","Case=Ins|Degree=Pos|Number=Plur","Animacy=Inan|Case=Ins|Gender=Masc|Number=Plur","Case=Gen|Degree=Pos|Number=Plur","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur",null,"Aspect=Imp|Case=Nom|Gender=Fem|Number=Sing|Tense=Pres|VerbForm=Part|Voice=Act",null,"Animacy=Inan|Case=Ins|Gender=Masc|Number=Sing","Case=Gen|Degree=Pos|Number=Plur","Animacy=Inan|Case=Gen|Gender=Masc|Number=Plur",null,"Case=Nom","Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act",null,"Case=Gen|Degree=Sup|Number=Plur","Animacy=Inan|Case=Gen|Gender=Fem|Number=Plur","Case=Gen|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Gen|Gender=Fem|Number=Sing",null,"Aspect=Imp|Mood=Ind|Number=Plur|Person=3|Tense=Pres|VerbForm=Fin|Voice=Act","Case=Acc|Degree=Pos|Gender=Fem|Number=Sing","Animacy=Inan|Case=Acc|Gender=Fem|Number=Sing","Animacy=Inan|Case=Ins|Gender=Masc|Number=Sing",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>doc_id<\/th>\n      <th>token_id<\/th>\n      <th>token<\/th>\n      <th>lemma<\/th>\n      <th>upos<\/th>\n      <th>feats<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Здесь “пешком” корректно обозначено как наречие; в целом, кажется, вторая модель лучше справилась с задачей.</p>
</div>
<div id="морфологическая-разметка" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Морфологическая разметка<a href="токенизация-и-лемматизация.html#морфологическая-разметка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Морфологическая разметка, которую мы получили, дает возможность выбирать и группировать различные части речи. Например, имена и названия: в первом параграфе, который мы проанализировали, их всего 4, причем правильно опознано в качестве собственного имени название Симонова монастыря.</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="токенизация-и-лемматизация.html#cb591-1" tabindex="-1"></a>propn <span class="ot">&lt;-</span> liza_df <span class="sc">%&gt;%</span> </span>
<span id="cb591-2"><a href="токенизация-и-лемматизация.html#cb591-2" tabindex="-1"></a>  <span class="fu">filter</span>(upos <span class="sc">==</span> <span class="st">&quot;PROPN&quot;</span>) </span>
<span id="cb591-3"><a href="токенизация-и-лемматизация.html#cb591-3" tabindex="-1"></a></span>
<span id="cb591-4"><a href="токенизация-и-лемматизация.html#cb591-4" tabindex="-1"></a>propn[,<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## # A tibble: 164 × 5
##    sentence_id token_id token       lemma       upos 
##          &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;
##  1           1 8        Москве      Москва      PROPN
##  2           3 16       Си...нова   Си...нов    PROPN
##  3           4 12       Москву      Москва      PROPN
##  4           5 45       Москву      Москва      PROPN
##  5           2 11       Данилов     Данилов     PROPN
##  6           2 23       Воробьевы   Воробьев    PROPN
##  7           3 21       Коломенское Коломенский PROPN
##  8           9 32       Москва      Москва      PROPN
##  9           1 14       Лизы        Лиза        PROPN
## 10           2 13       Лиза        Лиза        PROPN
## # ℹ 154 more rows</code></pre>
<p>С помощью функции <code>str_detect()</code> можно выбрать конкретные формы, например, винительный падеж.</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="токенизация-и-лемматизация.html#cb593-1" tabindex="-1"></a>liza_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(feats, <span class="st">&quot;Case=Acc&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 558 × 11
##    doc_id sentence_id token_id token    lemma  upos  feats head_token_id dep_rel
##    &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;  
##  1 doc1             1 28       поле     поле   NOUN  Anim… 26            obl    
##  2 doc1             2 4        новые    новый  ADJ   Anim… 6             amod   
##  3 doc1             2 5        приятные прият… ADJ   Anim… 6             amod   
##  4 doc1             2 6        места    место  NOUN  Anim… 3             obj    
##  5 doc1             2 10       новые    новый  ADJ   Anim… 11            amod   
##  6 doc1             2 11       красоты  красо… NOUN  Anim… 6             conj   
##  7 doc1             4 3        сей      сей    DET   Case… 4             det    
##  8 doc1             4 4        горе     горе   NOUN  Anim… 1             obl    
##  9 doc1             4 11       всю      весь   DET   Case… 12            det    
## 10 doc1             4 12       Москву   Москва PROPN Anim… 9             nmod   
## # ℹ 548 more rows
## # ℹ 2 more variables: deps &lt;chr&gt;, misc &lt;chr&gt;</code></pre>
</div>
<div id="распределение-частей-речи" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Распределение частей речи<a href="токенизация-и-лемматизация.html#распределение-частей-речи" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Литературоведам может быть интересно распределение различных частей речи в повести: так, Бен Блатт задался целью проверить, применительно к англоязычной прозе, знаменитый афоризм Стивена Кинга о том, что «дорога в ад вымощена наречиями». Правда ли, что великие писатели реже используют наречия на -ly? Он получил достаточно любопытные результаты, в частности выяснилось, что Генри Мелвилл и Джейн Остин представляют собой скорее исключение из этого правила, но с двумя важными оговорками: во-первых, в 19 в. наречия в целом используют чаще, чем 20-м; а во-вторых, в признанных шедеврах отдельных авторов наречий, действительно, бывает меньше. Например, в романе Стейнбека «Зима тревоги нашей» их меньше всего. Больше всего наречий у авторов фанфиков, непрофессиональных писателей.</p>
<p>Посчитать части речи (расшифровка тегов UPOS по <a href="https://universaldependencies.org/u/pos/">ссылке</a>) можно так:</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="токенизация-и-лемматизация.html#cb595-1" tabindex="-1"></a>liza_df <span class="sc">%&gt;%</span> </span>
<span id="cb595-2"><a href="токенизация-и-лемматизация.html#cb595-2" tabindex="-1"></a>  <span class="fu">group_by</span>(upos) <span class="sc">%&gt;%</span> </span>
<span id="cb595-3"><a href="токенизация-и-лемматизация.html#cb595-3" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb595-4"><a href="токенизация-и-лемматизация.html#cb595-4" tabindex="-1"></a>  <span class="fu">filter</span>(upos <span class="sc">!=</span> <span class="st">&quot;PUNCT&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb595-5"><a href="токенизация-и-лемматизация.html#cb595-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span></code></pre></div>
<pre><code>## # A tibble: 14 × 2
## # Groups:   upos [14]
##    upos      n
##    &lt;chr&gt; &lt;int&gt;
##  1 NOUN   1063
##  2 VERB    988
##  3 PRON    619
##  4 ADP     520
##  5 ADJ     408
##  6 ADV     321
##  7 DET     272
##  8 CCONJ   230
##  9 PART    187
## 10 PROPN   164
## 11 SCONJ   142
## 12 AUX      71
## 13 NUM      34
## 14 INTJ     30</code></pre>
<p>Столбиковая диаграмма позволяет наглядно представить такого рода данные:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="токенизация-и-лемматизация.html#cb597-1" tabindex="-1"></a>liza_df <span class="sc">%&gt;%</span> </span>
<span id="cb597-2"><a href="токенизация-и-лемматизация.html#cb597-2" tabindex="-1"></a>  <span class="fu">group_by</span>(upos) <span class="sc">%&gt;%</span> </span>
<span id="cb597-3"><a href="токенизация-и-лемматизация.html#cb597-3" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb597-4"><a href="токенизация-и-лемматизация.html#cb597-4" tabindex="-1"></a>  <span class="fu">filter</span>(upos <span class="sc">!=</span> <span class="st">&quot;PUNCT&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb597-5"><a href="токенизация-и-лемматизация.html#cb597-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(upos, n), <span class="at">y =</span> n, <span class="at">fill =</span> upos)) <span class="sc">+</span></span>
<span id="cb597-6"><a href="токенизация-и-лемматизация.html#cb597-6" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb597-7"><a href="токенизация-и-лемматизация.html#cb597-7" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb597-8"><a href="токенизация-и-лемматизация.html#cb597-8" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-256-1.png" width="672" /></p>
<p>Обратите внимание на некоторое заметное число междометий. Какое междометие встречается здесь чаще всего, можно догадаться 😊</p>
<p>Можно отобрать наиболее частотные слова для любой части речи.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="токенизация-и-лемматизация.html#cb598-1" tabindex="-1"></a>nouns <span class="ot">&lt;-</span> liza_df <span class="sc">%&gt;%</span></span>
<span id="cb598-2"><a href="токенизация-и-лемматизация.html#cb598-2" tabindex="-1"></a>  <span class="fu">filter</span>(upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NOUN&quot;</span>, <span class="st">&quot;PROPN&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb598-3"><a href="токенизация-и-лемматизация.html#cb598-3" tabindex="-1"></a>  <span class="fu">count</span>(lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb598-4"><a href="токенизация-и-лемматизация.html#cb598-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span>
<span id="cb598-5"><a href="токенизация-и-лемматизация.html#cb598-5" tabindex="-1"></a></span>
<span id="cb598-6"><a href="токенизация-и-лемматизация.html#cb598-6" tabindex="-1"></a><span class="fu">head</span>(nouns, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##    lemma       n
##    &lt;chr&gt;   &lt;int&gt;
##  1 Лиза      107
##  2 Эраст      41
##  3 сердце     24
##  4 глаз       23
##  5 мать       21
##  6 человек    18
##  7 день       17
##  8 рука       17
##  9 друг       16
## 10 слеза      15</code></pre>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="токенизация-и-лемматизация.html#cb600-1" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span></code></pre></div>
<pre><code>## Loading required package: RColorBrewer</code></pre>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="токенизация-и-лемматизация.html#cb602-1" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb602-2"><a href="токенизация-и-лемматизация.html#cb602-2" tabindex="-1"></a></span>
<span id="cb602-3"><a href="токенизация-и-лемматизация.html#cb602-3" tabindex="-1"></a>pal <span class="ot">&lt;-</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb602-4"><a href="токенизация-и-лемматизация.html#cb602-4" tabindex="-1"></a></span>
<span id="cb602-5"><a href="токенизация-и-лемматизация.html#cb602-5" tabindex="-1"></a>nouns <span class="sc">%&gt;%</span></span>
<span id="cb602-6"><a href="токенизация-и-лемматизация.html#cb602-6" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">wordcloud</span>(lemma, n, <span class="at">max.words =</span> <span class="dv">50</span>, <span class="at">colors =</span> pal))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-258-1.png" width="672" /></p>
<p>Можно заметить, что в тексте часто встречаются слова “мать”, “матушка”, “старушка” (42 раза): Лизина мать упоминается в тексте так же часто, как Эраст, и чаще, чем слово “сердце” (24). В любовной повести Карамзин чуть ли не чаще говорит о матери героини, чем о её возлюбленном!</p>
</div>
<div id="совместная-встречаемость-слов" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Совместная встречаемость слов<a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Функция <code>cooccurence()</code> из пакета <code>udpipe</code> позволяет
выяснить, сколько раз некий термин встречается совместно с другим термином, например:</p>
<ul>
<li><p>слова встречаются в одном и том же документе/предложении/параграфе;</p></li>
<li><p>слова следуют за другим словом;</p></li>
<li><p>слова находятся по соседству с другим словом на расстоянии n слов.</p></li>
</ul>
<p>Код ниже позволяет выяснить, какие слова встречаются в одном предложении:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="токенизация-и-лемматизация.html#cb603-1" tabindex="-1"></a>x <span class="ot">&lt;-</span>  <span class="fu">subset</span>(liza_df, upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NOUN&quot;</span>, <span class="st">&quot;ADJ&quot;</span>))</span>
<span id="cb603-2"><a href="токенизация-и-лемматизация.html#cb603-2" tabindex="-1"></a>cooc <span class="ot">&lt;-</span> <span class="fu">cooccurrence</span>(x, <span class="at">term =</span> <span class="st">&quot;lemma&quot;</span>, <span class="at">group =</span> <span class="fu">c</span>(<span class="st">&quot;doc_id&quot;</span>, <span class="st">&quot;sentence_id&quot;</span>))</span>
<span id="cb603-3"><a href="токенизация-и-лемматизация.html#cb603-3" tabindex="-1"></a><span class="fu">head</span>(cooc)</span></code></pre></div>
<pre><code>##       term1   term2 cooc
## 1   молодой человек    8
## 2      глаз    друг    6
## 3 последний     раз    6
## 4      глаз   слеза    6
## 5      друг     час    6
## 6      день  другой    4</code></pre>
<p>Этот результат легко визуализировать, используя пакет <code>ggraph</code>:</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="токенизация-и-лемматизация.html#cb605-1" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb605-2"><a href="токенизация-и-лемматизация.html#cb605-2" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb605-3"><a href="токенизация-и-лемматизация.html#cb605-3" tabindex="-1"></a></span>
<span id="cb605-4"><a href="токенизация-и-лемматизация.html#cb605-4" tabindex="-1"></a>wordnetwork <span class="ot">&lt;-</span> <span class="fu">head</span>(cooc, <span class="dv">30</span>)</span>
<span id="cb605-5"><a href="токенизация-и-лемматизация.html#cb605-5" tabindex="-1"></a>wordnetwork <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(wordnetwork)</span>
<span id="cb605-6"><a href="токенизация-и-лемматизация.html#cb605-6" tabindex="-1"></a><span class="fu">ggraph</span>(wordnetwork, <span class="at">layout =</span> <span class="st">&quot;fr&quot;</span>) <span class="sc">+</span></span>
<span id="cb605-7"><a href="токенизация-и-лемматизация.html#cb605-7" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">width =</span> cooc, <span class="at">edge_alpha =</span> cooc), <span class="at">edge_colour =</span> <span class="st">&quot;pink&quot;</span>) <span class="sc">+</span></span>
<span id="cb605-8"><a href="токенизация-и-лемматизация.html#cb605-8" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">col =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb605-9"><a href="токенизация-и-лемматизация.html#cb605-9" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&quot;Arial Narrow&quot;</span>) <span class="sc">+</span></span>
<span id="cb605-10"><a href="токенизация-и-лемматизация.html#cb605-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb605-11"><a href="токенизация-и-лемматизация.html#cb605-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Совместная встречаемость слов&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Существительные и прилагательные&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-260-1.png" width="672" /></p>
<p>Милый друг, глубокий пруд. Грустная история!</p>
<p>Чтобы узнать, какие слова чаще стоят рядом, используем ту же функцию, но с другими аргументами<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a>:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="токенизация-и-лемматизация.html#cb606-1" tabindex="-1"></a>cooc <span class="ot">&lt;-</span> <span class="fu">cooccurrence</span>(x<span class="sc">$</span>lemma, <span class="at">relevant =</span> x<span class="sc">$</span>upos <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NOUN&quot;</span>, <span class="st">&quot;ADJ&quot;</span>), <span class="at">skipgram =</span> <span class="dv">1</span>)</span>
<span id="cb606-2"><a href="токенизация-и-лемматизация.html#cb606-2" tabindex="-1"></a><span class="fu">head</span>(cooc)</span></code></pre></div>
<pre><code>##       term1   term2 cooc
## 1   молодой человек    8
## 2     берег    река    4
## 3      друг    друг    4
## 4 последний     раз    4
## 5      Лиза    мать    4
## 6      глаз   слеза    3</code></pre>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="токенизация-и-лемматизация.html#cb608-1" tabindex="-1"></a>wordnetwork <span class="ot">&lt;-</span> <span class="fu">head</span>(cooc, <span class="dv">30</span>)</span>
<span id="cb608-2"><a href="токенизация-и-лемматизация.html#cb608-2" tabindex="-1"></a>wordnetwork <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(wordnetwork)</span>
<span id="cb608-3"><a href="токенизация-и-лемматизация.html#cb608-3" tabindex="-1"></a></span>
<span id="cb608-4"><a href="токенизация-и-лемматизация.html#cb608-4" tabindex="-1"></a><span class="fu">ggraph</span>(wordnetwork, <span class="at">layout =</span> <span class="st">&quot;fr&quot;</span>) <span class="sc">+</span></span>
<span id="cb608-5"><a href="токенизация-и-лемматизация.html#cb608-5" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">width =</span> cooc, <span class="at">edge_colour =</span> <span class="st">&quot;salmon&quot;</span>, <span class="at">edge_alpha=</span><span class="fl">0.7</span>), <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb608-6"><a href="токенизация-и-лемматизация.html#cb608-6" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">angle=</span><span class="dv">15</span>, <span class="at">repel =</span> T) <span class="sc">+</span></span>
<span id="cb608-7"><a href="токенизация-и-лемматизация.html#cb608-7" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&quot;Arial Narrow&quot;</span>) <span class="sc">+</span></span>
<span id="cb608-8"><a href="токенизация-и-лемматизация.html#cb608-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Слова, стоящие рядом в тексте&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Существительные и прилагательные&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-261-1.png" width="672" /></p>
</div>
<div id="синтаксическая-разметка" class="section level2 hasAnchor" number="10.8">
<h2><span class="header-section-number">10.8</span> Синтаксическая разметка<a href="токенизация-и-лемматизация.html#синтаксическая-разметка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для анализа выберем одно предложение.</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="токенизация-и-лемматизация.html#cb609-1" tabindex="-1"></a>liza_synt <span class="ot">&lt;-</span> liza_ann <span class="sc">%&gt;%</span> </span>
<span id="cb609-2"><a href="токенизация-и-лемматизация.html#cb609-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() </span></code></pre></div>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="токенизация-и-лемматизация.html#cb610-1" tabindex="-1"></a>liza_synt_sel <span class="ot">&lt;-</span> liza_synt <span class="sc">%&gt;%</span> </span>
<span id="cb610-2"><a href="токенизация-и-лемматизация.html#cb610-2" tabindex="-1"></a>  <span class="fu">filter</span>(doc_id <span class="sc">==</span> <span class="st">&quot;doc17&quot;</span>, sentence_id <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb610-3"><a href="токенизация-и-лемматизация.html#cb610-3" tabindex="-1"></a>  <span class="fu">filter</span>(token <span class="sc">!=</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb610-4"><a href="токенизация-и-лемматизация.html#cb610-4" tabindex="-1"></a></span>
<span id="cb610-5"><a href="токенизация-и-лемматизация.html#cb610-5" tabindex="-1"></a>liza_synt_sel[,<span class="fu">c</span>(<span class="st">&quot;token&quot;</span>, <span class="st">&quot;token_id&quot;</span>, <span class="st">&quot;head_token_id&quot;</span>, <span class="st">&quot;dep_rel&quot;</span>)]</span></code></pre></div>
<pre><code>##        token token_id head_token_id dep_rel
## 1       Лиза        3             5   nsubj
## 2         не        4             5  advmod
## 3 договорила        5             0    root
## 4       речи        6             5     obl
## 5      своей        7             6     det
## 6          .        8             5   punct</code></pre>
<p>Связь между токенами определяется в полях token_id и head_token_id, отношение зависимости определено в dep_rel. Корневой токен имеет значение 0, то есть ни от чего не зависит. Графически изобразить связи поможет пакет <code>textplot</code>.</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="токенизация-и-лемматизация.html#cb612-1" tabindex="-1"></a><span class="fu">library</span>(textplot)</span>
<span id="cb612-2"><a href="токенизация-и-лемматизация.html#cb612-2" tabindex="-1"></a><span class="fu">textplot_dependencyparser</span>(liza_synt_sel)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-264-1.png" width="672" /></p>
<p>Построить граф можно и при помощи библиотек igraph и ggraph:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="токенизация-и-лемматизация.html#cb613-1" tabindex="-1"></a>liza_synt_sel <span class="ot">&lt;-</span> liza_synt <span class="sc">%&gt;%</span> </span>
<span id="cb613-2"><a href="токенизация-и-лемматизация.html#cb613-2" tabindex="-1"></a>  <span class="fu">filter</span>(doc_id <span class="sc">==</span> <span class="st">&quot;doc17&quot;</span>, sentence_id <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb613-3"><a href="токенизация-и-лемматизация.html#cb613-3" tabindex="-1"></a></span>
<span id="cb613-4"><a href="токенизация-и-лемматизация.html#cb613-4" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">subset</span>(liza_synt_sel, head_token_id <span class="sc">!=</span> <span class="dv">0</span>, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;token_id&quot;</span>, <span class="st">&quot;head_token_id&quot;</span>, <span class="st">&quot;dep_rel&quot;</span>))</span>
<span id="cb613-5"><a href="токенизация-и-лемматизация.html#cb613-5" tabindex="-1"></a>e</span></code></pre></div>
<pre><code>##    token_id head_token_id dep_rel
## 2         2             1     obl
## 3         3             7   punct
## 4         4             7      cc
## 5         5             6    amod
## 6         6             7   nsubj
## 7         7             1    conj
## 8         8             9  advmod
## 9         9             7   xcomp
## 10       10             1   punct</code></pre>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="токенизация-и-лемматизация.html#cb615-1" tabindex="-1"></a>e<span class="sc">$</span>label <span class="ot">&lt;-</span> e<span class="sc">$</span>dep_rel</span></code></pre></div>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="токенизация-и-лемматизация.html#cb616-1" tabindex="-1"></a>gr <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(e, <span class="at">vertices =</span> liza_synt_sel[, <span class="fu">c</span>(<span class="st">&quot;token_id&quot;</span>, <span class="st">&quot;token&quot;</span>, <span class="st">&quot;lemma&quot;</span>, <span class="st">&quot;upos&quot;</span>, <span class="st">&quot;xpos&quot;</span>, <span class="st">&quot;feats&quot;</span>)], <span class="at">directed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb616-2"><a href="токенизация-и-лемматизация.html#cb616-2" tabindex="-1"></a></span>
<span id="cb616-3"><a href="токенизация-и-лемматизация.html#cb616-3" tabindex="-1"></a>a <span class="ot">&lt;-</span> grid<span class="sc">::</span><span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(.<span class="dv">1</span>, <span class="st">&quot;inches&quot;</span>))</span>
<span id="cb616-4"><a href="токенизация-и-лемматизация.html#cb616-4" tabindex="-1"></a></span>
<span id="cb616-5"><a href="токенизация-и-лемматизация.html#cb616-5" tabindex="-1"></a><span class="fu">ggraph</span>(gr, <span class="at">layout =</span> <span class="st">&quot;fr&quot;</span>) <span class="sc">+</span> </span>
<span id="cb616-6"><a href="токенизация-и-лемматизация.html#cb616-6" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">edge_alpha=</span><span class="fl">0.7</span>, <span class="at">label =</span> dep_rel), </span>
<span id="cb616-7"><a href="токенизация-и-лемматизация.html#cb616-7" tabindex="-1"></a>                 <span class="at">arrow =</span> a, </span>
<span id="cb616-8"><a href="токенизация-и-лемматизация.html#cb616-8" tabindex="-1"></a>                 <span class="at">end_cap =</span> <span class="fu">circle</span>(<span class="fl">0.07</span>, <span class="st">&#39;inches&#39;</span>), </span>
<span id="cb616-9"><a href="токенизация-и-лемматизация.html#cb616-9" tabindex="-1"></a>                 <span class="at">show.legend =</span> F,</span>
<span id="cb616-10"><a href="токенизация-и-лемматизация.html#cb616-10" tabindex="-1"></a>                 <span class="at">label_colour =</span> <span class="st">&quot;grey30&quot;</span>,</span>
<span id="cb616-11"><a href="токенизация-и-лемматизация.html#cb616-11" tabindex="-1"></a>                 <span class="at">edge_color =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span> </span>
<span id="cb616-12"><a href="токенизация-и-лемматизация.html#cb616-12" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="at">color =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb616-13"><a href="токенизация-и-лемматизация.html#cb616-13" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-14"><a href="токенизация-и-лемматизация.html#cb616-14" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">label =</span> token), <span class="at">nudge_y =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-266-1.png" width="672" /></p>

</div>
</div>
<h3>Литература<a href="литература.html#литература" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-jockers2014" class="csl-entry">
Jockers, Matthew L. 2014. <em>Text Analysis with r for Students of Literature</em>. Springer.
</div>
<div id="ref-textmining2017" class="csl-entry">
Silge, Julia, and David Robinson. 2017. <em>Text Mining with r</em>. O’Reilly. <a href="http://www.tidytextmining.com">http://www.tidytextmining.com</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="36">
<li id="fn36"><p><a href="https://smltar.com/tokenization.html#what-is-a-token" class="uri">https://smltar.com/tokenization.html#what-is-a-token</a><a href="токенизация-и-лемматизация.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p><a href="https://smltar.com/tokenization.html#tokenizingngrams" class="uri">https://smltar.com/tokenization.html#tokenizingngrams</a><a href="токенизация-и-лемматизация.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p><a href="https://universaldependencies.org/treebanks/ru_gsd/index.html" class="uri">https://universaldependencies.org/treebanks/ru_gsd/index.html</a><a href="токенизация-и-лемматизация.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p><a href="https://universaldependencies.org/treebanks/ru_syntagrus/index.html" class="uri">https://universaldependencies.org/treebanks/ru_syntagrus/index.html</a><a href="токенизация-и-лемматизация.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p><a href="https://cran.r-project.org/web/packages/udpipe/vignettes/udpipe-usecase-postagging-lemmatisation.html" class="uri">https://cran.r-project.org/web/packages/udpipe/vignettes/udpipe-usecase-postagging-lemmatisation.html</a><a href="токенизация-и-лемматизация.html#fnref40" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="веб-скрапинг.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="распределения-слов-и-анализ-частотностей.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/09-tokenize.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
