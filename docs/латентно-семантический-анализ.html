<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 14 Латентно-семантический анализ | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 14 Латентно-семантический анализ | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 14 Латентно-семантический анализ | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-10-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="тематическое-моделирование.html"/>
<link rel="next" href="кластеризация-и-метод-главных-компонент.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.29/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-чем-этот-курс"><i class="fa fa-check"></i><b>2.1</b> О чем этот курс</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.2</b> Что такое R?</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.3</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.5</b> RStudio</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.6</b> Установка</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.7</b> Начало работы</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.8</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.9</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.10</b> Векторы</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#отсутствующие-значения"><i class="fa fa-check"></i><b>2.11</b> Отсутствующие значения</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#практическое-задание"><i class="fa fa-check"></i><b>2.15</b> Практическое задание</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#работа-с-цветом"><i class="fa fa-check"></i><b>3.4</b> Работа с цветом</a></li>
<li class="chapter" data-level="3.5" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.5</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-семейство-_apply"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: семейство <code>_apply</code></a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#map"><i class="fa fa-check"></i><b>5.7.1</b> <code>map()</code></a></li>
<li class="chapter" data-level="5.7.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#map2"><i class="fa fa-check"></i><b>5.7.2</b> <code>map2()</code></a></li>
<li class="chapter" data-level="5.7.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#дополнительные-возможности-purrr"><i class="fa fa-check"></i><b>5.7.3</b> Дополнительные возможности purrr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#скачивание-файлов-из-интернета"><i class="fa fa-check"></i><b>6.2</b> Скачивание файлов из Интернета</a></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-табличных-данных"><i class="fa fa-check"></i><b>6.3</b> Чтение табличных данных</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.3.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.3.2</b> xls и xlsx</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-текстовых-данных"><i class="fa fa-check"></i><b>6.4</b> Чтение текстовых данных</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.4.1</b> txt</a></li>
<li class="chapter" data-level="6.4.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.4.2</b> doc</a></li>
<li class="chapter" data-level="6.4.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.4.3</b> pdf</a></li>
<li class="chapter" data-level="6.4.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#png"><i class="fa fa-check"></i><b>6.4.4</b> png</a></li>
<li class="chapter" data-level="6.4.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.4.5</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#структурированные-данные"><i class="fa fa-check"></i><b>6.5</b> Структурированные данные</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5.1</b> json</a></li>
<li class="chapter" data-level="6.5.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml"><i class="fa fa-check"></i><b>6.5.2</b> xml</a></li>
<li class="chapter" data-level="6.5.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#html"><i class="fa fa-check"></i><b>6.5.3</b> html</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html"><i class="fa fa-check"></i><b>9</b> Веб-скрапинг</a>
<ul>
<li class="chapter" data-level="9.1" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#структура-html"><i class="fa fa-check"></i><b>9.1</b> Структура html</a></li>
<li class="chapter" data-level="9.2" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#каскадные-таблицы-стилей"><i class="fa fa-check"></i><b>9.2</b> Каскадные таблицы стилей</a></li>
<li class="chapter" data-level="9.3" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-данных"><i class="fa fa-check"></i><b>9.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="9.4" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-в-тиббл"><i class="fa fa-check"></i><b>9.4</b> Извлечение в тиббл</a></li>
<li class="chapter" data-level="9.5" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#скрапим-телеграм-канал"><i class="fa fa-check"></i><b>9.5</b> Скрапим телеграм-канал</a></li>
<li class="chapter" data-level="9.6" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#эмотиконы"><i class="fa fa-check"></i><b>9.6</b> Эмотиконы</a></li>
<li class="chapter" data-level="9.7" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#рутинная-уборка"><i class="fa fa-check"></i><b>9.7</b> Рутинная уборка</a></li>
<li class="chapter" data-level="9.8" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#лемматизация"><i class="fa fa-check"></i><b>9.8</b> Лемматизация</a></li>
<li class="chapter" data-level="9.9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#html-таблицы"><i class="fa fa-check"></i><b>9.9</b> Html таблицы</a></li>
<li class="chapter" data-level="9.10" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#wikisource"><i class="fa fa-check"></i><b>9.10</b> Wikisource</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>10</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="10.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>10.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="10.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>10.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="10.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>10.3</b> Скипграмы</a></li>
<li class="chapter" data-level="10.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>10.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="10.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>10.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="10.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>10.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="10.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>10.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="10.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>10.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html"><i class="fa fa-check"></i><b>11</b> Распределения слов и анализ частотностей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#извлечение-источников"><i class="fa fa-check"></i><b>11.1</b> Извлечение источников</a></li>
<li class="chapter" data-level="11.2" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#подготовка-источников"><i class="fa fa-check"></i><b>11.2</b> Подготовка источников</a></li>
<li class="chapter" data-level="11.3" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#токенизация"><i class="fa fa-check"></i><b>11.3</b> Токенизация</a></li>
<li class="chapter" data-level="11.4" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#cтоп-слова"><i class="fa fa-check"></i><b>11.4</b> Cтоп-слова</a></li>
<li class="chapter" data-level="11.5" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#абсолютная-частотность"><i class="fa fa-check"></i><b>11.5</b> Абсолютная частотность</a></li>
<li class="chapter" data-level="11.6" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#стемминг"><i class="fa fa-check"></i><b>11.6</b> Стемминг</a></li>
<li class="chapter" data-level="11.7" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#относительная-частотность"><i class="fa fa-check"></i><b>11.7</b> Относительная частотность</a></li>
<li class="chapter" data-level="11.8" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#распределения-слов-токенов"><i class="fa fa-check"></i><b>11.8</b> Распределения слов (токенов)</a></li>
<li class="chapter" data-level="11.9" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#закон-ципфа"><i class="fa fa-check"></i><b>11.9</b> Закон Ципфа</a></li>
<li class="chapter" data-level="11.10" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#ttr-type-token-ratio"><i class="fa fa-check"></i><b>11.10</b> TTR (type-token ratio)</a></li>
<li class="chapter" data-level="11.11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#tf-idf"><i class="fa fa-check"></i><b>11.11</b> TF-IDF</a></li>
<li class="chapter" data-level="11.12" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#сравнение-при-помощи-диаграммы-рассеяния"><i class="fa fa-check"></i><b>11.12</b> Сравнение при помощи диаграммы рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>12</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="12.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>12.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="12.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>12.2</b> Подходы</a></li>
<li class="chapter" data-level="12.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>12.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="12.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>12.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>12.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="12.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>12.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="12.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>12.4.3</b> AFINN</a></li>
<li class="chapter" data-level="12.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>12.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>12.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="12.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подготовка-текста"><i class="fa fa-check"></i><b>12.6</b> Подготовка текста</a></li>
<li class="chapter" data-level="12.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#модификация-лексикона"><i class="fa fa-check"></i><b>12.7</b> Модификация лексикона</a></li>
<li class="chapter" data-level="12.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#соединение-лексикона-и-текста"><i class="fa fa-check"></i><b>12.8</b> Соединение лексикона и текста</a></li>
<li class="chapter" data-level="12.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-на-оси-времени"><i class="fa fa-check"></i><b>12.9</b> Тональность на оси времени</a></li>
<li class="chapter" data-level="12.10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#для-других-языков"><i class="fa fa-check"></i><b>12.10</b> Для других языков</a></li>
<li class="chapter" data-level="12.11" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#виды-эмоций"><i class="fa fa-check"></i><b>12.11</b> Виды эмоций</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html"><i class="fa fa-check"></i><b>13</b> Тематическое моделирование</a>
<ul>
<li class="chapter" data-level="13.1" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#что-такое-lda"><i class="fa fa-check"></i><b>13.1</b> Что такое LDA</a></li>
<li class="chapter" data-level="13.2" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределение-дирихле"><i class="fa fa-check"></i><b>13.2</b> Распределение Дирихле</a></li>
<li class="chapter" data-level="13.3" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#подтоговка-данных"><i class="fa fa-check"></i><b>13.3</b> Подтоговка данных</a></li>
<li class="chapter" data-level="13.4" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#матрица-встречаемости"><i class="fa fa-check"></i><b>13.4</b> Матрица встречаемости</a></li>
<li class="chapter" data-level="13.5" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#число-тем"><i class="fa fa-check"></i><b>13.5</b> Число тем</a></li>
<li class="chapter" data-level="13.6" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#модель-lda"><i class="fa fa-check"></i><b>13.6</b> Модель LDA</a></li>
<li class="chapter" data-level="13.7" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#слова-и-темы"><i class="fa fa-check"></i><b>13.7</b> Слова и темы</a></li>
<li class="chapter" data-level="13.8" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#сравнение-топиков"><i class="fa fa-check"></i><b>13.8</b> Сравнение топиков</a></li>
<li class="chapter" data-level="13.9" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#темы-и-документы"><i class="fa fa-check"></i><b>13.9</b> Темы и документы</a></li>
<li class="chapter" data-level="13.10" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределения-вероятности-для-топиков"><i class="fa fa-check"></i><b>13.10</b> Распределения вероятности для топиков</a></li>
<li class="chapter" data-level="13.11" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#интерактивные-визуализации"><i class="fa fa-check"></i><b>13.11</b> Интерактивные визуализации</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html"><i class="fa fa-check"></i><b>14</b> Латентно-семантический анализ</a>
<ul>
<li class="chapter" data-level="14.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#что-это-такое"><i class="fa fa-check"></i><b>14.1</b> Что это такое</a></li>
<li class="chapter" data-level="14.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторное-представление-слов"><i class="fa fa-check"></i><b>14.2</b> Векторное представление слов</a></li>
<li class="chapter" data-level="14.3" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#сингулярное-разложение-матрицы"><i class="fa fa-check"></i><b>14.3</b> Сингулярное разложение матрицы</a></li>
<li class="chapter" data-level="14.4" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#простой-пример"><i class="fa fa-check"></i><b>14.4</b> Простой пример</a></li>
<li class="chapter" data-level="14.5" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторы-слов"><i class="fa fa-check"></i><b>14.5</b> Векторы слов</a></li>
<li class="chapter" data-level="14.6" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#пакеты-для-работы-с-lsa"><i class="fa fa-check"></i><b>14.6</b> Пакеты для работы с LSA</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa"><i class="fa fa-check"></i><b>14.6.1</b> lsa</a></li>
<li class="chapter" data-level="14.6.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#textminer"><i class="fa fa-check"></i><b>14.6.2</b> TextmineR</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa-c-использованием-tidy-data"><i class="fa fa-check"></i><b>14.7</b> LSA c использованием Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html"><i class="fa fa-check"></i><b>15</b> Кластеризация и метод главных компонент</a>
<ul>
<li class="chapter" data-level="15.1" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#виды-кластерного-анализа"><i class="fa fa-check"></i><b>15.1</b> Виды кластерного анализа</a></li>
<li class="chapter" data-level="15.2" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#кластеризация-по-методу-k-средних"><i class="fa fa-check"></i><b>15.2</b> Кластеризация по методу K средних</a></li>
<li class="chapter" data-level="15.3" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-в-r"><i class="fa fa-check"></i><b>15.3</b> K-means в R</a></li>
<li class="chapter" data-level="15.4" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-для-кластеризации-текстов"><i class="fa fa-check"></i><b>15.4</b> K-means для кластеризации текстов</a></li>
<li class="chapter" data-level="15.5" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#нормализация-данных"><i class="fa fa-check"></i><b>15.5</b> Нормализация данных</a></li>
<li class="chapter" data-level="15.6" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.6</b> Иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.7" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#алгоритм-иерархической-кластеризации"><i class="fa fa-check"></i><b>15.7</b> Алгоритм иерархической кластеризации</a></li>
<li class="chapter" data-level="15.8" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-в-r"><i class="fa fa-check"></i><b>15.8</b> Иерархическая кластеризация в R</a></li>
<li class="chapter" data-level="15.9" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-текстов"><i class="fa fa-check"></i><b>15.9</b> Иерархическая кластеризация текстов</a></li>
<li class="chapter" data-level="15.10" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#метод-главных-компонент"><i class="fa fa-check"></i><b>15.10</b> Метод главных компонент</a></li>
<li class="chapter" data-level="15.11" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-для-визуализации-кластеров-k-means"><i class="fa fa-check"></i><b>15.11</b> PCA для визуализации кластеров K-means</a></li>
<li class="chapter" data-level="15.12" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-и-иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.12</b> PCA и иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.13" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#многомерное-шкалирование"><i class="fa fa-check"></i><b>15.13</b> Многомерное шкалирование</a></li>
<li class="chapter" data-level="15.14" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-с-factominer"><i class="fa fa-check"></i><b>15.14</b> PCA с FactoMineR</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html"><i class="fa fa-check"></i><b>16</b> Сетевые данные и графы</a>
<ul>
<li class="chapter" data-level="16.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#базовое-описание"><i class="fa fa-check"></i><b>16.1</b> Базовое описание</a></li>
<li class="chapter" data-level="16.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#создание-сетевых-данных"><i class="fa fa-check"></i><b>16.2</b> Создание сетевых данных</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#социоматрица"><i class="fa fa-check"></i><b>16.2.1</b> Социоматрица</a></li>
<li class="chapter" data-level="16.2.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#список-ребер"><i class="fa fa-check"></i><b>16.2.2</b> Список ребер</a></li>
<li class="chapter" data-level="16.2.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#формула"><i class="fa fa-check"></i><b>16.2.3</b> Формула</a></li>
<li class="chapter" data-level="16.2.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-данных"><i class="fa fa-check"></i><b>16.2.4</b> Импорт данных</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-вершин-узлов"><i class="fa fa-check"></i><b>16.3</b> Атрибуты вершин (узлов)</a></li>
<li class="chapter" data-level="16.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-узлу"><i class="fa fa-check"></i><b>16.4</b> Фильтрация по узлу</a></li>
<li class="chapter" data-level="16.5" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-ребер"><i class="fa fa-check"></i><b>16.5</b> Атрибуты ребер</a></li>
<li class="chapter" data-level="16.6" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-из-gexf"><i class="fa fa-check"></i><b>16.6</b> Импорт из gexf</a></li>
<li class="chapter" data-level="16.7" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#визуализация-с-ggraph"><i class="fa fa-check"></i><b>16.7</b> Визуализация с ggraph</a></li>
<li class="chapter" data-level="16.8" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-атрибутам-ребер"><i class="fa fa-check"></i><b>16.8</b> Фильтрация по атрибутам ребер</a></li>
<li class="chapter" data-level="16.9" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#укладка-сети"><i class="fa fa-check"></i><b>16.9</b> Укладка сети</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="анализ-сетей.html"><a href="анализ-сетей.html"><i class="fa fa-check"></i><b>17</b> Анализ сетей</a>
<ul>
<li class="chapter" data-level="17.1" data-path="анализ-сетей.html"><a href="анализ-сетей.html#от-conllu-к-совместной-встречаемости"><i class="fa fa-check"></i><b>17.1</b> От conllu к совместной встречаемости</a></li>
<li class="chapter" data-level="17.2" data-path="анализ-сетей.html"><a href="анализ-сетей.html#граф-слов-с-igraph"><i class="fa fa-check"></i><b>17.2</b> Граф слов с igraph</a></li>
<li class="chapter" data-level="17.3" data-path="анализ-сетей.html"><a href="анализ-сетей.html#важность-узлов"><i class="fa fa-check"></i><b>17.3</b> Важность узлов</a></li>
<li class="chapter" data-level="17.4" data-path="анализ-сетей.html"><a href="анализ-сетей.html#централизация"><i class="fa fa-check"></i><b>17.4</b> Централизация</a></li>
<li class="chapter" data-level="17.5" data-path="анализ-сетей.html"><a href="анализ-сетей.html#центральность-на-графике"><i class="fa fa-check"></i><b>17.5</b> Центральность на графике</a></li>
<li class="chapter" data-level="17.6" data-path="анализ-сетей.html"><a href="анализ-сетей.html#интерактивный-граф"><i class="fa fa-check"></i><b>17.6</b> Интерактивный граф</a></li>
<li class="chapter" data-level="17.7" data-path="анализ-сетей.html"><a href="анализ-сетей.html#точки-сочленения"><i class="fa fa-check"></i><b>17.7</b> Точки сочленения</a></li>
<li class="chapter" data-level="17.8" data-path="анализ-сетей.html"><a href="анализ-сетей.html#подгруппы"><i class="fa fa-check"></i><b>17.8</b> Подгруппы</a>
<ul>
<li class="chapter" data-level="17.8.1" data-path="анализ-сетей.html"><a href="анализ-сетей.html#клики"><i class="fa fa-check"></i><b>17.8.1</b> Клики</a></li>
<li class="chapter" data-level="17.8.2" data-path="анализ-сетей.html"><a href="анализ-сетей.html#k-ядра"><i class="fa fa-check"></i><b>17.8.2</b> K-ядра</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dracor.html"><a href="dracor.html"><i class="fa fa-check"></i><b>18</b> Dracor</a>
<ul>
<li class="chapter" data-level="18.1" data-path="dracor.html"><a href="dracor.html#о-корпусе-dracor"><i class="fa fa-check"></i><b>18.1</b> О корпусе Dracor</a></li>
<li class="chapter" data-level="18.2" data-path="dracor.html"><a href="dracor.html#начало-работы-с-dracor"><i class="fa fa-check"></i><b>18.2</b> Начало работы с Dracor</a></li>
<li class="chapter" data-level="18.3" data-path="dracor.html"><a href="dracor.html#сети-dracor"><i class="fa fa-check"></i><b>18.3</b> Сети Dracor</a></li>
<li class="chapter" data-level="18.4" data-path="dracor.html"><a href="dracor.html#модулярность"><i class="fa fa-check"></i><b>18.4</b> Модулярность</a></li>
<li class="chapter" data-level="18.5" data-path="dracor.html"><a href="dracor.html#алгоритмы-обнаружения-сообществ"><i class="fa fa-check"></i><b>18.5</b> Алгоритмы обнаружения сообществ</a></li>
<li class="chapter" data-level="18.6" data-path="dracor.html"><a href="dracor.html#двудольные-графы-биграфы"><i class="fa fa-check"></i><b>18.6</b> Двудольные графы (биграфы)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="латентно-семантический-анализ" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Тема 14</span> Латентно-семантический анализ<a href="латентно-семантический-анализ.html#латентно-семантический-анализ" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="что-это-такое" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Что это такое<a href="латентно-семантический-анализ.html#что-это-такое" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В этом уроке речь пойдет о таком методе <strong>тематического моделирования</strong>, как <strong>латентно-семантический анализ</strong>, или LSA (в области информационного поиска называемый также LSI, Latent Semantic Indexing). Как и LDA, это метод метод обработки информации на естественном языке, который позволяет находить взаимосвязь между коллекцией документов и встречающимися в них терминами за счет сопоставления этих документов и терминов с некоторыми <strong>темами</strong>.</p>
<p>Слово “скрытый” в названии указывает на то, что <strong>семантические взаимосвязи</strong> между документами и терминами, как правило, заранее не известны. В исходной термдокументной матрице, которую мы передаем алгоритму, не видно закономерностей. Как раз задача аналитика – их обнаружить, сгруппировав по темам, с одной стороны, термины, а с другой – документы.</p>
<p>Создатели метода называют LSA “теорией смысла” и видят в нем ответ на вопрос о том, как носители языка приходят к пониманию смысла. Как вообще машина может обнаружить “близкие” слова и документы? В 1957 британский лингвист Джон Руперт Фёрс сформулировал это так: you shall know a word by the company it keeps. Томас Ландауер, один из создателей LSA, обобщает этот подход в статье “LSA as a theory of meaning”: синтаксические связи переоценены, и смысл параграфов и целых текстов – это лишь функция от смысла отдельных слов. Смысл – это не статическая константа, а динамическое отношение, или система отношений. На уровне реализации действительно LSA показал способность справляться с задачами, которые до середины 90-х считались прерогативой живого человека. Например, с проблемами полисемии и синонимии.</p>
<p><img src="https://sysblok.ru/wp-content/uploads/2019/07/image16.gif" /></p>
</div>
<div id="векторное-представление-слов" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Векторное представление слов<a href="латентно-семантический-анализ.html#векторное-представление-слов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Мы можем представить термин в виде вектора, который хранит информацию о его встречаемости в документах. Каждый элемент вектора будет координатой в многомерном пространстве. В англоязычной литературе векторные представления называют <strong>эмбеддингами</strong> (embedding, т.е. «вложение»). Представляя объект в виде вектора, мы как бы «вкладываем» его в векторное пространство, где действуют геометрические законы.</p>
<p>Дальше дело за вычислением <strong>расстояния</strong> (или сходства) между векторами – это уже задача из области линейной алгебры. Как правило, в алгоритме LSA используется <strong>косинусное сходство</strong> (о том, что это такое, см. видео: <a href="https://vk.com/video-211800158_456239261">часть 1</a> и <a href="https://vk.com/video-211800158_456239263">часть 2</a>).</p>
<p><img src="images/dist.png" /></p>
<p>Трудность в том, что даже для небольших коллекций документов термдокументная матрица является очень <strong>разреженной</strong> (даже в небольшом примере из предыдущего урока разреженность составляла почти 100%). Чем больше ваш корпус, тем более разреженной будет матрица: это естественно, поскольку в каждом документе встречается лишь небольшая часть всех слов.</p>
<p>Любые действия над такими матрицами требуют больших вычислительных затрат, при этом результат не обязательно будет точным из-за синонимии и полисемии: слово apple можно встретить как в плодово-овощной рубрике, так и в заметке об IT. Справиться с этим помогает метод LSA, в основе которого лежит <strong>снижение размерности</strong> исходной матрицы.</p>
</div>
<div id="сингулярное-разложение-матрицы" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Сингулярное разложение матрицы<a href="латентно-семантический-анализ.html#сингулярное-разложение-матрицы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Мы можем “спроецировать” исходную матрицу <span class="math inline">\(C_r\)</span> в пространство меньшей размерности. Если r – ранг исходной матрицы, а k – ранг новой матрицы, при этом k значительно ниже r, то матрица <span class="math inline">\(C_k\)</span> называется <strong>малоранговой аппроксимацией</strong>.</p>
<div class="infobox">
<p>Рангом системы строк (столбцов) матрицы A с m строками и n столбцами называется максимальное число линейно независимых строк (столбцов). Несколько строк (столбцов) называются линейно независимыми, если ни одна из них не выражается линейно через другие. Ранг системы строк всегда равен рангу системы столбцов, и это число называется рангом матрицы.</p>
</div>
<p>Для ее получения новой матрицы применяется трехэтапная процедура:</p>
<ol style="list-style-type: decimal">
<li><p>для <span class="math inline">\(C_r\)</span> строится ее <strong>сингулярное разложение</strong> (SVD (Singular Value Decomposition) по формуле: <span class="math inline">\(C = UΣV^t\)</span> (подробнее см. <a href="https://vk.com/video-211800158_456239325">видео</a>);</p></li>
<li><p>по матрице Σ строится <span class="math inline">\(Σ_k\)</span>: <span class="math inline">\(r - k\)</span> наименьших сингулярных значений на диагонали матрицы заменяются нулями;</p></li>
<li><p>вычисляется новая матрица <span class="math inline">\(C_k = UΣ_kV^t\)</span>.</p></li>
</ol>
<p>Теперь подробнее.</p>
<ol style="list-style-type: decimal">
<li>Матричное разложение, или <strong>факторизация</strong> – представление матрицы в виде произведения нескольких матриц. Сингулярное разложение (SVD) матрицы A равно <span class="math inline">\(A=U⋅Σ⋅V^t\)</span>, где</li>
</ol>
<ul>
<li>U — матрица левых сингулярных векторов матрицы A,</li>
<li>Σ — диагональная матрица сингулярных чисел матрицы A,</li>
<li>V — матрица правых сингулярных векторов матрицы A.</li>
</ul>
<p><img src="https://www.askpython.com/wp-content/uploads/2020/11/SVD-1.jpg.webp" /></p>
<p>Строки матрицы U соответствуют словам; а в V^t столбцы соответствуют отдельным документам. Следовательно, первая строка матрицы U показывает, в каких документах встречается слово, а первый столбец V^T показывает, какие темы встречаются в документе.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Сингулярные значения</strong> в диагональной матрице всегда упорядочены по убыванию, и можно без больших потерь отсечь малоинформативные ряды или столбцы. Такое SVD называется <strong>усеченным</strong>.</li>
</ol>
<p><strong>Сингулярные векторы</strong> (они выделены цветом) в матрицах U и V соответствуют темам в тексте, которых в общей сложности k штук. Чему равно k — человек задает вручную при вычислении разложения. Математически это выражается в том, что в диагональной матрице остается k самых больших сингулярных чисел, а остальные становятся нулями. При перемножении матриц это приведет к отсечению <span class="math inline">\(r - k\)</span> столбцов в U и <span class="math inline">\(r - k\)</span> рядов в <span class="math inline">\(V^t\)</span>. (<a href="https://sysblok.ru/knowhow/kak-ponjat-o-chem-tekst-ne-chitaja-ego/">Подробнее</a>).</p>
<ol start="3" style="list-style-type: decimal">
<li>Умножение U на Σ дает векторное представление слов; умножение V на Σ– векторное представление документов (Dian I. Martin. Mathematical Foundations Behind Latent Semantic Analysis). Объединяя пространство слов с пространством документов, можно находить ближайшие документы по поисковому запросу (который в рамках этой модели рассматривается как “псевдодокумент”).</li>
</ol>
</div>
<div id="простой-пример" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Простой пример<a href="латентно-семантический-анализ.html#простой-пример" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Все это будет понятнее на простом примере. (<a href="https://www.engr.uvic.ca/~seng474/svd.pdf">отсюда</a>).</p>
<p>Допустим, у нас есть пять документов.</p>
<p><em>d1 : Romeo and Juliet.</em></p>
<p><em>d2 : Juliet: O happy dagger!</em></p>
<p><em>d3 : Romeo died by dagger”.</em></p>
<p><em>d4 : “Live free or die”, that’s the New-Hampshire’s motto.</em></p>
<p><em>d5 : Did you know, New Hampshire is in New-England.</em></p>
<p>Поисковый запрос: <em>dies</em>, <em>dagger</em>. Очевидно, ближе всего к запросу d3, т.к. он содержит оба слова. Но какой документ должен быть следующим? И d2, d4 содержат по одному слову из запроса, а явно релевантный d1 – ни одного.</p>
<p>Составим термдокументную матрицу.</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="латентно-семантический-анализ.html#cb814-1" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">d1 =</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">6</span>)),</span>
<span id="cb814-2"><a href="латентно-семантический-анализ.html#cb814-2" tabindex="-1"></a>                <span class="at">d2 =</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>)),</span>
<span id="cb814-3"><a href="латентно-семантический-анализ.html#cb814-3" tabindex="-1"></a>                <span class="at">d3 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb814-4"><a href="латентно-семантический-анализ.html#cb814-4" tabindex="-1"></a>                <span class="at">d4 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>)),</span>
<span id="cb814-5"><a href="латентно-семантический-анализ.html#cb814-5" tabindex="-1"></a>                <span class="at">d5 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>)))</span>
<span id="cb814-6"><a href="латентно-семантический-анализ.html#cb814-6" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;romeo&quot;</span>, <span class="st">&quot;juliet&quot;</span>, <span class="st">&quot;happy&quot;</span>, <span class="st">&quot;dagger&quot;</span>, <span class="st">&quot;live&quot;</span>,</span>
<span id="cb814-7"><a href="латентно-семантический-анализ.html#cb814-7" tabindex="-1"></a>                  <span class="st">&quot;die&quot;</span>, <span class="st">&quot;free&quot;</span>, <span class="st">&quot;new-hampshire&quot;</span>)             </span>
<span id="cb814-8"><a href="латентно-семантический-анализ.html#cb814-8" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##               d1 d2 d3 d4 d5
## romeo          1  0  1  0  0
## juliet         1  1  0  0  0
## happy          0  1  0  0  0
## dagger         0  1  1  0  0
## live           0  0  0  1  0
## die            0  0  1  1  0
## free           0  0  0  1  0
## new-hampshire  0  0  0  1  1</code></pre>
<p>И применим SVD. В R для этого есть специальная функция (дальше мы увидим, что то же самое делают и другие функции).</p>
<div class="sourceCode" id="cb816"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb816-1"><a href="латентно-семантический-анализ.html#cb816-1" tabindex="-1"></a>result <span class="ot">=</span> <span class="fu">svd</span>(df)</span>
<span id="cb816-2"><a href="латентно-семантический-анализ.html#cb816-2" tabindex="-1"></a>S <span class="ot">=</span> <span class="fu">round</span>((<span class="fu">diag</span>(result<span class="sc">$</span>d, <span class="at">nrow =</span> <span class="fu">length</span>(result<span class="sc">$</span>d))), <span class="dv">3</span>)</span>
<span id="cb816-3"><a href="латентно-семантический-анализ.html#cb816-3" tabindex="-1"></a></span>
<span id="cb816-4"><a href="латентно-семантический-анализ.html#cb816-4" tabindex="-1"></a>S</span></code></pre></div>
<pre><code>##       [,1] [,2]  [,3]  [,4]  [,5]
## [1,] 2.285 0.00 0.000 0.000 0.000
## [2,] 0.000 2.01 0.000 0.000 0.000
## [3,] 0.000 0.00 1.361 0.000 0.000
## [4,] 0.000 0.00 0.000 1.118 0.000
## [5,] 0.000 0.00 0.000 0.000 0.797</code></pre>
<p>Сингулярные значения меньше двух убираем, остается два сингулярных значения.</p>
<div class="sourceCode" id="cb818"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb818-1"><a href="латентно-семантический-анализ.html#cb818-1" tabindex="-1"></a>S_truncated <span class="ot">&lt;-</span> S[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb818-2"><a href="латентно-семантический-анализ.html#cb818-2" tabindex="-1"></a></span>
<span id="cb818-3"><a href="латентно-семантический-анализ.html#cb818-3" tabindex="-1"></a>S_truncated</span></code></pre></div>
<pre><code>##       [,1] [,2]
## [1,] 2.285 0.00
## [2,] 0.000 2.01</code></pre>
<p>Матрица левых сингулярных векторов выглядит так:</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="латентно-семантический-анализ.html#cb820-1" tabindex="-1"></a>U <span class="ot">&lt;-</span> <span class="fu">round</span>((result<span class="sc">$</span>u), <span class="dv">3</span>)</span>
<span id="cb820-2"><a href="латентно-семантический-анализ.html#cb820-2" tabindex="-1"></a></span>
<span id="cb820-3"><a href="латентно-семантический-анализ.html#cb820-3" tabindex="-1"></a>U</span></code></pre></div>
<pre><code>##        [,1]   [,2]   [,3]   [,4]   [,5]
## [1,] -0.396  0.280  0.571  0.450  0.102
## [2,] -0.314  0.450 -0.411  0.513 -0.204
## [3,] -0.178  0.269 -0.497 -0.257 -0.043
## [4,] -0.438  0.369 -0.013 -0.577  0.220
## [5,] -0.264 -0.346 -0.146  0.047 -0.417
## [6,] -0.524 -0.246  0.339 -0.273 -0.155
## [7,] -0.264 -0.346 -0.146  0.047 -0.417
## [8,] -0.326 -0.460 -0.317  0.237  0.725</code></pre>
<p>От нее отсекаем все столбцы, кроме первых двух:</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="латентно-семантический-анализ.html#cb822-1" tabindex="-1"></a>U_truncated <span class="ot">&lt;-</span> U[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb822-2"><a href="латентно-семантический-анализ.html#cb822-2" tabindex="-1"></a></span>
<span id="cb822-3"><a href="латентно-семантический-анализ.html#cb822-3" tabindex="-1"></a>U_truncated</span></code></pre></div>
<pre><code>##        [,1]   [,2]
## [1,] -0.396  0.280
## [2,] -0.314  0.450
## [3,] -0.178  0.269
## [4,] -0.438  0.369
## [5,] -0.264 -0.346
## [6,] -0.524 -0.246
## [7,] -0.264 -0.346
## [8,] -0.326 -0.460</code></pre>
<p>Матрица правых сингулярных векторов тоже усекается; не забудем ее транспонировать.</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="латентно-семантический-анализ.html#cb824-1" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">round</span>((result<span class="sc">$</span>v), <span class="dv">3</span>)</span>
<span id="cb824-2"><a href="латентно-семантический-анализ.html#cb824-2" tabindex="-1"></a></span>
<span id="cb824-3"><a href="латентно-семантический-анализ.html#cb824-3" tabindex="-1"></a>Vt_truncated <span class="ot">&lt;-</span> <span class="fu">t</span>(V[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb824-4"><a href="латентно-семантический-анализ.html#cb824-4" tabindex="-1"></a></span>
<span id="cb824-5"><a href="латентно-семантический-анализ.html#cb824-5" tabindex="-1"></a>Vt_truncated</span></code></pre></div>
<pre><code>##        [,1]   [,2]   [,3]   [,4]   [,5]
## [1,] -0.311 -0.407 -0.594 -0.603 -0.143
## [2,]  0.363  0.541  0.200 -0.695 -0.229</code></pre>
<p>Каждый столбец в этой матрице соответствует одному документу.</p>
<p>Умножим U и Vt на S_truncated (усеченную сигму).</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="латентно-семантический-анализ.html#cb826-1" tabindex="-1"></a><span class="co"># эмбеддинги слов</span></span>
<span id="cb826-2"><a href="латентно-семантический-анализ.html#cb826-2" tabindex="-1"></a>word_emb <span class="ot">&lt;-</span> <span class="fu">round</span>((U_truncated <span class="sc">%*%</span> S_truncated), <span class="dv">3</span>)</span>
<span id="cb826-3"><a href="латентно-семантический-анализ.html#cb826-3" tabindex="-1"></a></span>
<span id="cb826-4"><a href="латентно-семантический-анализ.html#cb826-4" tabindex="-1"></a><span class="fu">rownames</span>(word_emb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;romeo&quot;</span>, <span class="st">&quot;juliet&quot;</span>, <span class="st">&quot;happy&quot;</span>, <span class="st">&quot;dagger&quot;</span>, <span class="st">&quot;live&quot;</span>, <span class="st">&quot;die&quot;</span>, <span class="st">&quot;free&quot;</span>, <span class="st">&quot;new-hampshire&quot;</span>) </span>
<span id="cb826-5"><a href="латентно-семантический-анализ.html#cb826-5" tabindex="-1"></a></span>
<span id="cb826-6"><a href="латентно-семантический-анализ.html#cb826-6" tabindex="-1"></a>word_emb</span></code></pre></div>
<pre><code>##                 [,1]   [,2]
## romeo         -0.905  0.563
## juliet        -0.717  0.904
## happy         -0.407  0.541
## dagger        -1.001  0.742
## live          -0.603 -0.695
## die           -1.197 -0.494
## free          -0.603 -0.695
## new-hampshire -0.745 -0.925</code></pre>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="латентно-семантический-анализ.html#cb828-1" tabindex="-1"></a><span class="co"># эмбеддинги документов</span></span>
<span id="cb828-2"><a href="латентно-семантический-анализ.html#cb828-2" tabindex="-1"></a>doc_emb <span class="ot">&lt;-</span> <span class="fu">round</span>((S_truncated <span class="sc">%*%</span> Vt_truncated), <span class="dv">3</span>)</span>
<span id="cb828-3"><a href="латентно-семантический-анализ.html#cb828-3" tabindex="-1"></a><span class="fu">colnames</span>(doc_emb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;d1&quot;</span>, <span class="st">&quot;d2&quot;</span>, <span class="st">&quot;d3&quot;</span>, <span class="st">&quot;d4&quot;</span>, <span class="st">&quot;d5&quot;</span>)</span>
<span id="cb828-4"><a href="латентно-семантический-анализ.html#cb828-4" tabindex="-1"></a></span>
<span id="cb828-5"><a href="латентно-семантический-анализ.html#cb828-5" tabindex="-1"></a>doc_emb </span></code></pre></div>
<pre><code>##          d1     d2     d3     d4     d5
## [1,] -0.711 -0.930 -1.357 -1.378 -0.327
## [2,]  0.730  1.087  0.402 -1.397 -0.460</code></pre>
<p>Или, что то же самое:</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb830-1"><a href="латентно-семантический-анализ.html#cb830-1" tabindex="-1"></a>V[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">%*%</span> S_truncated</span></code></pre></div>
<pre><code>##           [,1]     [,2]
## [1,] -0.710635  0.72963
## [2,] -0.929995  1.08741
## [3,] -1.357290  0.40200
## [4,] -1.377855 -1.39695
## [5,] -0.326755 -0.46029</code></pre>
<div class="infobox">
<p>Умножить матрицу А на В можно лишь в том случае, если число рядов в В равно числу столбцов в А 🤯🤯🤯</p>
</div>
<p>Координаты поискового запроса (который рассматриваем как псевдодокумент) считаем как среднее арифметическое координат:</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="латентно-семантический-анализ.html#cb832-1" tabindex="-1"></a>q <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;die&quot;</span>, <span class="st">&quot;dagger&quot;</span>)</span>
<span id="cb832-2"><a href="латентно-семантический-анализ.html#cb832-2" tabindex="-1"></a>q_doc <span class="ot">&lt;-</span>  <span class="fu">colSums</span>(word_emb[<span class="fu">rownames</span>(word_emb) <span class="sc">%in%</span> q, ]) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb832-3"><a href="латентно-семантический-анализ.html#cb832-3" tabindex="-1"></a>q_doc</span></code></pre></div>
<pre><code>## [1] -1.099  0.124</code></pre>
<p>Объединив все в единый датафрейм, можем визуализировать.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="латентно-семантический-анализ.html#cb834-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb834-2"><a href="латентно-семантический-анализ.html#cb834-2" tabindex="-1"></a></span>
<span id="cb834-3"><a href="латентно-семантический-анализ.html#cb834-3" tabindex="-1"></a>all_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(word_emb, <span class="fu">t</span>(doc_emb), q_doc))</span>
<span id="cb834-4"><a href="латентно-семантический-анализ.html#cb834-4" tabindex="-1"></a></span>
<span id="cb834-5"><a href="латентно-семантический-анализ.html#cb834-5" tabindex="-1"></a>all_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(all_df, <span class="at">rownames =</span> <span class="st">&quot;item&quot;</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb834-6"><a href="латентно-семантический-анализ.html#cb834-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;word&quot;</span>, <span class="dv">8</span>), <span class="fu">rep</span>(<span class="st">&quot;doc&quot;</span>, <span class="dv">6</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb834-7"><a href="латентно-семантический-анализ.html#cb834-7" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">dim1 =</span> V1, <span class="at">dim2 =</span> V2)</span>
<span id="cb834-8"><a href="латентно-семантический-анализ.html#cb834-8" tabindex="-1"></a></span>
<span id="cb834-9"><a href="латентно-семантический-анализ.html#cb834-9" tabindex="-1"></a>all_tbl</span></code></pre></div>
<pre><code>## # A tibble: 14 × 4
##    item            dim1   dim2 type 
##    &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
##  1 romeo         -0.905  0.563 word 
##  2 juliet        -0.717  0.904 word 
##  3 happy         -0.407  0.541 word 
##  4 dagger        -1.00   0.742 word 
##  5 live          -0.603 -0.695 word 
##  6 die           -1.20  -0.494 word 
##  7 free          -0.603 -0.695 word 
##  8 new-hampshire -0.745 -0.925 word 
##  9 d1            -0.711  0.73  doc  
## 10 d2            -0.93   1.09  doc  
## 11 d3            -1.36   0.402 doc  
## 12 d4            -1.38  -1.40  doc  
## 13 d5            -0.327 -0.46  doc  
## 14 q_doc         -1.10   0.124 doc</code></pre>
<p>Теперь строим график.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-453-1.png" width="672" /></p>
<p>Как видно, поисковый запрос оказался ближе к d2, чем к d4, хотя в каждом из документов было одно слово из запроса. Более того: он оказался ближе к d1, в котором не было ни одного слова из запроса! Наш алгоритм оказался достаточно умен, чтобы понять, что d1 более релевантен, хотя и не содержит точных совпадений с поисковыми словами. Возможно, человек дал бы такую же рекомендацию.</p>
<p>Мы исследовали наш небольшой корпус графически, теперь посчитаем косинусное расстояние.</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="латентно-семантический-анализ.html#cb836-1" tabindex="-1"></a>dist_mx <span class="ot">&lt;-</span> all_df <span class="sc">%&gt;%</span> </span>
<span id="cb836-2"><a href="латентно-семантический-анализ.html#cb836-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">9</span><span class="sc">:</span><span class="dv">14</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb836-3"><a href="латентно-семантический-анализ.html#cb836-3" tabindex="-1"></a>  philentropy<span class="sc">::</span><span class="fu">distance</span>(<span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>, <span class="at">use.row.names =</span> T) </span></code></pre></div>
<pre><code>## Metric: &#39;cosine&#39;; comparing: 6 vectors.</code></pre>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb838-1"><a href="латентно-семантический-анализ.html#cb838-1" tabindex="-1"></a>dist_mx</span></code></pre></div>
<pre><code>##                d1          d2        d3          d4         d5     q_doc
## d1     1.00000000  0.99792078 0.8724625 -0.02002992 -0.1796188 0.7736415
## d2     0.99792078  1.00000000 0.8391517 -0.08442786 -0.2426496 0.7311943
## d3     0.87246248  0.83915171 1.0000000  0.47110771  0.3240227 0.9846131
## d4    -0.02002992 -0.08442786 0.4711077  1.00000000  0.9871367 0.6180004
## d5    -0.17961877 -0.24264957 0.3240227  0.98713669  1.0000000 0.4843579
## q_doc  0.77364153  0.73119433 0.9846131  0.61800043  0.4843579 1.0000000</code></pre>
</div>
<div id="векторы-слов" class="section level2 hasAnchor" number="14.5">
<h2><span class="header-section-number">14.5</span> Векторы слов<a href="латентно-семантический-анализ.html#векторы-слов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Текст хранится в опрятном формате, если одному наблюдению (термину) соответствует один ряд:</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="латентно-семантический-анализ.html#cb840-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb840-2"><a href="латентно-семантический-анализ.html#cb840-2" tabindex="-1"></a></span>
<span id="cb840-3"><a href="латентно-семантический-анализ.html#cb840-3" tabindex="-1"></a>tidy_corpus <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb840-4"><a href="латентно-семантический-анализ.html#cb840-4" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">&quot;word&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb840-5"><a href="латентно-семантический-анализ.html#cb840-5" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(d1<span class="sc">:</span>d5, <span class="at">names_to =</span> <span class="st">&quot;doc&quot;</span>)</span>
<span id="cb840-6"><a href="латентно-семантический-анализ.html#cb840-6" tabindex="-1"></a></span>
<span id="cb840-7"><a href="латентно-семантический-анализ.html#cb840-7" tabindex="-1"></a>tidy_corpus</span></code></pre></div>
<pre><code>## # A tibble: 40 × 3
##    word   doc   value
##    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
##  1 romeo  d1        1
##  2 romeo  d2        0
##  3 romeo  d3        1
##  4 romeo  d4        0
##  5 romeo  d5        0
##  6 juliet d1        1
##  7 juliet d2        1
##  8 juliet d3        0
##  9 juliet d4        0
## 10 juliet d5        0
## # ℹ 30 more rows</code></pre>
<p>Чтобы вычислить svd, такой корпус надо преобразовать в широкий формат, произвести все вычисления, а затем “тайдифицировать”. Для подобных операций существует пакет <code>widyr</code>. Функцию <code>pivot_wider()</code> я добавляю лишь для удобства сравнения с тем, что мы получили выше.</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="латентно-семантический-анализ.html#cb842-1" tabindex="-1"></a><span class="fu">library</span>(widyr)</span>
<span id="cb842-2"><a href="латентно-семантический-анализ.html#cb842-2" tabindex="-1"></a></span>
<span id="cb842-3"><a href="латентно-семантический-анализ.html#cb842-3" tabindex="-1"></a>tidy_u <span class="ot">&lt;-</span> tidy_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb842-4"><a href="латентно-семантический-анализ.html#cb842-4" tabindex="-1"></a>  <span class="fu">widely_svd</span>(word, doc, value,</span>
<span id="cb842-5"><a href="латентно-семантический-анализ.html#cb842-5" tabindex="-1"></a>             <span class="at">nv =</span> <span class="dv">2</span>, <span class="at">maxit =</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb842-6"><a href="латентно-семантический-анализ.html#cb842-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb842-7"><a href="латентно-семантический-анализ.html#cb842-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> dimension, <span class="at">values_from =</span> value) </span>
<span id="cb842-8"><a href="латентно-семантический-анализ.html#cb842-8" tabindex="-1"></a></span>
<span id="cb842-9"><a href="латентно-семантический-анализ.html#cb842-9" tabindex="-1"></a>tidy_u</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##   word             `1`    `2`
##   &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 romeo         -0.396  0.28 
## 2 juliet        -0.314  0.45 
## 3 happy         -0.178  0.269
## 4 dagger        -0.438  0.369
## 5 live          -0.264 -0.346
## 6 die           -0.524 -0.246
## 7 free          -0.264 -0.346
## 8 new-hampshire -0.326 -0.46</code></pre>
<p>Сравним с тем, что у нас получилось выше.</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="латентно-семантический-анализ.html#cb844-1" tabindex="-1"></a>U_truncated <span class="sc">==</span> tidy_u[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##         1    2
## [1,] TRUE TRUE
## [2,] TRUE TRUE
## [3,] TRUE TRUE
## [4,] TRUE TRUE
## [5,] TRUE TRUE
## [6,] TRUE TRUE
## [7,] TRUE TRUE
## [8,] TRUE TRUE</code></pre>
<p>Итак, мы получили только матрицу левых сингулярных векторов. Чтобы получить word_emb, используем аргумент <code>weight_d</code>:</p>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="латентно-семантический-анализ.html#cb846-1" tabindex="-1"></a>tidy_word_emb <span class="ot">&lt;-</span> tidy_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb846-2"><a href="латентно-семантический-анализ.html#cb846-2" tabindex="-1"></a>  <span class="fu">widely_svd</span>(word, doc, value, </span>
<span id="cb846-3"><a href="латентно-семантический-анализ.html#cb846-3" tabindex="-1"></a>             <span class="at">nv =</span> <span class="dv">2</span>, <span class="at">maxit =</span> <span class="dv">100</span>, </span>
<span id="cb846-4"><a href="латентно-семантический-анализ.html#cb846-4" tabindex="-1"></a>             <span class="at">weight_d =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb846-5"><a href="латентно-семантический-анализ.html#cb846-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)) </span>
<span id="cb846-6"><a href="латентно-семантический-анализ.html#cb846-6" tabindex="-1"></a></span>
<span id="cb846-7"><a href="латентно-семантический-анализ.html#cb846-7" tabindex="-1"></a></span>
<span id="cb846-8"><a href="латентно-семантический-анализ.html#cb846-8" tabindex="-1"></a>tidy_word_emb <span class="sc">%&gt;%</span> </span>
<span id="cb846-9"><a href="латентно-семантический-анализ.html#cb846-9" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> dimension, <span class="at">values_from =</span> value)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##   word             `1`    `2`
##   &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 romeo         -0.905  0.563
## 2 juliet        -0.718  0.904
## 3 happy         -0.407  0.541
## 4 dagger        -1.00   0.741
## 5 live          -0.603 -0.695
## 6 die           -1.20  -0.495
## 7 free          -0.603 -0.695
## 8 new-hampshire -0.746 -0.924</code></pre>
<p>Сравнив с <code>word_emb</code> выше, видим, что округление не всегда с точностью до тысячных совпадает, но в остальном все ок.</p>
</div>
<div id="пакеты-для-работы-с-lsa" class="section level2 hasAnchor" number="14.6">
<h2><span class="header-section-number">14.6</span> Пакеты для работы с LSA<a href="латентно-семантический-анализ.html#пакеты-для-работы-с-lsa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lsa" class="section level3 hasAnchor" number="14.6.1">
<h3><span class="header-section-number">14.6.1</span> lsa<a href="латентно-семантический-анализ.html#lsa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Имея матрицу документ-термин, мы можем быстро построить модель, воспользовавшись функцией <code>lsa()</code> из одноименного пакета. Она требует на входе матрицу документ-термин, Функция вернет список, в котором хранятся элементы под названием <code>tk</code>, <code>dk</code>, <code>sk</code>. Они соответствуют матрице правых сингулярных векторов V, матрице правых сингулярных векторов U, а также сингулярным значениям.</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="латентно-семантический-анализ.html#cb848-1" tabindex="-1"></a><span class="fu">library</span>(lsa)</span>
<span id="cb848-2"><a href="латентно-семантический-анализ.html#cb848-2" tabindex="-1"></a></span>
<span id="cb848-3"><a href="латентно-семантический-анализ.html#cb848-3" tabindex="-1"></a>lsaSpace <span class="ot">&lt;-</span> <span class="fu">lsa</span>(dtm_mx, <span class="at">dims =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Чтобы построить эмбеддинги документов, следует перемножит диагональную матрицу и <span class="math inline">\(V^t\)</span>:</p>
<div class="sourceCode" id="cb849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb849-1"><a href="латентно-семантический-анализ.html#cb849-1" tabindex="-1"></a><span class="fu">diag</span>(lsaSpace<span class="sc">$</span>sk) <span class="sc">%*%</span> <span class="fu">t</span>(lsaSpace<span class="sc">$</span>tk)</span></code></pre></div>
<p>Еще одна полезная функция из пакет <code>lsa</code> перемножает все три матрицы:</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="латентно-семантический-анализ.html#cb850-1" tabindex="-1"></a><span class="fu">as.textmatrix</span>(lsaSpace)</span></code></pre></div>
<p>Внутри у этой функции происходит следующее:</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb851-1"><a href="латентно-семантический-анализ.html#cb851-1" tabindex="-1"></a><span class="fu">t</span>(lsaSpace<span class="sc">$</span>dk <span class="sc">%*%</span> <span class="fu">diag</span>(lsaSpace<span class="sc">$</span>sk) <span class="sc">%*%</span> <span class="fu">t</span>(lsaSpace<span class="sc">$</span>tk))</span></code></pre></div>
<p>Эту матрицу тоже можно использовать для вычисления косинусного расстояния между терминами или документами.</p>
</div>
<div id="textminer" class="section level3 hasAnchor" number="14.6.2">
<h3><span class="header-section-number">14.6.2</span> TextmineR<a href="латентно-семантический-анализ.html#textminer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Все те же задачи решает пакет textmineR, но могут быть проблемы с его установкой на MacOS. Как их решить, см. <a href="https://github.com/coatless-mac/macrtools">здесь</a>.</p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="латентно-семантический-анализ.html#cb852-1" tabindex="-1"></a><span class="co"># для MacOS</span></span>
<span id="cb852-2"><a href="латентно-семантический-анализ.html#cb852-2" tabindex="-1"></a><span class="co"># remotes::install_github(&quot;coatless-mac/macrtools&quot;)</span></span>
<span id="cb852-3"><a href="латентно-семантический-анализ.html#cb852-3" tabindex="-1"></a><span class="co"># macrtools::macos_rtools_install()</span></span></code></pre></div>
<p>Если справились с установкой:</p>
<div class="sourceCode" id="cb853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb853-1"><a href="латентно-семантический-анализ.html#cb853-1" tabindex="-1"></a><span class="fu">library</span>(textmineR)</span>
<span id="cb853-2"><a href="латентно-семантический-анализ.html#cb853-2" tabindex="-1"></a>lsa_model <span class="ot">&lt;-</span> <span class="fu">FitLsaModel</span>(dtm_mx, <span class="at">k =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Функция вернет список; при этом матрица правых сингулярных векторов здесь называются “тета”, а матрица левых сингулярных векторов называются “фи”; см. <a href="https://cran.r-project.org/web/packages/textmineR/vignettes/c_topic_modeling.html">виньетку</a>). Работать с этими матрицами можно как описано выше.</p>
<p>Те же задачи решаются при помощи пакетов <code>text2vec</code>, <code>word2vec</code>, и некоторых других. Ниже мы рассмотрим, как строить эмбеддинги с использованием принципов tidyverse.</p>
</div>
</div>
<div id="lsa-c-использованием-tidy-data" class="section level2 hasAnchor" number="14.7">
<h2><span class="header-section-number">14.7</span> LSA c использованием Tidy Data<a href="латентно-семантический-анализ.html#lsa-c-использованием-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Загружаем датасет с постами из телеграм-канала Antibarbari, предварительно подготовленными для анализа, и удаляем очень редкие слова.</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb854-1"><a href="латентно-семантический-анализ.html#cb854-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/antibarbari_words_tidy.Rdata&quot;</span>)</span>
<span id="cb854-2"><a href="латентно-семантический-анализ.html#cb854-2" tabindex="-1"></a></span>
<span id="cb854-3"><a href="латентно-семантический-анализ.html#cb854-3" tabindex="-1"></a>text_pruned <span class="ot">&lt;-</span> text_tidy_nosw <span class="sc">%&gt;%</span> </span>
<span id="cb854-4"><a href="латентно-семантический-анализ.html#cb854-4" tabindex="-1"></a>  <span class="fu">add_count</span>(lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb854-5"><a href="латентно-семантический-анализ.html#cb854-5" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb854-6"><a href="латентно-семантический-анализ.html#cb854-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n)</span></code></pre></div>
<p>Функция <code>nest()</code> собирает все слова для каждого документа в отдельный тибл.</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="латентно-семантический-анализ.html#cb855-1" tabindex="-1"></a>nested_words <span class="ot">&lt;-</span> text_pruned <span class="sc">%&gt;%</span> </span>
<span id="cb855-2"><a href="латентно-семантический-анализ.html#cb855-2" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">words =</span> <span class="fu">c</span>(lemma))</span>
<span id="cb855-3"><a href="латентно-семантический-анализ.html#cb855-3" tabindex="-1"></a></span>
<span id="cb855-4"><a href="латентно-семантический-анализ.html#cb855-4" tabindex="-1"></a><span class="fu">head</span>(nested_words)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   doc_id words            
##   &lt;chr&gt;  &lt;list&gt;           
## 1 doc1   &lt;tibble [4 × 1]&gt; 
## 2 doc2   &lt;tibble [8 × 1]&gt; 
## 3 doc3   &lt;tibble [6 × 1]&gt; 
## 4 doc4   &lt;tibble [19 × 1]&gt;
## 5 doc5   &lt;tibble [22 × 1]&gt;
## 6 doc6   &lt;tibble [32 × 1]&gt;</code></pre>
<p>На небольших датасетах как наш может быть непродуктивно строить эмбеддинги с использованием абсолютной частотности или tf-idf, поэтому я воспользуюсь решением, предложенным в книге Джулии Силги и Эмиля Хвитфельдта (<a href="https://smltar.com/embeddings.html#exploring-cfpb-word-embeddings">источник</a>). Тексты делятся на “скользящие окна”, а затем для каждого окна считается PMI (мера ассоциации между словами).</p>
<p><img src="https://static.packt-cdn.com/products/9781783989348/graphics/B00838_06_16.jpg" /></p>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="латентно-семантический-анализ.html#cb857-1" tabindex="-1"></a>slide_windows <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, window_size) {</span>
<span id="cb857-2"><a href="латентно-семантический-анализ.html#cb857-2" tabindex="-1"></a>  skipgrams <span class="ot">&lt;-</span> slider<span class="sc">::</span><span class="fu">slide</span>(</span>
<span id="cb857-3"><a href="латентно-семантический-анализ.html#cb857-3" tabindex="-1"></a>    tbl, </span>
<span id="cb857-4"><a href="латентно-семантический-анализ.html#cb857-4" tabindex="-1"></a>    <span class="sc">~</span>.x, </span>
<span id="cb857-5"><a href="латентно-семантический-анализ.html#cb857-5" tabindex="-1"></a>    <span class="at">.after =</span> window_size <span class="sc">-</span> <span class="dv">1</span>, </span>
<span id="cb857-6"><a href="латентно-семантический-анализ.html#cb857-6" tabindex="-1"></a>    <span class="at">.step =</span> <span class="dv">1</span>, </span>
<span id="cb857-7"><a href="латентно-семантический-анализ.html#cb857-7" tabindex="-1"></a>    <span class="at">.complete =</span> <span class="cn">TRUE</span></span>
<span id="cb857-8"><a href="латентно-семантический-анализ.html#cb857-8" tabindex="-1"></a>  )</span>
<span id="cb857-9"><a href="латентно-семантический-анализ.html#cb857-9" tabindex="-1"></a>  </span>
<span id="cb857-10"><a href="латентно-семантический-анализ.html#cb857-10" tabindex="-1"></a>  safe_mutate <span class="ot">&lt;-</span> <span class="fu">safely</span>(mutate)</span>
<span id="cb857-11"><a href="латентно-семантический-анализ.html#cb857-11" tabindex="-1"></a>  </span>
<span id="cb857-12"><a href="латентно-семантический-анализ.html#cb857-12" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">map2</span>(skipgrams,</span>
<span id="cb857-13"><a href="латентно-семантический-анализ.html#cb857-13" tabindex="-1"></a>              <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(skipgrams),</span>
<span id="cb857-14"><a href="латентно-семантический-анализ.html#cb857-14" tabindex="-1"></a>              <span class="sc">~</span> <span class="fu">safe_mutate</span>(.x, <span class="at">window_id =</span> .y))</span>
<span id="cb857-15"><a href="латентно-семантический-анализ.html#cb857-15" tabindex="-1"></a>  </span>
<span id="cb857-16"><a href="латентно-семантический-анализ.html#cb857-16" tabindex="-1"></a>  out <span class="sc">%&gt;%</span></span>
<span id="cb857-17"><a href="латентно-семантический-анализ.html#cb857-17" tabindex="-1"></a>    <span class="fu">transpose</span>() <span class="sc">%&gt;%</span></span>
<span id="cb857-18"><a href="латентно-семантический-анализ.html#cb857-18" tabindex="-1"></a>    <span class="fu">pluck</span>(<span class="st">&quot;result&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb857-19"><a href="латентно-семантический-анализ.html#cb857-19" tabindex="-1"></a>    <span class="fu">compact</span>() <span class="sc">%&gt;%</span></span>
<span id="cb857-20"><a href="латентно-семантический-анализ.html#cb857-20" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="cb857-21"><a href="латентно-семантический-анализ.html#cb857-21" tabindex="-1"></a>}</span></code></pre></div>
<p>Применив эту функцию к нашим данным, получаем:</p>
<div class="sourceCode" id="cb858"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb858-1"><a href="латентно-семантический-анализ.html#cb858-1" tabindex="-1"></a>tidy_pmi  <span class="ot">&lt;-</span> nested_words <span class="sc">%&gt;%</span></span>
<span id="cb858-2"><a href="латентно-семантический-анализ.html#cb858-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">map</span>(words, slide_windows, 4L)) <span class="sc">%&gt;%</span> </span>
<span id="cb858-3"><a href="латентно-семантический-анализ.html#cb858-3" tabindex="-1"></a>  <span class="fu">unnest</span>(words) <span class="sc">%&gt;%</span> </span>
<span id="cb858-4"><a href="латентно-семантический-анализ.html#cb858-4" tabindex="-1"></a>  <span class="fu">unite</span>(window_id, doc_id, window_id) <span class="sc">%&gt;%</span> </span>
<span id="cb858-5"><a href="латентно-семантический-анализ.html#cb858-5" tabindex="-1"></a>  <span class="fu">pairwise_pmi</span>(lemma, window_id)</span></code></pre></div>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="латентно-семантический-анализ.html#cb859-1" tabindex="-1"></a>tidy_pmi <span class="sc">%&gt;%</span> </span>
<span id="cb859-2"><a href="латентно-семантический-анализ.html#cb859-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="fu">abs</span>(pmi))</span></code></pre></div>
<pre><code>## # A tibble: 112,592 × 3
##    item1        item2          pmi
##    &lt;chr&gt;        &lt;chr&gt;        &lt;dbl&gt;
##  1 исследования фгн           6.83
##  2 фгн          исследования  6.83
##  3 квалификация повышение     6.76
##  4 повышение    квалификация  6.76
##  5 густой       острый        6.43
##  6 острый       густой        6.43
##  7 карточка     набор         6.31
##  8 набор        карточка      6.31
##  9 косвенный    реальность    6.26
## 10 реальность   косвенный     6.26
## # ℹ 112,582 more rows</code></pre>
<p>Этот тиббл передаем фунции <code>widely_svd()</code> для построения сингулярного разложения. Обратите внимание на аргумент <code>weight_d</code>: если задать ему значение FALSE, то вернутся не эмбеддинги, а матрица левых сингулярных векторов.</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb861-1"><a href="латентно-семантический-анализ.html#cb861-1" tabindex="-1"></a>tidy_word_emb <span class="ot">&lt;-</span> tidy_pmi <span class="sc">%&gt;%</span></span>
<span id="cb861-2"><a href="латентно-семантический-анализ.html#cb861-2" tabindex="-1"></a>  <span class="fu">widely_svd</span>(item1, item2, pmi,</span>
<span id="cb861-3"><a href="латентно-семантический-анализ.html#cb861-3" tabindex="-1"></a>             <span class="at">weight_d =</span> T, <span class="at">nv =</span> <span class="dv">50</span>)</span></code></pre></div>
<p>Исследуем наши эмбеддинги, используя функцию, которая считает косинусное сходство между словами.</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="латентно-семантический-анализ.html#cb862-1" tabindex="-1"></a>nearest_neighbors <span class="ot">&lt;-</span> <span class="cf">function</span>(df, token) {</span>
<span id="cb862-2"><a href="латентно-семантический-анализ.html#cb862-2" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb862-3"><a href="латентно-семантический-анализ.html#cb862-3" tabindex="-1"></a>    <span class="fu">widely</span>(</span>
<span id="cb862-4"><a href="латентно-семантический-анализ.html#cb862-4" tabindex="-1"></a>      <span class="sc">~</span> {</span>
<span id="cb862-5"><a href="латентно-семантический-анализ.html#cb862-5" tabindex="-1"></a>        y <span class="ot">&lt;-</span> .[<span class="fu">rep</span>(token, <span class="fu">nrow</span>(.)), ]</span>
<span id="cb862-6"><a href="латентно-семантический-анализ.html#cb862-6" tabindex="-1"></a>        res <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(. <span class="sc">*</span> y) <span class="sc">/</span> </span>
<span id="cb862-7"><a href="латентно-семантический-анализ.html#cb862-7" tabindex="-1"></a>          (<span class="fu">sqrt</span>(<span class="fu">rowSums</span>(. <span class="sc">^</span> <span class="dv">2</span>)) <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(.[token, ] <span class="sc">^</span> <span class="dv">2</span>)))</span>
<span id="cb862-8"><a href="латентно-семантический-анализ.html#cb862-8" tabindex="-1"></a>        </span>
<span id="cb862-9"><a href="латентно-семантический-анализ.html#cb862-9" tabindex="-1"></a>        <span class="fu">matrix</span>(res, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fu">names</span>(res)))</span>
<span id="cb862-10"><a href="латентно-семантический-анализ.html#cb862-10" tabindex="-1"></a>      },</span>
<span id="cb862-11"><a href="латентно-семантический-анализ.html#cb862-11" tabindex="-1"></a>      <span class="at">sort =</span> <span class="cn">TRUE</span></span>
<span id="cb862-12"><a href="латентно-семантический-анализ.html#cb862-12" tabindex="-1"></a>    )(item1, dimension, value) <span class="sc">%&gt;%</span></span>
<span id="cb862-13"><a href="латентно-семантический-анализ.html#cb862-13" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>item2)</span>
<span id="cb862-14"><a href="латентно-семантический-анализ.html#cb862-14" tabindex="-1"></a>}</span></code></pre></div>
<p>Результат, кажется, вполне осмысленный.</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="латентно-семантический-анализ.html#cb863-1" tabindex="-1"></a>tidy_word_emb <span class="sc">%&gt;%</span> </span>
<span id="cb863-2"><a href="латентно-семантический-анализ.html#cb863-2" tabindex="-1"></a>  <span class="fu">nearest_neighbors</span>(<span class="st">&quot;математика&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,810 × 2
##    item1           value
##    &lt;chr&gt;           &lt;dbl&gt;
##  1 математика      1    
##  2 теорема         0.710
##  3 несоизмеримость 0.703
##  4 математик       0.652
##  5 феодор          0.650
##  6 доказывать      0.649
##  7 пересказ        0.623
##  8 представитель   0.601
##  9 чертеж          0.599
## 10 историк         0.578
## # ℹ 1,800 more rows</code></pre>
<p>Для большей наглядности некоторые из главных компонент (или топиков) можно представить на графике.</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="латентно-семантический-анализ.html#cb865-1" tabindex="-1"></a>tidy_word_emb <span class="sc">%&gt;%</span> </span>
<span id="cb865-2"><a href="латентно-семантический-анализ.html#cb865-2" tabindex="-1"></a>  <span class="fu">filter</span>(dimension <span class="sc">&lt;</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb865-3"><a href="латентно-семантический-анализ.html#cb865-3" tabindex="-1"></a>  <span class="fu">group_by</span>(dimension) <span class="sc">%&gt;%</span> </span>
<span id="cb865-4"><a href="латентно-семантический-анализ.html#cb865-4" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">12</span>, <span class="fu">abs</span>(value)) <span class="sc">%&gt;%</span> </span>
<span id="cb865-5"><a href="латентно-семантический-анализ.html#cb865-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb865-6"><a href="латентно-семантический-анализ.html#cb865-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">item1  =</span> <span class="fu">reorder_within</span>(item1, value, dimension)) <span class="sc">%&gt;%</span> </span>
<span id="cb865-7"><a href="латентно-семантический-анализ.html#cb865-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(item1, value, <span class="at">fill =</span> <span class="fu">as.factor</span>(dimension))) <span class="sc">+</span></span>
<span id="cb865-8"><a href="латентно-семантический-анализ.html#cb865-8" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb865-9"><a href="латентно-семантический-анализ.html#cb865-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>dimension, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">ncol=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb865-10"><a href="латентно-семантический-анализ.html#cb865-10" tabindex="-1"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb865-11"><a href="латентно-семантический-анализ.html#cb865-11" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-473-1.png" width="672" /></p>
<p>Имея эмбеддинги слов и матрицу документ-термин, можно создать пространство документов той же размерности. Для этого перемножаем две матрицы.</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="латентно-семантический-анализ.html#cb866-1" tabindex="-1"></a>word_mx <span class="ot">&lt;-</span> text_pruned <span class="sc">%&gt;%</span></span>
<span id="cb866-2"><a href="латентно-семантический-анализ.html#cb866-2" tabindex="-1"></a>  <span class="fu">count</span>(doc_id, lemma) <span class="sc">%&gt;%</span></span>
<span id="cb866-3"><a href="латентно-семантический-анализ.html#cb866-3" tabindex="-1"></a>  <span class="fu">cast_sparse</span>(doc_id, lemma, n)</span>
<span id="cb866-4"><a href="латентно-семантический-анализ.html#cb866-4" tabindex="-1"></a><span class="fu">dim</span>(word_mx)</span></code></pre></div>
<pre><code>## [1]  719 1810</code></pre>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="латентно-семантический-анализ.html#cb868-1" tabindex="-1"></a>embedding_mx <span class="ot">&lt;-</span> tidy_word_emb <span class="sc">%&gt;%</span></span>
<span id="cb868-2"><a href="латентно-семантический-анализ.html#cb868-2" tabindex="-1"></a>  <span class="fu">cast_sparse</span>(item1, dimension, value)</span>
<span id="cb868-3"><a href="латентно-семантический-анализ.html#cb868-3" tabindex="-1"></a><span class="fu">dim</span>(embedding_mx)</span></code></pre></div>
<pre><code>## [1] 1810   50</code></pre>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="латентно-семантический-анализ.html#cb870-1" tabindex="-1"></a>doc_mx <span class="ot">&lt;-</span> word_mx <span class="sc">%*%</span> embedding_mx</span>
<span id="cb870-2"><a href="латентно-семантический-анализ.html#cb870-2" tabindex="-1"></a><span class="fu">dim</span>(doc_mx)</span></code></pre></div>
<pre><code>## [1] 719  50</code></pre>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="латентно-семантический-анализ.html#cb872-1" tabindex="-1"></a><span class="fu">class</span>(doc_mx)</span></code></pre></div>
<pre><code>## [1] &quot;dgCMatrix&quot;
## attr(,&quot;package&quot;)
## [1] &quot;Matrix&quot;</code></pre>
<p>Превратим разреженную матрицу обратно в датафрейм и посчитаем косинусное расстояние между рядами.</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="латентно-семантический-анализ.html#cb874-1" tabindex="-1"></a>tidy_doc_emb <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.matrix</span>(doc_mx))</span>
<span id="cb874-2"><a href="латентно-семантический-анализ.html#cb874-2" tabindex="-1"></a></span>
<span id="cb874-3"><a href="латентно-семантический-анализ.html#cb874-3" tabindex="-1"></a>dist_mx <span class="ot">&lt;-</span>  tidy_doc_emb <span class="sc">%&gt;%</span> </span>
<span id="cb874-4"><a href="латентно-семантический-анализ.html#cb874-4" tabindex="-1"></a>  philentropy<span class="sc">::</span><span class="fu">distance</span>(<span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>, <span class="at">use.row.names =</span> T)</span></code></pre></div>
<pre><code>## Metric: &#39;cosine&#39;; comparing: 719 vectors.</code></pre>
<p>Небольшой фрагмент этой матрицы.</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="латентно-семантический-анализ.html#cb876-1" tabindex="-1"></a>dist_mx[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##             doc1     doc10    doc100    doc101    doc102    doc103
## doc1   1.0000000 0.7605686 0.7745078 0.7564402 0.8680997 0.6893900
## doc10  0.7605686 1.0000000 0.7793400 0.7294682 0.8687391 0.7985651
## doc100 0.7745078 0.7793400 1.0000000 0.8741178 0.8483274 0.7927676
## doc101 0.7564402 0.7294682 0.8741178 1.0000000 0.8428310 0.7821788
## doc102 0.8680997 0.8687391 0.8483274 0.8428310 1.0000000 0.7901311
## doc103 0.6893900 0.7985651 0.7927676 0.7821788 0.7901311 1.0000000
## doc104 0.6680614 0.7093569 0.8846958 0.8617179 0.8061694 0.8180705
## doc105 0.7110572 0.7250496 0.8507740 0.8965854 0.8352048 0.8029635
## doc106 0.4115312 0.4874521 0.6176151 0.6926529 0.6055048 0.5170057
## doc107 0.3091917 0.3801341 0.5143291 0.5547815 0.4564905 0.5198729</code></pre>
<p>Теперь нам нужна функция для поиска ближайших соседей.</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="латентно-семантический-анализ.html#cb878-1" tabindex="-1"></a>nearest_doc <span class="ot">&lt;-</span> <span class="cf">function</span>(dist_mx, doc, n) {</span>
<span id="cb878-2"><a href="латентно-семантический-анализ.html#cb878-2" tabindex="-1"></a>  idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">rownames</span>(dist_mx) <span class="sc">==</span> doc) </span>
<span id="cb878-3"><a href="латентно-семантический-анализ.html#cb878-3" tabindex="-1"></a>  subset <span class="ot">&lt;-</span> dist_mx[idx, <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(dist_mx), drop <span class="ot">=</span> F]</span>
<span id="cb878-4"><a href="латентно-семантический-анализ.html#cb878-4" tabindex="-1"></a>  ord <span class="ot">&lt;-</span> <span class="fu">order</span>(subset, <span class="at">decreasing =</span> T)</span>
<span id="cb878-5"><a href="латентно-семантический-анализ.html#cb878-5" tabindex="-1"></a>  <span class="fu">names</span>(subset[, ord])[<span class="dv">1</span><span class="sc">:</span>n]</span>
<span id="cb878-6"><a href="латентно-семантический-анализ.html#cb878-6" tabindex="-1"></a>}</span>
<span id="cb878-7"><a href="латентно-семантический-анализ.html#cb878-7" tabindex="-1"></a></span>
<span id="cb878-8"><a href="латентно-семантический-анализ.html#cb878-8" tabindex="-1"></a>nearest <span class="ot">&lt;-</span> <span class="fu">nearest_doc</span>(dist_mx, <span class="st">&quot;doc31&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb878-9"><a href="латентно-семантический-анализ.html#cb878-9" tabindex="-1"></a>nearest</span></code></pre></div>
<pre><code>## [1] &quot;doc31&quot; &quot;doc94&quot; &quot;doc40&quot;</code></pre>
<p>Чтобы оценить адекватность этого результата, загрузим датасет с текстом постов (до удаления стоп-слов). Там много всего, распечатаем только нужное.</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="латентно-семантический-анализ.html#cb880-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/R_Workflow/Text_Analysis_2023/data/AntibarbariTidy.Rdata&quot;</span>)</span>
<span id="cb880-2"><a href="латентно-семантический-анализ.html#cb880-2" tabindex="-1"></a></span>
<span id="cb880-3"><a href="латентно-семантический-анализ.html#cb880-3" tabindex="-1"></a>print_post <span class="ot">&lt;-</span> <span class="cf">function</span>(doc) {</span>
<span id="cb880-4"><a href="латентно-семантический-анализ.html#cb880-4" tabindex="-1"></a>  text_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb880-5"><a href="латентно-семантический-анализ.html#cb880-5" tabindex="-1"></a>  <span class="fu">distinct</span>(doc_id, sentence) <span class="sc">%&gt;%</span> </span>
<span id="cb880-6"><a href="латентно-семантический-анализ.html#cb880-6" tabindex="-1"></a>  <span class="fu">filter</span>(doc_id <span class="sc">==</span> doc) <span class="sc">%&gt;%</span> </span>
<span id="cb880-7"><a href="латентно-семантический-анализ.html#cb880-7" tabindex="-1"></a>  <span class="fu">group_by</span>(doc_id) <span class="sc">%&gt;%</span> </span>
<span id="cb880-8"><a href="латентно-семантический-анализ.html#cb880-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">paste0</span>(sentence, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb880-9"><a href="латентно-семантический-анализ.html#cb880-9" tabindex="-1"></a>  <span class="fu">distinct</span>(doc_id, text) <span class="sc">%&gt;%</span> </span>
<span id="cb880-10"><a href="латентно-семантический-анализ.html#cb880-10" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span>
<span id="cb880-11"><a href="латентно-семантический-анализ.html#cb880-11" tabindex="-1"></a>}</span>
<span id="cb880-12"><a href="латентно-семантический-анализ.html#cb880-12" tabindex="-1"></a></span>
<span id="cb880-13"><a href="латентно-семантический-анализ.html#cb880-13" tabindex="-1"></a><span class="fu">map</span>(nearest, print_post)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Семинар по Филебу. марта г. Искать благо следует в его \&quot;обители\&quot;, смешанной жизни, а само смешение должно быть наилучшим. Сократ и Протарх решают для начала включить в смешанную жизнь лишь самые подлинные части удовольствия и разумения —возникает вопрос, что делать не с такими подлинными, но необходимыми частями.&quot;
## 
## [[2]]
## [1] &quot;Семинар . Читаем \&quot;Филеб\&quot; . Выяснив, что причиной любой благой смеси будут истина, мера и красота, Сократ предлагает сравнить с ними удовольствие и разум. Протарх, не задумываясь, говорит, что и истина, и мера, и красота ближе к уму, чем к удовольствию. При этом он упоминает сильные удовольствия, в первую очередь любовные, хотя еще раньше собеседники договорились, что всем интенсивным наслаждениям нет места в благой жизни. Возможно, как указывают Хакфорт и Делькомминет, дело в том, что удовольствия рассматриваются сами по себе, каковы они по природе (πεφυκός, ), так что умеренные и чистые удовольствия от познания остаются без рассмотрения.&quot;
## 
## [[3]]
## [1] &quot;Семинар . Читаем \&quot;Филеб\&quot;. Для хорошей жизни знания нужны не только самые чистые, но и необходимые -- да и вообще все безвредные не помешают. С удовольствиями похожая история: Сократ и Протарх добавляют не только наилучшие, но и необходимые. На повестке вопрос, не станет ли жизнь лучше, если добавить вообще все.&quot;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="тематическое-моделирование.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="кластеризация-и-метод-главных-компонент.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/locusclassicus/text_analysis_2023/edit/main/13-lsa.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
