<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 8 Регулярные выражения | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 8 Регулярные выражения | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 8 Регулярные выражения | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-08-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="воспроизводимые-исследования.html"/>
<link rel="next" href="веб-скрапинг.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.1</b> Что такое R?</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.2</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#если-не-хватает-пакетов"><i class="fa fa-check"></i><b>2.3</b> Если не хватает пакетов</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-мы-не-будем-делать"><i class="fa fa-check"></i><b>2.5</b> Что мы (не) будем делать?</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.6</b> RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.7</b> Установка</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.8</b> Начало работы</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.9</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.10</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.11</b> Векторы</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#шорткаты"><i class="fa fa-check"></i><b>2.15</b> Шорткаты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.4</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-базовый-r-и-tidyverse"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: базовый R и tidyverse</a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a></li>
<li class="chapter" data-level="5.8" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#пример-итерации"><i class="fa fa-check"></i><b>5.8</b> Пример итерации</a></li>
<li class="chapter" data-level="5.9" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#furrr"><i class="fa fa-check"></i><b>5.9</b> Furrr</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-файлов-из-интернета"><i class="fa fa-check"></i><b>6.2</b> Чтение файлов из интернета</a></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-локальных-файлов"><i class="fa fa-check"></i><b>6.3</b> Чтение локальных файлов</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.3.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.3.2</b> xls и xlsx</a></li>
<li class="chapter" data-level="6.3.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.3.3</b> txt</a></li>
<li class="chapter" data-level="6.3.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.3.4</b> doc</a></li>
<li class="chapter" data-level="6.3.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.3.5</b> pdf</a></li>
<li class="chapter" data-level="6.3.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.3.6</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml-и-html"><i class="fa fa-check"></i><b>6.4</b> xml и html</a></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5</b> json</a></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
<li class="chapter" data-level="6.7" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rperseus"><i class="fa fa-check"></i><b>6.7</b> RPerseus</a></li>
<li class="chapter" data-level="6.8" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-нескольких-файлов"><i class="fa fa-check"></i><b>6.8</b> Чтение нескольких файлов</a></li>
<li class="chapter" data-level="6.9" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#экспорт"><i class="fa fa-check"></i><b>6.9</b> Экспорт</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rdata"><i class="fa fa-check"></i><b>6.9.1</b> Rdata</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html"><i class="fa fa-check"></i><b>9</b> Веб-скрапинг</a>
<ul>
<li class="chapter" data-level="9.1" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#структура-html"><i class="fa fa-check"></i><b>9.1</b> Структура html</a></li>
<li class="chapter" data-level="9.2" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#каскадные-таблицы-стилей"><i class="fa fa-check"></i><b>9.2</b> Каскадные таблицы стилей</a></li>
<li class="chapter" data-level="9.3" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-данных"><i class="fa fa-check"></i><b>9.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="9.4" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-в-тиббл"><i class="fa fa-check"></i><b>9.4</b> Извлечение в тиббл</a></li>
<li class="chapter" data-level="9.5" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#скрапим-телеграм-канал"><i class="fa fa-check"></i><b>9.5</b> Скрапим телеграм-канал</a></li>
<li class="chapter" data-level="9.6" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#эмотиконы"><i class="fa fa-check"></i><b>9.6</b> Эмотиконы</a></li>
<li class="chapter" data-level="9.7" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#рутинная-уборка"><i class="fa fa-check"></i><b>9.7</b> Рутинная уборка</a></li>
<li class="chapter" data-level="9.8" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#лемматизация"><i class="fa fa-check"></i><b>9.8</b> Лемматизация</a></li>
<li class="chapter" data-level="9.9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#таблицы-html"><i class="fa fa-check"></i><b>9.9</b> Таблицы html</a></li>
<li class="chapter" data-level="9.10" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#wikisource"><i class="fa fa-check"></i><b>9.10</b> Wikisource</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>10</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="10.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>10.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="10.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>10.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="10.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>10.3</b> Скипграмы</a></li>
<li class="chapter" data-level="10.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>10.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="10.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>10.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="10.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>10.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="10.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>10.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="10.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>10.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html"><i class="fa fa-check"></i><b>11</b> Распределения слов и анализ частотностей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#извлечение-источников"><i class="fa fa-check"></i><b>11.1</b> Извлечение источников</a></li>
<li class="chapter" data-level="11.2" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#подготовка-источников"><i class="fa fa-check"></i><b>11.2</b> Подготовка источников</a></li>
<li class="chapter" data-level="11.3" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#токенизация"><i class="fa fa-check"></i><b>11.3</b> Токенизация</a></li>
<li class="chapter" data-level="11.4" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#cтоп-слова"><i class="fa fa-check"></i><b>11.4</b> Cтоп-слова</a></li>
<li class="chapter" data-level="11.5" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#абсолютная-частотность"><i class="fa fa-check"></i><b>11.5</b> Абсолютная частотность</a></li>
<li class="chapter" data-level="11.6" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#стемминг"><i class="fa fa-check"></i><b>11.6</b> Стемминг</a></li>
<li class="chapter" data-level="11.7" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#относительная-частотность"><i class="fa fa-check"></i><b>11.7</b> Относительная частотность</a></li>
<li class="chapter" data-level="11.8" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#распределения-слов-токенов"><i class="fa fa-check"></i><b>11.8</b> Распределения слов (токенов)</a></li>
<li class="chapter" data-level="11.9" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#закон-ципфа"><i class="fa fa-check"></i><b>11.9</b> Закон Ципфа</a></li>
<li class="chapter" data-level="11.10" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#ttr-type-token-ratio"><i class="fa fa-check"></i><b>11.10</b> TTR (type-token ratio)</a></li>
<li class="chapter" data-level="11.11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#tf-idf"><i class="fa fa-check"></i><b>11.11</b> TF-IDF</a></li>
<li class="chapter" data-level="11.12" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#сравнение-при-помощи-диаграммы-рассеяния"><i class="fa fa-check"></i><b>11.12</b> Сравнение при помощи диаграммы рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>12</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="12.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>12.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="12.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>12.2</b> Подходы</a></li>
<li class="chapter" data-level="12.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>12.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="12.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>12.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>12.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="12.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>12.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="12.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>12.4.3</b> AFINN</a></li>
<li class="chapter" data-level="12.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>12.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>12.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="12.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подготовка-текста"><i class="fa fa-check"></i><b>12.6</b> Подготовка текста</a></li>
<li class="chapter" data-level="12.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#модификация-лексикона"><i class="fa fa-check"></i><b>12.7</b> Модификация лексикона</a></li>
<li class="chapter" data-level="12.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#соединение-лексикона-и-текста"><i class="fa fa-check"></i><b>12.8</b> Соединение лексикона и текста</a></li>
<li class="chapter" data-level="12.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-на-оси-времени"><i class="fa fa-check"></i><b>12.9</b> Тональность на оси времени</a></li>
<li class="chapter" data-level="12.10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#для-других-языков"><i class="fa fa-check"></i><b>12.10</b> Для других языков</a></li>
<li class="chapter" data-level="12.11" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#виды-эмоций"><i class="fa fa-check"></i><b>12.11</b> Виды эмоций</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html"><i class="fa fa-check"></i><b>13</b> Тематическое моделирование</a>
<ul>
<li class="chapter" data-level="13.1" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#что-такое-lda"><i class="fa fa-check"></i><b>13.1</b> Что такое LDA</a></li>
<li class="chapter" data-level="13.2" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределение-дирихле"><i class="fa fa-check"></i><b>13.2</b> Распределение Дирихле</a></li>
<li class="chapter" data-level="13.3" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#подтоговка-данных"><i class="fa fa-check"></i><b>13.3</b> Подтоговка данных</a></li>
<li class="chapter" data-level="13.4" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#матрица-встречаемости"><i class="fa fa-check"></i><b>13.4</b> Матрица встречаемости</a></li>
<li class="chapter" data-level="13.5" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#число-тем"><i class="fa fa-check"></i><b>13.5</b> Число тем</a></li>
<li class="chapter" data-level="13.6" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#модель-lda"><i class="fa fa-check"></i><b>13.6</b> Модель LDA</a></li>
<li class="chapter" data-level="13.7" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#слова-и-темы"><i class="fa fa-check"></i><b>13.7</b> Слова и темы</a></li>
<li class="chapter" data-level="13.8" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#сравнение-топиков"><i class="fa fa-check"></i><b>13.8</b> Сравнение топиков</a></li>
<li class="chapter" data-level="13.9" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#темы-и-документы"><i class="fa fa-check"></i><b>13.9</b> Темы и документы</a></li>
<li class="chapter" data-level="13.10" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределения-вероятности-для-топиков"><i class="fa fa-check"></i><b>13.10</b> Распределения вероятности для топиков</a></li>
<li class="chapter" data-level="13.11" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#интерактивные-визуализации"><i class="fa fa-check"></i><b>13.11</b> Интерактивные визуализации</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html"><i class="fa fa-check"></i><b>14</b> Латентно-семантический анализ</a>
<ul>
<li class="chapter" data-level="14.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#что-это-такое"><i class="fa fa-check"></i><b>14.1</b> Что это такое</a></li>
<li class="chapter" data-level="14.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторное-представление-слов"><i class="fa fa-check"></i><b>14.2</b> Векторное представление слов</a></li>
<li class="chapter" data-level="14.3" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#сингулярное-разложение-матрицы"><i class="fa fa-check"></i><b>14.3</b> Сингулярное разложение матрицы</a></li>
<li class="chapter" data-level="14.4" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#простой-пример"><i class="fa fa-check"></i><b>14.4</b> Простой пример</a></li>
<li class="chapter" data-level="14.5" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторы-слов"><i class="fa fa-check"></i><b>14.5</b> Векторы слов</a></li>
<li class="chapter" data-level="14.6" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#пакеты-для-работы-с-lsa"><i class="fa fa-check"></i><b>14.6</b> Пакеты для работы с LSA</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa"><i class="fa fa-check"></i><b>14.6.1</b> lsa</a></li>
<li class="chapter" data-level="14.6.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#textminer"><i class="fa fa-check"></i><b>14.6.2</b> TextmineR</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa-c-использованием-tidy-data"><i class="fa fa-check"></i><b>14.7</b> LSA c использованием Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html"><i class="fa fa-check"></i><b>15</b> Кластеризация и метод главных компонент</a>
<ul>
<li class="chapter" data-level="15.1" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#виды-кластерного-анализа"><i class="fa fa-check"></i><b>15.1</b> Виды кластерного анализа</a></li>
<li class="chapter" data-level="15.2" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#кластеризация-по-методу-k-средних"><i class="fa fa-check"></i><b>15.2</b> Кластеризация по методу K средних</a></li>
<li class="chapter" data-level="15.3" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-в-r"><i class="fa fa-check"></i><b>15.3</b> K-means в R</a></li>
<li class="chapter" data-level="15.4" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-для-кластеризации-текстов"><i class="fa fa-check"></i><b>15.4</b> K-means для кластеризации текстов</a></li>
<li class="chapter" data-level="15.5" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#нормализация-данных"><i class="fa fa-check"></i><b>15.5</b> Нормализация данных</a></li>
<li class="chapter" data-level="15.6" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.6</b> Иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.7" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#алгоритм-иерархической-кластеризации"><i class="fa fa-check"></i><b>15.7</b> Алгоритм иерархической кластеризации</a></li>
<li class="chapter" data-level="15.8" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-в-r"><i class="fa fa-check"></i><b>15.8</b> Иерархическая кластеризация в R</a></li>
<li class="chapter" data-level="15.9" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-текстов"><i class="fa fa-check"></i><b>15.9</b> Иерархическая кластеризация текстов</a></li>
<li class="chapter" data-level="15.10" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#метод-главных-компонент"><i class="fa fa-check"></i><b>15.10</b> Метод главных компонент</a></li>
<li class="chapter" data-level="15.11" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-для-визуализации-кластеров-k-means"><i class="fa fa-check"></i><b>15.11</b> PCA для визуализации кластеров K-means</a></li>
<li class="chapter" data-level="15.12" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-и-иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.12</b> PCA и иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.13" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#многомерное-шкалирование"><i class="fa fa-check"></i><b>15.13</b> Многомерное шкалирование</a></li>
<li class="chapter" data-level="15.14" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-с-factominer"><i class="fa fa-check"></i><b>15.14</b> PCA с FactoMineR</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html"><i class="fa fa-check"></i><b>16</b> Кластеризация и метод главных компонент</a>
<ul>
<li class="chapter" data-level="16.1" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#виды-кластерного-анализа-1"><i class="fa fa-check"></i><b>16.1</b> Виды кластерного анализа</a></li>
<li class="chapter" data-level="16.2" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#кластеризация-по-методу-k-средних-1"><i class="fa fa-check"></i><b>16.2</b> Кластеризация по методу K средних</a></li>
<li class="chapter" data-level="16.3" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#k-means-в-r-1"><i class="fa fa-check"></i><b>16.3</b> K-means в R</a></li>
<li class="chapter" data-level="16.4" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#k-means-для-кластеризации-текстов-1"><i class="fa fa-check"></i><b>16.4</b> K-means для кластеризации текстов</a></li>
<li class="chapter" data-level="16.5" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#нормализация-данных-1"><i class="fa fa-check"></i><b>16.5</b> Нормализация данных</a></li>
<li class="chapter" data-level="16.6" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#иерархическая-кластеризация-1"><i class="fa fa-check"></i><b>16.6</b> Иерархическая кластеризация</a></li>
<li class="chapter" data-level="16.7" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#алгоритм-иерархической-кластеризации-1"><i class="fa fa-check"></i><b>16.7</b> Алгоритм иерархической кластеризации</a></li>
<li class="chapter" data-level="16.8" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#иерархическая-кластеризация-в-r-1"><i class="fa fa-check"></i><b>16.8</b> Иерархическая кластеризация в R</a></li>
<li class="chapter" data-level="16.9" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#иерархическая-кластеризация-текстов-1"><i class="fa fa-check"></i><b>16.9</b> Иерархическая кластеризация текстов</a></li>
<li class="chapter" data-level="16.10" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#метод-главных-компонент-1"><i class="fa fa-check"></i><b>16.10</b> Метод главных компонент</a></li>
<li class="chapter" data-level="16.11" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#pca-для-визуализации-кластеров-k-means-1"><i class="fa fa-check"></i><b>16.11</b> PCA для визуализации кластеров K-means</a></li>
<li class="chapter" data-level="16.12" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#pca-и-иерархическая-кластеризация-1"><i class="fa fa-check"></i><b>16.12</b> PCA и иерархическая кластеризация</a></li>
<li class="chapter" data-level="16.13" data-path="кластеризация-и-метод-главных-компонент-1.html"><a href="кластеризация-и-метод-главных-компонент-1.html#многомерное-шкалирование-1"><i class="fa fa-check"></i><b>16.13</b> Многомерное шкалирование</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="регулярные-выражения" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Тема 8</span> Регулярные выражения<a href="регулярные-выражения.html#регулярные-выражения" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Есть старая шутка, ее приписывают программисту Джейми Завински: если у вас есть проблема, и вы собираетесь ее решать при помощи регулярных выражений, то у вас две проблемы. Регулярные выражения – это формальный язык, который используется для того, чтобы находить, извлекать и заменять части текста.</p>
<p>Регулярные выражения (regex, regexp) объединяют <strong>буквальные символы</strong> (литералы) и <strong>метасимволы</strong> (символы-джокеры, англ. wildcard characters).</p>
<p>Для поиска используется строка-образец (англ. pattern, по-русски её часто называют “шаблоном”, “маской”), которая задает правило поиска. Строка замены также может содержать в себе специальные символы.</p>
<p>Отличный путеводитель по миру регулярных выражений можно найти <a href="https://cran.r-project.org/web/packages/stringr/vignettes/regular-expressions.html">здесь</a>.</p>
<div id="regex-в-базовом-r" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Regex в базовом R<a href="регулярные-выражения.html#regex-в-базовом-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В базовом R за работу со строками отвечают, среди прочего, такие функции, как <code>grep()</code> и <code>grepl()</code>. При этом <code>grepl()</code> возвращает TRUE, если шаблон найден в соответствующей символьной строке, а <code>grep()</code> возвращает вектор индексов символьных строк, содержащих паттерн.</p>
<p>Обеим функциям необходим аргумент <code>pattern</code> и аргумент <code>x</code>, где <code>pattern</code> - регулярное выражение, по которому производится поиск, а аргумент <code>x</code> - вектор символов, по которым следует искать совпадения.</p>
<p>Функция <code>gsub()</code> позволяет производить замену и требует также аргумента <code>replacement</code>.</p>
</div>
<div id="литералы-и-классы" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Литералы и классы<a href="регулярные-выражения.html#литералы-и-классы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Буквальные символы – это то, что вы ожидаете увидеть (или не увидеть – для управляющих и пробельных символов); можно сказать, что это символы, которые ничего не “имеют в виду”. Их можно объединять в классы при помощи квадратных скобок, например, так: <code>[abc]</code>.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="регулярные-выражения.html#cb373-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb373-2"><a href="регулярные-выражения.html#cb373-2" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;[abc]&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="регулярные-выражения.html#cb375-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[abc]&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<p>Для некоторых классов есть специальные обозначения.</p>
<table>
<colgroup>
<col width="29%" />
<col width="41%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th>Класс</th>
<th>Эквивалент</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[:upper:]</td>
<td>[A-Z]</td>
<td>Символы верхнего регистра</td>
</tr>
<tr class="even">
<td>[:lower:]</td>
<td>[a-z]</td>
<td>Символы нижнего регистра</td>
</tr>
<tr class="odd">
<td>[:alpha:]</td>
<td>[[:upper:][:lower:]]</td>
<td>Буквы</td>
</tr>
<tr class="even">
<td>[:digit:]</td>
<td>[0-9], т. е. \d</td>
<td>Цифры</td>
</tr>
<tr class="odd">
<td>[:alnum:]</td>
<td>[[:alpha:][:digit:]]</td>
<td>Буквы и цифры</td>
</tr>
<tr class="even">
<td>[:word:]</td>
<td>[[:alnum:]_], т. е. </td>
<td>Символы, образующие «слово»</td>
</tr>
<tr class="odd">
<td>[:punct:]</td>
<td>[-!“#$%&amp;’()*+,./:;&lt;=&gt;?@[\]_`{|}~]</td>
<td>Знаки пунктуации</td>
</tr>
<tr class="even">
<td>[:blank:]</td>
<td>[\s\t]</td>
<td>Пробел и табуляция</td>
</tr>
<tr class="odd">
<td>[:space:]</td>
<td>[[:blank:]\v\r\n\f], т. е. \s</td>
<td>Пробельные символы</td>
</tr>
<tr class="even">
<td>[:cntrl:]</td>
<td></td>
<td>Управляющие символы (перевод строки, табуляция и т.п.)</td>
</tr>
<tr class="odd">
<td>[:graph:]</td>
<td></td>
<td>Печатные символы</td>
</tr>
<tr class="even">
<td>[:print:]</td>
<td></td>
<td>Печатные символы с пробелом</td>
</tr>
</tbody>
</table>
<p>Эти классы тоже можно задавать в качестве паттерна.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="регулярные-выражения.html#cb377-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;жираф&quot;</span>, <span class="st">&quot;верблюд1&quot;</span>, <span class="st">&quot;0зебра&quot;</span>)</span>
<span id="cb377-2"><a href="регулярные-выражения.html#cb377-2" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">&quot;[[:digit:]]&quot;</span>,  <span class="st">&quot;&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] &quot;жираф&quot;   &quot;верблюд&quot; &quot;зебра&quot;</code></pre>
<p>В качестве классов можно рассматривать и следующие обозначения:</p>
<table>
<colgroup>
<col width="41%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th>Представление</th>
<th>Эквивалент</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>\d</td>
<td>[0-9]</td>
<td>Цифра</td>
</tr>
<tr class="even">
<td>\D</td>
<td>[^\\d]</td>
<td>Любой символ, кроме цифры</td>
</tr>
<tr class="odd">
<td>\w</td>
<td>[A-Za-zА-Яа-я0-9_]</td>
<td>Символы, образующие «слово» (буквы, цифры и символ подчёркивания)</td>
</tr>
<tr class="even">
<td>\W</td>
<td>[^\\w]</td>
<td>Символы, не образующие «слово»</td>
</tr>
<tr class="odd">
<td>\s</td>
<td>[ \t\v\r\n\f]</td>
<td>Пробельный символ</td>
</tr>
<tr class="even">
<td>\S</td>
<td>[^\\s]</td>
<td>Непробельный символ</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="регулярные-выражения.html#cb379-1" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>,  <span class="st">&quot;&quot;</span>, vec) <span class="co"># вторая косая черта &quot;экранирует&quot; первую</span></span></code></pre></div>
<pre><code>## [1] &quot;жираф&quot;   &quot;верблюд&quot; &quot;зебра&quot;</code></pre>
<p>Внутри квадратных скобор знак <code>^</code> означает отрицание:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="регулярные-выражения.html#cb381-1" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">&quot;[^[:digit:]]&quot;</span>,  <span class="st">&quot;&quot;</span>, vec) </span></code></pre></div>
<pre><code>## [1] &quot;&quot;  &quot;1&quot; &quot;0&quot;</code></pre>
</div>
<div id="якоря" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Якоря<a href="регулярные-выражения.html#якоря" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Якоря позволяют искать последовательности символов в начале или в конце строки. Знак <code>^</code> (вне квадратных скобок!) означает начало строки, а знак <code>$</code> – конец. Мнемоническое правило: First you get the power (^) and then you get the money ($).</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="регулярные-выражения.html#cb383-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;The spring is a lovely time&quot;</span>, </span>
<span id="cb383-2"><a href="регулярные-выражения.html#cb383-2" tabindex="-1"></a>         <span class="st">&quot;Fall is a time of peace&quot;</span>)</span>
<span id="cb383-3"><a href="регулярные-выражения.html#cb383-3" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;time$&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
</div>
<div id="метасимволы" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Метасимволы<a href="регулярные-выражения.html#метасимволы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Все метасимволы представлены в таблице ниже.</p>
<table>
<thead>
<tr class="header">
<th>Описание</th>
<th>Символ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>открывающая квадратная скобка</td>
<td>[</td>
</tr>
<tr class="even">
<td>закрывающая квадратная скобка</td>
<td>]</td>
</tr>
<tr class="odd">
<td>обратная косая черта</td>
<td>\</td>
</tr>
<tr class="even">
<td>карет</td>
<td>^</td>
</tr>
<tr class="odd">
<td>знак доллара</td>
<td>$</td>
</tr>
<tr class="even">
<td>точка</td>
<td>.</td>
</tr>
<tr class="odd">
<td>вертикальная черта</td>
<td>|</td>
</tr>
<tr class="even">
<td>знак вопроса</td>
<td>?</td>
</tr>
<tr class="odd">
<td>астериск</td>
<td>*</td>
</tr>
<tr class="even">
<td>плюс</td>
<td>+</td>
</tr>
<tr class="odd">
<td>открывающая фигурная скобка</td>
<td>{</td>
</tr>
<tr class="even">
<td>закрывающая фигурная скобка</td>
<td>}</td>
</tr>
<tr class="odd">
<td>открывающая круглая скобка</td>
<td>(</td>
</tr>
<tr class="even">
<td>закрывающая круглая скобка</td>
<td>)</td>
</tr>
</tbody>
</table>
<p>Квадратные скобки используются для создания классов, карет и знак доллара – это якоря, но карет внутри квадратных скобор может также быть отрицанием. Точка – это любой знак.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="регулярные-выражения.html#cb385-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;жираф&quot;</span>, <span class="st">&quot;верблюд1&quot;</span>, <span class="st">&quot;0зебра&quot;</span>)</span>
<span id="cb385-2"><a href="регулярные-выражения.html#cb385-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;.б&quot;</span>, vec) </span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
</div>
<div id="экранирование" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Экранирование<a href="регулярные-выражения.html#экранирование" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Если необходимо найти буквальную точку, буквальный знак вопроса и т.п., то используется экранирование: перед знаком ставится косая черта. Но так как сама косая черта – это метасимвол, но нужно две косые черты, первая из которых экранирует вторую.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="регулярные-выражения.html#cb387-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;жираф?&quot;</span>, <span class="st">&quot;верблюд.&quot;</span>, <span class="st">&quot;зебра&quot;</span>)</span>
<span id="cb387-2"><a href="регулярные-выражения.html#cb387-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">?&quot;</span>, vec) </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="регулярные-выражения.html#cb389-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
</div>
<div id="квантификация" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Квантификация<a href="регулярные-выражения.html#квантификация" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Квантификатор после символа, символьного класса или группы определяет, сколько раз предшествующее выражение может встречаться. Квантификатор может относиться более чем к одному символу в регулярном выражении, только если это символьный класс или группа.</p>
<table>
<thead>
<tr class="header">
<th>Представление</th>
<th>Число повторений</th>
<th>Эквивалент</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>?</td>
<td>Ноль или одно</td>
<td>{0,1}</td>
</tr>
<tr class="even">
<td>*</td>
<td>Ноль или более</td>
<td>{0,}</td>
</tr>
<tr class="odd">
<td>+</td>
<td>Одно или более</td>
<td>{1,}</td>
</tr>
</tbody>
</table>
<p>Пример:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="регулярные-выражения.html#cb391-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;colour&quot;</span>, <span class="st">&quot;colouur&quot;</span>)</span>
<span id="cb391-2"><a href="регулярные-выражения.html#cb391-2" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou?r&quot;</span>, vec) <span class="co"># ноль или одно </span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="регулярные-выражения.html#cb393-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou+r&quot;</span>, vec) <span class="co"># одно или больше</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="регулярные-выражения.html#cb395-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou*r&quot;</span>, vec) <span class="co"># ноль или больше</span></span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<p>Точное число повторений (интервал) можно задать в фигурных скобках:</p>
<table>
<thead>
<tr class="header">
<th>Представление</th>
<th>Число повторений</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{n}</td>
<td>Ровно n раз</td>
</tr>
<tr class="even">
<td>{m,n}</td>
<td>От m до n включительно</td>
</tr>
<tr class="odd">
<td>{m,}</td>
<td>Не менее m</td>
</tr>
<tr class="even">
<td>{,n}</td>
<td>Не более n</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="регулярные-выражения.html#cb397-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;colour&quot;</span>, <span class="st">&quot;colouur&quot;</span>, <span class="st">&quot;colouuuur&quot;</span>)</span>
<span id="cb397-2"><a href="регулярные-выражения.html#cb397-2" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou{1}r&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="регулярные-выражения.html#cb399-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou{1,2}r&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="регулярные-выражения.html#cb401-1" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;ou{,2}r&quot;</span>, vec) <span class="co"># это включает и ноль!</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE</code></pre>
<p>Часто используется последовательность <code>.*</code> для обозначения любого количества любых символов между двумя частями регулярного выражения.</p>
</div>
<div id="жадная-и-ленивая-квантификация" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Жадная и ленивая квантификация<a href="регулярные-выражения.html#жадная-и-ленивая-квантификация" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В регулярных выражениях квантификаторам соответствует максимально длинная строка из возможных (квантификаторы являются жадными, англ. greedy). Это может оказаться значительной проблемой. Например, часто ожидают, что выражение <code>&lt;.*&gt;</code> найдёт в тексте теги HTML. Однако если в тексте есть более одного HTML-тега, то этому выражению соответствует <em>целиком строка, содержащая множество тегов</em>.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="регулярные-выражения.html#cb403-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;&lt;p&gt;&lt;b&gt;Википедия&lt;/b&gt; — свободная энциклопедия, в которой &lt;i&gt;каждый&lt;/i&gt; может изменить или дополнить любую статью.&lt;/p&gt;&quot;</span>)</span>
<span id="cb403-2"><a href="регулярные-выражения.html#cb403-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;&lt;.*&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, vec) <span class="co"># все исчезло!</span></span></code></pre></div>
<pre><code>## [1] &quot;&quot;</code></pre>
<p>Чтобы этого избежать, надо поставить после квантификатора знак вопроса. Это сделает его ленивым.</p>
<table>
<thead>
<tr class="header">
<th>regex</th>
<th>значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>??</td>
<td>0 или 1, лучше 0</td>
</tr>
<tr class="even">
<td>*?</td>
<td>0 или больше, как можно меньше</td>
</tr>
<tr class="odd">
<td>+?</td>
<td>1 или больше, как можно меньше</td>
</tr>
<tr class="even">
<td>{n,m}?</td>
<td>от n до m, как можно меньше</td>
</tr>
</tbody>
</table>
<p>Пример:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="регулярные-выражения.html#cb405-1" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;&lt;.*?&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, vec) <span class="co"># все получилось!</span></span></code></pre></div>
<pre><code>## [1] &quot;Википедия — свободная энциклопедия, в которой каждый может изменить или дополнить любую статью.&quot;</code></pre>
</div>
<div id="regex-в-stringr-основы" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> Regex в stringr: основы<a href="регулярные-выражения.html#regex-в-stringr-основы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Пакет <code>stringr</code> не является частью <code>tidyverse</code>, хотя и разделяет его принципы<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>. Его надо загружать отдельно:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="регулярные-выражения.html#cb407-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>Это очень удобный инструмент для работы со строками. Вот так можно узнать длину строки или объединить ее с другими строками:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="регулярные-выражения.html#cb408-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;жираф&quot;</span>, <span class="st">&quot;верблюд&quot;</span>)</span>
<span id="cb408-2"><a href="регулярные-выражения.html#cb408-2" tabindex="-1"></a><span class="fu">str_length</span>(vec)</span></code></pre></div>
<pre><code>## [1] 5 7</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="регулярные-выражения.html#cb410-1" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;красивый_&quot;</span>, vec)</span></code></pre></div>
<pre><code>## [1] &quot;красивый_жираф&quot;   &quot;красивый_верблюд&quot;</code></pre>
<p>Элементы вектора можно объединить в одну строку:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="регулярные-выражения.html#cb412-1" tabindex="-1"></a><span class="fu">str_c</span>(vec, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="co"># теперь у них общие кавычки</span></span></code></pre></div>
<pre><code>## [1] &quot;жираф, верблюд&quot;</code></pre>
<p>С помощью <code>str_sub()</code> и <code>str_sub_all()</code> можно выбрать часть строки<a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a>.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="регулярные-выражения.html#cb414-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;жираф&quot;</span>, <span class="st">&quot;верблюд&quot;</span>)</span>
<span id="cb414-2"><a href="регулярные-выражения.html#cb414-2" tabindex="-1"></a><span class="fu">str_sub</span>(vec, <span class="dv">1</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;жир&quot; &quot;вер&quot;</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="регулярные-выражения.html#cb416-1" tabindex="-1"></a><span class="fu">str_sub</span>(vec, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;жира&quot;   &quot;верблю&quot;</code></pre>
<p>Функции ниже меняют начертание с прописного на строчное или наоборот:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="регулярные-выражения.html#cb418-1" tabindex="-1"></a>VEC <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(vec)</span>
<span id="cb418-2"><a href="регулярные-выражения.html#cb418-2" tabindex="-1"></a>VEC</span></code></pre></div>
<pre><code>## [1] &quot;ЖИРАФ&quot;   &quot;ВЕРБЛЮД&quot;</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="регулярные-выражения.html#cb420-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(VEC)</span></code></pre></div>
<pre><code>## [1] &quot;жираф&quot;   &quot;верблюд&quot;</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="регулярные-выражения.html#cb422-1" tabindex="-1"></a><span class="fu">str_to_title</span>(vec)</span></code></pre></div>
<pre><code>## [1] &quot;Жираф&quot;   &quot;Верблюд&quot;</code></pre>
<p>Одна из полезнейших функций в этом пакете – <code>str_view()</code>; она помогает увидеть, что поймало регулярное выражение – до того, как вы внесете какие-то изменения в строку.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="регулярные-выражения.html#cb424-1" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;a.c&quot;</span>, <span class="st">&quot;bef&quot;</span>), <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">.c&quot;</span>)</span></code></pre></div>
<pre><code>## [2] │ &lt;a.c&gt;</code></pre>
<p>Например, с помощью этой функции можно убедиться, что вертикальная черта выступает как логический оператор “или”:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="регулярные-выражения.html#cb426-1" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;grey&quot;</span>, <span class="st">&quot;gray&quot;</span>), <span class="st">&quot;gr(e|a)y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;grey&gt;
## [2] │ &lt;gray&gt;</code></pre>
</div>
<div id="str_detect-и-str_count" class="section level2 hasAnchor" number="8.9">
<h2><span class="header-section-number">8.9</span> str_detect() и str_count()<a href="регулярные-выражения.html#str_detect-и-str_count" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Аналогом <code>grepl()</code> в <code>stringr</code> является функция <code>str_detect()</code></p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="регулярные-выражения.html#cb428-1" tabindex="-1"></a><span class="fu">library</span>(rcorpora)</span>
<span id="cb428-2"><a href="регулярные-выражения.html#cb428-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;fruit&quot;</span>)</span>
<span id="cb428-3"><a href="регулярные-выражения.html#cb428-3" tabindex="-1"></a><span class="fu">head</span>(fruit)</span></code></pre></div>
<pre><code>## [1] &quot;apple&quot;       &quot;apricot&quot;     &quot;avocado&quot;     &quot;banana&quot;      &quot;bell pepper&quot;
## [6] &quot;bilberry&quot;</code></pre>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="регулярные-выражения.html#cb430-1" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">head</span>(fruit), <span class="st">&quot;[aeiou]$&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="регулярные-выражения.html#cb432-1" tabindex="-1"></a><span class="co"># какая доля слов заканчивается на гласный?</span></span>
<span id="cb432-2"><a href="регулярные-выражения.html#cb432-2" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_detect</span>(fruit, <span class="st">&quot;[aeiou]$&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 0.35</code></pre>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="регулярные-выражения.html#cb434-1" tabindex="-1"></a><span class="co"># сколько всего слов заканчивается на гласный?</span></span>
<span id="cb434-2"><a href="регулярные-выражения.html#cb434-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(fruit, <span class="st">&quot;[aeiou]$&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 28</code></pre>
<p>Отрицание можно задать двумя способами:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="регулярные-выражения.html#cb436-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;words&quot;</span>)</span>
<span id="cb436-2"><a href="регулярные-выражения.html#cb436-2" tabindex="-1"></a></span>
<span id="cb436-3"><a href="регулярные-выражения.html#cb436-3" tabindex="-1"></a>no_vowels1 <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">str_detect</span>(words, <span class="st">&quot;[aeiou]&quot;</span>) <span class="co"># слова без гласных</span></span>
<span id="cb436-4"><a href="регулярные-выражения.html#cb436-4" tabindex="-1"></a></span>
<span id="cb436-5"><a href="регулярные-выражения.html#cb436-5" tabindex="-1"></a>no_vowels2 <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(words, <span class="st">&quot;^[^aeiou]+$&quot;</span>) <span class="co"># слова без гласных</span></span>
<span id="cb436-6"><a href="регулярные-выражения.html#cb436-6" tabindex="-1"></a></span>
<span id="cb436-7"><a href="регулярные-выражения.html#cb436-7" tabindex="-1"></a><span class="fu">sum</span>(no_vowels1 <span class="sc">!=</span> no_vowels2)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Логический вектор можно использовать для индексирования:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="регулярные-выражения.html#cb438-1" tabindex="-1"></a>words[<span class="sc">!</span><span class="fu">str_detect</span>(words, <span class="st">&quot;[aeiou]&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;by&quot;  &quot;dry&quot; &quot;fly&quot; &quot;mrs&quot; &quot;try&quot; &quot;why&quot;</code></pre>
<p>Эту функцию можно применять вместе с функцией filter() из пакета dplyr:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="регулярные-выражения.html#cb440-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb440-2"><a href="регулярные-выражения.html#cb440-2" tabindex="-1"></a>gods <span class="ot">&lt;-</span> <span class="fu">corpora</span>(<span class="at">which =</span> <span class="st">&quot;mythology/greek_gods&quot;</span>)</span>
<span id="cb440-3"><a href="регулярные-выражения.html#cb440-3" tabindex="-1"></a></span>
<span id="cb440-4"><a href="регулярные-выражения.html#cb440-4" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">god =</span> <span class="fu">as.character</span>(gods<span class="sc">$</span>greek_gods), </span>
<span id="cb440-5"><a href="регулярные-выражения.html#cb440-5" tabindex="-1"></a>             <span class="at">i =</span> <span class="fu">seq_along</span>(god)</span>
<span id="cb440-6"><a href="регулярные-выражения.html#cb440-6" tabindex="-1"></a>             )</span>
<span id="cb440-7"><a href="регулярные-выражения.html#cb440-7" tabindex="-1"></a></span>
<span id="cb440-8"><a href="регулярные-выражения.html#cb440-8" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb440-9"><a href="регулярные-выражения.html#cb440-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(god, <span class="st">&quot;s$&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 18 × 2
##    god            i
##    &lt;chr&gt;      &lt;int&gt;
##  1 Ares           3
##  2 Artemis        4
##  3 Dionysus       7
##  4 Hades          8
##  5 Hephaestus     9
##  6 Hermes        11
##  7 Zeus          14
##  8 Chaos         17
##  9 Chronos       18
## 10 Erebus        19
## 11 Eros          20
## 12 Hypnos        21
## 13 Uranus        22
## 14 Phanes        24
## 15 Pontus        25
## 16 Tartarus      26
## 17 Thanatos      28
## 18 Nemesis       31</code></pre>
<p>Вариацией этой функции является <code>str_count()</code>:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="регулярные-выражения.html#cb442-1" tabindex="-1"></a><span class="fu">str_count</span>(<span class="fu">as.character</span>(gods<span class="sc">$</span>greek_gods), <span class="st">&quot;[Aa]&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 2 0 0 1 1 1 0 1 0 0 1 2 1 0 0 0 0 1 2 1 0 2 3 2 1 0 0</code></pre>
<p>Эту функцию удобно использовать вместе с <code>mutate()</code> из <code>dplyr</code>:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="регулярные-выражения.html#cb444-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb444-2"><a href="регулярные-выражения.html#cb444-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb444-3"><a href="регулярные-выражения.html#cb444-3" tabindex="-1"></a>    <span class="at">vowels =</span> <span class="fu">str_count</span>(god, <span class="st">&quot;[AEIOYaeiou]&quot;</span>),</span>
<span id="cb444-4"><a href="регулярные-выражения.html#cb444-4" tabindex="-1"></a>    <span class="at">consonants =</span> <span class="fu">str_count</span>(god, <span class="st">&quot;[^AEIOYaeiou]&quot;</span>)</span>
<span id="cb444-5"><a href="регулярные-выражения.html#cb444-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 31 × 4
##    god            i vowels consonants
##    &lt;chr&gt;      &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
##  1 Aphrodite      1      4          5
##  2 Apollo         2      3          3
##  3 Ares           3      2          2
##  4 Artemis        4      3          4
##  5 Athena         5      3          3
##  6 Demeter        6      3          4
##  7 Dionysus       7      3          5
##  8 Hades          8      2          3
##  9 Hephaestus     9      4          6
## 10 Hera          10      2          2
## # ℹ 21 more rows</code></pre>
</div>
<div id="str_extract" class="section level2 hasAnchor" number="8.10">
<h2><span class="header-section-number">8.10</span> str_extract()<a href="регулярные-выражения.html#str_extract" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Функция <code>str_extract()</code> извлекает совпадения<a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a>. Рассмотрим ее работу на примере небольшого датасета из пакета <code>stringr</code>.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="регулярные-выражения.html#cb446-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sentences&quot;</span>)</span>
<span id="cb446-2"><a href="регулярные-выражения.html#cb446-2" tabindex="-1"></a><span class="fu">length</span>(sentences)</span></code></pre></div>
<pre><code>## [1] 720</code></pre>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="регулярные-выражения.html#cb448-1" tabindex="-1"></a><span class="fu">head</span>(sentences)</span></code></pre></div>
<pre><code>## [1] &quot;The birch canoe slid on the smooth planks.&quot; 
## [2] &quot;Glue the sheet to the dark blue background.&quot;
## [3] &quot;It&#39;s easy to tell the depth of a well.&quot;     
## [4] &quot;These days a chicken leg is a rare dish.&quot;   
## [5] &quot;Rice is often served in round bowls.&quot;       
## [6] &quot;The juice of lemons makes fine punch.&quot;</code></pre>
<p>Сначала зададим паттерн для поиска.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="регулярные-выражения.html#cb450-1" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; red&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb450-2"><a href="регулярные-выражения.html#cb450-2" tabindex="-1"></a>colour_match <span class="ot">&lt;-</span> <span class="fu">str_c</span>(colours, <span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>)</span>
<span id="cb450-3"><a href="регулярные-выражения.html#cb450-3" tabindex="-1"></a>colour_match</span></code></pre></div>
<pre><code>## [1] &quot; red|orange|yellow|green|blue|purple&quot;</code></pre>
<p>И применим к предложениями. Используем <code>str_extract_all()</code>, т.к. <code>str_extract()</code> возвращает только первое вхождение.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="регулярные-выражения.html#cb452-1" tabindex="-1"></a>has_colour <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(sentences, colour_match)</span>
<span id="cb452-2"><a href="регулярные-выражения.html#cb452-2" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">str_extract_all</span>(has_colour, colour_match)</span>
<span id="cb452-3"><a href="регулярные-выражения.html#cb452-3" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">unlist</span>(matches))</span></code></pre></div>
<pre><code>## [1] &quot;blue&quot;   &quot;blue&quot;   &quot;blue&quot;   &quot;yellow&quot; &quot;green&quot;  &quot; red&quot;</code></pre>
</div>
<div id="str_subset-и-str_match" class="section level2 hasAnchor" number="8.11">
<h2><span class="header-section-number">8.11</span> str_subset() и str_match()<a href="регулярные-выражения.html#str_subset-и-str_match" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Круглые скобки используются для группировки. Например, мы можем задать шаблон для поиска существительного или прилагательного с артиклем.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="регулярные-выражения.html#cb454-1" tabindex="-1"></a>noun <span class="ot">&lt;-</span> <span class="st">&quot;(a|the) ([^ ]+)&quot;</span> <span class="co"># как минимум один непробельный символ после пробела</span></span>
<span id="cb454-2"><a href="регулярные-выражения.html#cb454-2" tabindex="-1"></a></span>
<span id="cb454-3"><a href="регулярные-выражения.html#cb454-3" tabindex="-1"></a>has_noun <span class="ot">&lt;-</span> sentences <span class="sc">%&gt;%</span></span>
<span id="cb454-4"><a href="регулярные-выражения.html#cb454-4" tabindex="-1"></a>  <span class="fu">str_subset</span>(noun) <span class="sc">%&gt;%</span></span>
<span id="cb454-5"><a href="регулярные-выражения.html#cb454-5" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb454-6"><a href="регулярные-выражения.html#cb454-6" tabindex="-1"></a>has_noun</span></code></pre></div>
<pre><code>##  [1] &quot;The birch canoe slid on the smooth planks.&quot;       
##  [2] &quot;Glue the sheet to the dark blue background.&quot;      
##  [3] &quot;It&#39;s easy to tell the depth of a well.&quot;           
##  [4] &quot;These days a chicken leg is a rare dish.&quot;         
##  [5] &quot;The box was thrown beside the parked truck.&quot;      
##  [6] &quot;The boy was there when the sun rose.&quot;             
##  [7] &quot;The source of the huge river is the clear spring.&quot;
##  [8] &quot;Kick the ball straight and follow through.&quot;       
##  [9] &quot;Help the woman get back to her feet.&quot;             
## [10] &quot;A pot of tea helps to pass the evening.&quot;</code></pre>
<p>Дальше можно воспользоваться уже известной функцией <code>str_extract()</code> или применить <code>str_match</code>. Результат будет немного отличаться: вторая функция вернет матрицу, в которой хранится не только сочетание слов, но и каждый компонент отдельно.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="регулярные-выражения.html#cb456-1" tabindex="-1"></a>has_noun <span class="sc">%&gt;%</span> </span>
<span id="cb456-2"><a href="регулярные-выражения.html#cb456-2" tabindex="-1"></a>  <span class="fu">str_extract</span>(noun)</span></code></pre></div>
<pre><code>##  [1] &quot;the smooth&quot; &quot;the sheet&quot;  &quot;the depth&quot;  &quot;a chicken&quot;  &quot;the parked&quot;
##  [6] &quot;the sun&quot;    &quot;the huge&quot;   &quot;the ball&quot;   &quot;the woman&quot;  &quot;a helps&quot;</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="регулярные-выражения.html#cb458-1" tabindex="-1"></a>has_noun <span class="sc">%&gt;%</span> </span>
<span id="cb458-2"><a href="регулярные-выражения.html#cb458-2" tabindex="-1"></a>  <span class="fu">str_match</span>(noun)</span></code></pre></div>
<pre><code>##       [,1]         [,2]  [,3]     
##  [1,] &quot;the smooth&quot; &quot;the&quot; &quot;smooth&quot; 
##  [2,] &quot;the sheet&quot;  &quot;the&quot; &quot;sheet&quot;  
##  [3,] &quot;the depth&quot;  &quot;the&quot; &quot;depth&quot;  
##  [4,] &quot;a chicken&quot;  &quot;a&quot;   &quot;chicken&quot;
##  [5,] &quot;the parked&quot; &quot;the&quot; &quot;parked&quot; 
##  [6,] &quot;the sun&quot;    &quot;the&quot; &quot;sun&quot;    
##  [7,] &quot;the huge&quot;   &quot;the&quot; &quot;huge&quot;   
##  [8,] &quot;the ball&quot;   &quot;the&quot; &quot;ball&quot;   
##  [9,] &quot;the woman&quot;  &quot;the&quot; &quot;woman&quot;  
## [10,] &quot;a helps&quot;    &quot;a&quot;   &quot;helps&quot;</code></pre>
<p>Функция tidyr::extract работает похожим образом, но требует дать имена для каждого элемента группы. Этим удобно пользоваться, если ваши данные хранятся в виде тиббла.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="регулярные-выражения.html#cb460-1" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">sentence =</span> sentences) <span class="sc">%&gt;%</span> </span>
<span id="cb460-2"><a href="регулярные-выражения.html#cb460-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">extract</span>(</span>
<span id="cb460-3"><a href="регулярные-выражения.html#cb460-3" tabindex="-1"></a>    sentence, <span class="fu">c</span>(<span class="st">&quot;article&quot;</span>, <span class="st">&quot;noun&quot;</span>), <span class="st">&quot;(a|the) ([^ ]+)&quot;</span>, </span>
<span id="cb460-4"><a href="регулярные-выражения.html#cb460-4" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb460-5"><a href="регулярные-выражения.html#cb460-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 720 × 3
##    sentence                                    article noun   
##    &lt;chr&gt;                                       &lt;chr&gt;   &lt;chr&gt;  
##  1 The birch canoe slid on the smooth planks.  the     smooth 
##  2 Glue the sheet to the dark blue background. the     sheet  
##  3 It&#39;s easy to tell the depth of a well.      the     depth  
##  4 These days a chicken leg is a rare dish.    a       chicken
##  5 Rice is often served in round bowls.        &lt;NA&gt;    &lt;NA&gt;   
##  6 The juice of lemons makes fine punch.       &lt;NA&gt;    &lt;NA&gt;   
##  7 The box was thrown beside the parked truck. the     parked 
##  8 The hogs were fed chopped corn and garbage. &lt;NA&gt;    &lt;NA&gt;   
##  9 Four hours of steady work faced us.         &lt;NA&gt;    &lt;NA&gt;   
## 10 A large size in stockings is hard to sell.  &lt;NA&gt;    &lt;NA&gt;   
## # ℹ 710 more rows</code></pre>
</div>
<div id="str_replace" class="section level2 hasAnchor" number="8.12">
<h2><span class="header-section-number">8.12</span> str_replace<a href="регулярные-выражения.html#str_replace" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Функции <code>str_replace()</code> и <code>str_replace_all()</code> позволяют заменять совпадения на новые символы.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="регулярные-выражения.html#cb462-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;pear&quot;</span>, <span class="st">&quot;banana&quot;</span>)</span>
<span id="cb462-2"><a href="регулярные-выражения.html#cb462-2" tabindex="-1"></a><span class="fu">str_replace</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;-pple&quot;  &quot;p-ar&quot;   &quot;b-nana&quot;</code></pre>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="регулярные-выражения.html#cb464-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;-ppl-&quot;  &quot;p--r&quot;   &quot;b-n-n-&quot;</code></pre>
<p>Этим можно воспользоваться, если вы хотите, например, удалить из текста все греческие символы. Для стандартного греческого алфавита хватит <code>[Α-Ωα-ω]</code>, но для древнегреческого этого, например, не хватит. Попробуем на отрывке из письма Цицерона Аттику, которое содержит греческий текст.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="регулярные-выражения.html#cb466-1" tabindex="-1"></a>cicero <span class="ot">&lt;-</span> <span class="st">&quot;nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀπεραντολογίας ἀηδοῦς! &quot;</span></span>
<span id="cb466-2"><a href="регулярные-выражения.html#cb466-2" tabindex="-1"></a></span>
<span id="cb466-3"><a href="регулярные-выражения.html#cb466-3" tabindex="-1"></a><span class="fu">str_replace_all</span>(cicero, <span class="st">&quot;[Α-Ωα-ω]&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀί ἀῦ! &quot;</code></pre>
<p>ὢ ἀί ἀῦ! Не все у нас получилось гладко. Попробуем иначе:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="регулярные-выражения.html#cb468-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(cicero, <span class="st">&quot;[\u0370-\u03FF]&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀ ἀῦ! &quot;</code></pre>
<p>Удалилась (буквально была заменена на пустое место) та диакритика, которая есть в новогреческом (ί). Но остались еще буквы со сложной диакритикой, которой современные греки не пользуются.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="регулярные-выражения.html#cb470-1" tabindex="-1"></a>no_greek <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(cicero, <span class="st">&quot;[[\u0370-\u03FF][\U1F00-\U1FFF]]&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb470-2"><a href="регулярные-выражения.html#cb470-2" tabindex="-1"></a>no_greek</span></code></pre></div>
<pre><code>## [1] &quot;nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius.   ! &quot;</code></pre>
<p>! Мы молодцы. Избавились от этого непонятного греческого.</p>
<p>На самом деле, конечно, <code>str_replace</code> хорош тем, что он позволяет производить осмысленные замены. Например, мы можем в оставшемся латинском текст заменить гласные с макроном (черточка, означающая долготу) на обычные гласные.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="регулярные-выражения.html#cb472-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(no_greek, <span class="fu">c</span>(<span class="st">&quot;ā&quot;</span> <span class="ot">=</span> <span class="st">&quot;a&quot;</span>, <span class="st">&quot;ū&quot;</span> <span class="ot">=</span> <span class="st">&quot;u&quot;</span>, <span class="st">&quot;ī&quot;</span> <span class="ot">=</span> <span class="st">&quot;i&quot;</span>, <span class="st">&quot;ō&quot;</span> <span class="ot">=</span> <span class="st">&quot;o&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;nihil hac solitudine iucundius, nisi paulum interpellasset Amyntae filius.   ! &quot;</code></pre>
<p>Красота. О более сложных заменах с перемещением групп можно посмотреть видео <a href="https://vk.com/video-211800158_456239296">здесь</a> и <a href="https://vk.com/video-211800158_456239297">здесь</a>. Это помогает даже в таком скорбном деле, как переоформление библиографии.</p>
</div>
<div id="str_split" class="section level2 hasAnchor" number="8.13">
<h2><span class="header-section-number">8.13</span> str_split<a href="регулярные-выражения.html#str_split" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Функция <code>str_split()</code> помогает разбить текст на предложения, слова или просто на бессмысленные наборы символов. Это важный этап подготовки текста для анализа, и проводится он нередко именно с применением регулярных выражений.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="регулярные-выражения.html#cb474-1" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span></span>
<span id="cb474-2"><a href="регулярные-выражения.html#cb474-2" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb474-3"><a href="регулярные-выражения.html#cb474-3" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;The&quot;     &quot;birch&quot;   &quot;canoe&quot;   &quot;slid&quot;    &quot;on&quot;      &quot;the&quot;     &quot;smooth&quot; 
## [8] &quot;planks.&quot;
## 
## [[2]]
## [1] &quot;Glue&quot;        &quot;the&quot;         &quot;sheet&quot;       &quot;to&quot;          &quot;the&quot;        
## [6] &quot;dark&quot;        &quot;blue&quot;        &quot;background.&quot;</code></pre>
<p>Но можно обойтись и без регулярных выражений.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="регулярные-выражения.html#cb476-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;This is a sentence.  This is another sentence.&quot;</span></span>
<span id="cb476-2"><a href="регулярные-выражения.html#cb476-2" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;word&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: `str_view()` was deprecated in stringr 1.5.0.
## ℹ Please use `str_view_all()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<pre><code>## [1] │ &lt;This&gt; &lt;is&gt; &lt;a&gt; &lt;sentence&gt;.  &lt;This&gt; &lt;is&gt; &lt;another&gt; &lt;sentence&gt;.</code></pre>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="регулярные-выражения.html#cb479-1" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;sentence&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;This is a sentence.  &gt;&lt;This is another sentence.&gt;</code></pre>
<p>Очень удобно, но убедитесь, что в вашем языке границы слов и предложения выглядят как у людей. С древнегреческим эта штука не справится (как делить на предложения греческие и латинские тексты, я рассказывала <a href="https://vk.com/video-211800158_456239226">здесь</a>):</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="регулярные-выражения.html#cb481-1" tabindex="-1"></a>apology <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;νῦν δ&#39; ἐπειδὴ ἀνθρώπω ἐστόν, τίνα αὐτοῖν ἐν νῷ ἔχεις ἐπιστάτην λαβεῖν; τίς τῆς τοιαύτης ἀρετῆς, τῆς ἀνθρωπίνης τε καὶ πολιτικῆς, ἐπιστήμων ἐστίν; οἶμαι γάρ σε ἐσκέφθαι διὰ τὴν τῶν ὑέων κτῆσιν. ἔστιν τις,” ἔφην ἐγώ, “ἢ οὔ;” “Πάνυ γε,” ἦ δ&#39; ὅς. “Τίς,” ἦν δ&#39; ἐγώ, “καὶ ποδαπός, καὶ πόσου διδάσκει;&quot;</span>)</span>
<span id="cb481-2"><a href="регулярные-выражения.html#cb481-2" tabindex="-1"></a></span>
<span id="cb481-3"><a href="регулярные-выражения.html#cb481-3" tabindex="-1"></a><span class="fu">str_view_all</span>(apology, <span class="fu">boundary</span>(<span class="st">&quot;sentence&quot;</span>))</span></code></pre></div>
<pre><code>## [1] │ &lt;νῦν δ&#39; ἐπειδὴ ἀνθρώπω ἐστόν, τίνα αὐτοῖν ἐν νῷ ἔχεις ἐπιστάτην λαβεῖν; τίς τῆς τοιαύτης ἀρετῆς, τῆς ἀνθρωπίνης τε καὶ πολιτικῆς, ἐπιστήμων ἐστίν; οἶμαι γάρ σε ἐσκέφθαι διὰ τὴν τῶν ὑέων κτῆσιν. ἔστιν τις,” ἔφην ἐγώ, “ἢ οὔ;” “Πάνυ γε,” ἦ δ&#39; ὅς. &gt;&lt;“Τίς,” ἦν δ&#39; ἐγώ, “καὶ ποδαπός, καὶ πόσου διδάσκει;&gt;</code></pre>
<p>Полный крах 💩</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="33">
<li id="fn33"><p><a href="https://r4ds.had.co.nz/strings.html" class="uri">https://r4ds.had.co.nz/strings.html</a><a href="регулярные-выражения.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="uri">https://stringr.tidyverse.org/reference/str_sub.html</a><a href="регулярные-выражения.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p><a href="https://r4ds.had.co.nz/strings.html#extract-matches" class="uri">https://r4ds.had.co.nz/strings.html#extract-matches</a><a href="регулярные-выражения.html#fnref35" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="воспроизводимые-исследования.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="веб-скрапинг.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-regex.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
