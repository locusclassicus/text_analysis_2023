<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 14 Латентно-семантический анализ (Часть 1) | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 14 Латентно-семантический анализ (Часть 1) | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 14 Латентно-семантический анализ (Часть 1) | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-08-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="тематическое-моделирование.html"/>
<link rel="next" href="поисковик-на-основе-lsa.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.1</b> Что такое R?</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.2</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#если-не-хватает-пакетов"><i class="fa fa-check"></i><b>2.3</b> Если не хватает пакетов</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-мы-не-будем-делать"><i class="fa fa-check"></i><b>2.5</b> Что мы (не) будем делать?</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.6</b> RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.7</b> Установка</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.8</b> Начало работы</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.9</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.10</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.11</b> Векторы</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#шорткаты"><i class="fa fa-check"></i><b>2.15</b> Шорткаты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.4</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-базовый-r-и-tidyverse"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: базовый R и tidyverse</a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a></li>
<li class="chapter" data-level="5.8" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#пример-итерации"><i class="fa fa-check"></i><b>5.8</b> Пример итерации</a></li>
<li class="chapter" data-level="5.9" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#furrr"><i class="fa fa-check"></i><b>5.9</b> Furrr</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-файлов-из-интернета"><i class="fa fa-check"></i><b>6.2</b> Чтение файлов из интернета</a></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-локальных-файлов"><i class="fa fa-check"></i><b>6.3</b> Чтение локальных файлов</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.3.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.3.2</b> xls и xlsx</a></li>
<li class="chapter" data-level="6.3.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.3.3</b> txt</a></li>
<li class="chapter" data-level="6.3.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.3.4</b> doc</a></li>
<li class="chapter" data-level="6.3.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.3.5</b> pdf</a></li>
<li class="chapter" data-level="6.3.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.3.6</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml-и-html"><i class="fa fa-check"></i><b>6.4</b> xml и html</a></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5</b> json</a></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
<li class="chapter" data-level="6.7" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rperseus"><i class="fa fa-check"></i><b>6.7</b> RPerseus</a></li>
<li class="chapter" data-level="6.8" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-нескольких-файлов"><i class="fa fa-check"></i><b>6.8</b> Чтение нескольких файлов</a></li>
<li class="chapter" data-level="6.9" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#экспорт"><i class="fa fa-check"></i><b>6.9</b> Экспорт</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rdata"><i class="fa fa-check"></i><b>6.9.1</b> Rdata</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html"><i class="fa fa-check"></i><b>9</b> Веб-скрапинг</a>
<ul>
<li class="chapter" data-level="9.1" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#структура-html"><i class="fa fa-check"></i><b>9.1</b> Структура html</a></li>
<li class="chapter" data-level="9.2" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#каскадные-таблицы-стилей"><i class="fa fa-check"></i><b>9.2</b> Каскадные таблицы стилей</a></li>
<li class="chapter" data-level="9.3" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-данных"><i class="fa fa-check"></i><b>9.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="9.4" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-в-тиббл"><i class="fa fa-check"></i><b>9.4</b> Извлечение в тиббл</a></li>
<li class="chapter" data-level="9.5" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#скрапим-телеграм-канал"><i class="fa fa-check"></i><b>9.5</b> Скрапим телеграм-канал</a></li>
<li class="chapter" data-level="9.6" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#эмотиконы"><i class="fa fa-check"></i><b>9.6</b> Эмотиконы</a></li>
<li class="chapter" data-level="9.7" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#рутинная-уборка"><i class="fa fa-check"></i><b>9.7</b> Рутинная уборка</a></li>
<li class="chapter" data-level="9.8" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#лемматизация"><i class="fa fa-check"></i><b>9.8</b> Лемматизация</a></li>
<li class="chapter" data-level="9.9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#таблицы-html"><i class="fa fa-check"></i><b>9.9</b> Таблицы html</a></li>
<li class="chapter" data-level="9.10" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#wikisource"><i class="fa fa-check"></i><b>9.10</b> Wikisource</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>10</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="10.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>10.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="10.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>10.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="10.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>10.3</b> Скипграмы</a></li>
<li class="chapter" data-level="10.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>10.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="10.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>10.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="10.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>10.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="10.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>10.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="10.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>10.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html"><i class="fa fa-check"></i><b>11</b> Распределения слов и анализ частотностей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#извлечение-источников"><i class="fa fa-check"></i><b>11.1</b> Извлечение источников</a></li>
<li class="chapter" data-level="11.2" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#подготовка-источников"><i class="fa fa-check"></i><b>11.2</b> Подготовка источников</a></li>
<li class="chapter" data-level="11.3" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#токенизация"><i class="fa fa-check"></i><b>11.3</b> Токенизация</a></li>
<li class="chapter" data-level="11.4" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#cтоп-слова"><i class="fa fa-check"></i><b>11.4</b> Cтоп-слова</a></li>
<li class="chapter" data-level="11.5" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#абсолютная-частотность"><i class="fa fa-check"></i><b>11.5</b> Абсолютная частотность</a></li>
<li class="chapter" data-level="11.6" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#стемминг"><i class="fa fa-check"></i><b>11.6</b> Стемминг</a></li>
<li class="chapter" data-level="11.7" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#относительная-частотность"><i class="fa fa-check"></i><b>11.7</b> Относительная частотность</a></li>
<li class="chapter" data-level="11.8" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#распределения-слов-токенов"><i class="fa fa-check"></i><b>11.8</b> Распределения слов (токенов)</a></li>
<li class="chapter" data-level="11.9" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#закон-ципфа"><i class="fa fa-check"></i><b>11.9</b> Закон Ципфа</a></li>
<li class="chapter" data-level="11.10" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#ttr-type-token-ratio"><i class="fa fa-check"></i><b>11.10</b> TTR (type-token ratio)</a></li>
<li class="chapter" data-level="11.11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#tf-idf"><i class="fa fa-check"></i><b>11.11</b> TF-IDF</a></li>
<li class="chapter" data-level="11.12" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#сравнение-при-помощи-диаграммы-рассеяния"><i class="fa fa-check"></i><b>11.12</b> Сравнение при помощи диаграммы рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>12</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="12.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>12.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="12.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>12.2</b> Подходы</a></li>
<li class="chapter" data-level="12.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>12.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="12.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>12.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>12.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="12.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>12.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="12.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>12.4.3</b> AFINN</a></li>
<li class="chapter" data-level="12.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>12.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>12.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="12.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подготовка-текста"><i class="fa fa-check"></i><b>12.6</b> Подготовка текста</a></li>
<li class="chapter" data-level="12.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#модификация-лексикона"><i class="fa fa-check"></i><b>12.7</b> Модификация лексикона</a></li>
<li class="chapter" data-level="12.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#соединение-лексикона-и-текста"><i class="fa fa-check"></i><b>12.8</b> Соединение лексикона и текста</a></li>
<li class="chapter" data-level="12.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-на-оси-времени"><i class="fa fa-check"></i><b>12.9</b> Тональность на оси времени</a></li>
<li class="chapter" data-level="12.10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#для-других-языков"><i class="fa fa-check"></i><b>12.10</b> Для других языков</a></li>
<li class="chapter" data-level="12.11" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#виды-эмоций"><i class="fa fa-check"></i><b>12.11</b> Виды эмоций</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html"><i class="fa fa-check"></i><b>13</b> Тематическое моделирование</a>
<ul>
<li class="chapter" data-level="13.1" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#что-такое-lda"><i class="fa fa-check"></i><b>13.1</b> Что такое LDA</a></li>
<li class="chapter" data-level="13.2" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределение-дирихле"><i class="fa fa-check"></i><b>13.2</b> Распределение Дирихле</a></li>
<li class="chapter" data-level="13.3" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#подтоговка-данных"><i class="fa fa-check"></i><b>13.3</b> Подтоговка данных</a></li>
<li class="chapter" data-level="13.4" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#матрица-встречаемости"><i class="fa fa-check"></i><b>13.4</b> Матрица встречаемости</a></li>
<li class="chapter" data-level="13.5" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#число-тем"><i class="fa fa-check"></i><b>13.5</b> Число тем</a></li>
<li class="chapter" data-level="13.6" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#модель-lda"><i class="fa fa-check"></i><b>13.6</b> Модель LDA</a></li>
<li class="chapter" data-level="13.7" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#слова-и-темы"><i class="fa fa-check"></i><b>13.7</b> Слова и темы</a></li>
<li class="chapter" data-level="13.8" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#сравнение-топиков"><i class="fa fa-check"></i><b>13.8</b> Сравнение топиков</a></li>
<li class="chapter" data-level="13.9" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#темы-и-документы"><i class="fa fa-check"></i><b>13.9</b> Темы и документы</a></li>
<li class="chapter" data-level="13.10" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределения-вероятности-для-топиков"><i class="fa fa-check"></i><b>13.10</b> Распределения вероятности для топиков</a></li>
<li class="chapter" data-level="13.11" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#интерактивные-визуализации"><i class="fa fa-check"></i><b>13.11</b> Интерактивные визуализации</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html"><i class="fa fa-check"></i><b>14</b> Латентно-семантический анализ (Часть 1)</a>
<ul>
<li class="chapter" data-level="14.1" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#что-это-такое"><i class="fa fa-check"></i><b>14.1</b> Что это такое</a></li>
<li class="chapter" data-level="14.2" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#векторное-представление-слов"><i class="fa fa-check"></i><b>14.2</b> Векторное представление слов</a></li>
<li class="chapter" data-level="14.3" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#сингулярное-разложение-матрицы"><i class="fa fa-check"></i><b>14.3</b> Сингулярное разложение матрицы</a></li>
<li class="chapter" data-level="14.4" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#простой-пример"><i class="fa fa-check"></i><b>14.4</b> Простой пример</a></li>
<li class="chapter" data-level="14.5" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#векторы-слов"><i class="fa fa-check"></i><b>14.5</b> Векторы слов</a></li>
<li class="chapter" data-level="14.6" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#векторы-документов-опрятно"><i class="fa fa-check"></i><b>14.6</b> Векторы документов: опрятно</a></li>
<li class="chapter" data-level="14.7" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#пакет-lsa"><i class="fa fa-check"></i><b>14.7</b> Пакет LSA</a></li>
<li class="chapter" data-level="14.8" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#визуализации-топиков"><i class="fa fa-check"></i><b>14.8</b> Визуализации топиков</a></li>
<li class="chapter" data-level="14.9" data-path="латентно-семантический-анализ-часть-1.html"><a href="латентно-семантический-анализ-часть-1.html#пакет-textminer"><i class="fa fa-check"></i><b>14.9</b> Пакет TextmineR</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html"><i class="fa fa-check"></i><b>15</b> Поисковик на основе LSA</a>
<ul>
<li class="chapter" data-level="15.1" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html#подготовка-данных"><i class="fa fa-check"></i><b>15.1</b> Подготовка данных</a></li>
<li class="chapter" data-level="15.2" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html#эмбеддинги-слов"><i class="fa fa-check"></i><b>15.2</b> Эмбеддинги слов</a></li>
<li class="chapter" data-level="15.3" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html#эмбеддинги-документов"><i class="fa fa-check"></i><b>15.3</b> Эмбеддинги документов</a></li>
<li class="chapter" data-level="15.4" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html#документ-по-запросу-способ-1"><i class="fa fa-check"></i><b>15.4</b> Документ по запросу: способ 1</a></li>
<li class="chapter" data-level="15.5" data-path="поисковик-на-основе-lsa.html"><a href="поисковик-на-основе-lsa.html#документ-по-запросу-способ-2"><i class="fa fa-check"></i><b>15.5</b> Документ по запросу: способ 2</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="кластеризация.html"><a href="кластеризация.html"><i class="fa fa-check"></i><b>16</b> Кластеризация</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="латентно-семантический-анализ-часть-1" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Тема 14</span> Латентно-семантический анализ (Часть 1)<a href="латентно-семантический-анализ-часть-1.html#латентно-семантический-анализ-часть-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="что-это-такое" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Что это такое<a href="латентно-семантический-анализ-часть-1.html#что-это-такое" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>В этом уроке речь пойдет о таком методе <strong>тематического моделирования</strong>, как <strong>латентно-семантический анализ</strong>, или LSA (в области информационного поиска называемый также LSI, Latent Semantic Indexing). Как и LDA, это метод метод обработки информации на естественном языке, который позволяет находить взаимосвязь между коллекцией документов и встречающимися в них терминами за счет сопоставления этих документов и терминов с некоторыми <strong>темами</strong>.</p>
<p>Слово “скрытый” в названии указывает на то, что <strong>семантические взаимосвязи</strong> между документами и терминами, как правило, заранее не известны. В исходной термдокументной матрице, которую мы передаем алгоритму, не видно закономерностей. Как раз задача аналитика – их обнаружить, сгруппировав по темам, с одной стороны, термины, а с другой – документы.</p>
<p>Создатели метода называют LSA “теорией смысла” и видят в нем ответ на вопрос о том, как носители языка приходят к пониманию смысла. Как вообще машина может обнаружить “близкие” слова и документы? В 1957 британский лингвист Джон Руперт Фёрс сформулировал это так: you shall know a word by the company it keeps. Томас Ландауер, один из создателей LSA, обобщает этот подход в статье “LSA as a theory of meaning”: синтаксические связи переоценены, и смысл параграфов и целых текстов – это лишь функция от смысла отдельных слов. Смысл – это не статическая константа, а динамическое отношение, или система отношений. На уровне реализации действительно LSA показал способность справляться с задачами, которые до середины 90-х считались прерогативой живого человека. Например, с проблемами полисемии и синонимии.</p>
<p><img src="https://sysblok.ru/wp-content/uploads/2019/07/image16.gif" /></p>
</div>
<div id="векторное-представление-слов" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Векторное представление слов<a href="латентно-семантический-анализ-часть-1.html#векторное-представление-слов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Мы можем представить термин в виде вектора, который хранит информацию о его встречаемости в документах. Каждый элемент вектора будет координатой в многомерном пространстве. В англоязычной литературе векторные представления называют <strong>эмбеддингами</strong> (embedding, т.е. «вложение»). Представляя объект в виде вектора, мы как бы «вкладываем» его в векторное пространство, где действуют геометрические законы.</p>
<p>Дальше дело за вычислением <strong>расстояния</strong> (или сходства) между векторами – это уже задача из области линейной алгебры. Как правило, в алгоритме LSA используется <strong>косинусное сходство</strong> (о том, что это такое, см. видео: <a href="https://vk.com/video-211800158_456239261">часть 1</a> и <a href="https://vk.com/video-211800158_456239263">часть 2</a>).</p>
<p><img src="images/dist.png" /></p>
<p>Трудность в том, что даже для небольших коллекций документов термдокументная матрица является очень <strong>разреженной</strong> (даже в небольшом примере из предыдущего урока разреженность составляла почти 100%). Чем больше ваш корпус, тем более разреженной будет матрица: это естественно, поскольку в каждом документе встречается лишь небольшая часть всех слов.</p>
<p>Любые действия над такими матрицами требуют больших вычислительных затрат, при этом результат не обязательно будет точным из-за синонимии и полисемии: слово apple можно встретить как в плодово-овощной рубрике, так и в заметке об IT. Справиться с этим помогает метод LSA, в основе которого лежит <strong>снижение размерности</strong> исходной матрицы.</p>
</div>
<div id="сингулярное-разложение-матрицы" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Сингулярное разложение матрицы<a href="латентно-семантический-анализ-часть-1.html#сингулярное-разложение-матрицы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Мы можем “спроецировать” исходную матрицу <span class="math inline">\(C_r\)</span> в пространство меньшей размерности. Если r – ранг исходной матрицы, а k – ранг новой матрицы, при этом k значительно ниже r, то матрица <span class="math inline">\(C_k\)</span> называется <strong>малоранговой аппроксимацией</strong>.</p>
<div class="infobox">
<p>Рангом системы строк (столбцов) матрицы A с m строками и n столбцами называется максимальное число линейно независимых строк (столбцов). Несколько строк (столбцов) называются линейно независимыми, если ни одна из них не выражается линейно через другие. Ранг системы строк всегда равен рангу системы столбцов, и это число называется рангом матрицы.</p>
</div>
<p>Для ее получения новой матрицы применяется трехэтапная процедура:</p>
<ol style="list-style-type: decimal">
<li><p>для <span class="math inline">\(C_r\)</span> строится ее <strong>сингулярное разложение</strong> (SVD (Singular Value Decomposition) по формуле: <span class="math inline">\(C = UΣV^t\)</span> (подробнее см. <a href="https://vk.com/video-211800158_456239325">видео</a>);</p></li>
<li><p>по матрице Σ строится <span class="math inline">\(Σ_k\)</span>: <span class="math inline">\(r - k\)</span> наименьших сингулярных значений на диагонали матрицы заменяются нулями;</p></li>
<li><p>вычисляется новая матрица <span class="math inline">\(C_k = UΣ_kV^t\)</span>.</p></li>
</ol>
<p>Теперь подробнее.</p>
<ol style="list-style-type: decimal">
<li>Матричное разложение, или <strong>факторизация</strong> – представление матрицы в виде произведения нескольких матриц. Сингулярное разложение (SVD) матрицы A равно <span class="math inline">\(A=U⋅Σ⋅V^t\)</span>, где</li>
</ol>
<ul>
<li>U — матрица левых сингулярных векторов матрицы A,</li>
<li>Σ — диагональная матрица сингулярных чисел матрицы A,</li>
<li>V — матрица правых сингулярных векторов матрицы A.</li>
</ul>
<p><img src="https://www.askpython.com/wp-content/uploads/2020/11/SVD-1.jpg.webp" /></p>
<p>Строки матрицы U соответствуют словам; а в V^t столбцы соответствуют отдельным документам. Следовательно, первая строка матрицы U показывает, в каких документах встречается слово, а первый столбец V^T показывает, какие темы встречаются в документе.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Сингулярные значения</strong> в диагональной матрице всегда упорядочены по убыванию, и можно без больших потерь отсечь малоинформативные ряды или столбцы. Такое SVD называется <strong>усеченным</strong>.</li>
</ol>
<p><strong>Сингулярные векторы</strong> (они выделены цветом) в матрицах U и V соответствуют темам в тексте, которых в общей сложности k штук. Чему равно k — человек задает вручную при вычислении разложения. Математически это выражается в том, что в диагональной матрице остается k самых больших сингулярных чисел, а остальные становятся нулями. При перемножении матриц это приведет к отсечению <span class="math inline">\(r - k\)</span> столбцов в U и <span class="math inline">\(r - k\)</span> рядов в <span class="math inline">\(V^t\)</span>. (<a href="https://sysblok.ru/knowhow/kak-ponjat-o-chem-tekst-ne-chitaja-ego/">Подробнее</a>).</p>
<ol start="3" style="list-style-type: decimal">
<li>Умножение U на Σ дает векторное представление слов; умножение V на Σ– векторное представление документов (Dian I. Martin. Mathematical Foundations Behind Latent Semantic Analysis). Объединяя пространство слов с пространством документов, можно находить ближайшие документы по поисковому запросу (который в рамках этой модели рассматривается как “псевдодокумент”).</li>
</ol>
</div>
<div id="простой-пример" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Простой пример<a href="латентно-семантический-анализ-часть-1.html#простой-пример" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Все это будет понятнее на простом примере. (<a href="https://www.engr.uvic.ca/~seng474/svd.pdf">отсюда</a>).</p>
<p>Допустим, у нас есть пять документов.</p>
<p><em>d1 : Romeo and Juliet.</em></p>
<p><em>d2 : Juliet: O happy dagger!</em></p>
<p><em>d3 : Romeo died by dagger”.</em></p>
<p><em>d4 : “Live free or die”, that’s the New-Hampshire’s motto.</em></p>
<p><em>d5 : Did you know, New Hampshire is in New-England.</em></p>
<p>Поисковый запрос: <em>dies</em>, <em>dagger</em>. Очевидно, ближе всего к запросу d3, т.к. он содержит оба слова. Но какой документ должен быть следующим? И d2, d4 содержат по одному слову из запроса, а явно релевантный d1 – ни одного.</p>
<p>Составим термдокументную матрицу.</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="латентно-семантический-анализ-часть-1.html#cb770-1" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">d1 =</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">6</span>)),</span>
<span id="cb770-2"><a href="латентно-семантический-анализ-часть-1.html#cb770-2" tabindex="-1"></a>                <span class="at">d2 =</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>)),</span>
<span id="cb770-3"><a href="латентно-семантический-анализ-часть-1.html#cb770-3" tabindex="-1"></a>                <span class="at">d3 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb770-4"><a href="латентно-семантический-анализ-часть-1.html#cb770-4" tabindex="-1"></a>                <span class="at">d4 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>)),</span>
<span id="cb770-5"><a href="латентно-семантический-анализ-часть-1.html#cb770-5" tabindex="-1"></a>                <span class="at">d5 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>)))</span>
<span id="cb770-6"><a href="латентно-семантический-анализ-часть-1.html#cb770-6" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;romeo&quot;</span>, <span class="st">&quot;juliet&quot;</span>, <span class="st">&quot;happy&quot;</span>, <span class="st">&quot;dagger&quot;</span>, <span class="st">&quot;live&quot;</span>,</span>
<span id="cb770-7"><a href="латентно-семантический-анализ-часть-1.html#cb770-7" tabindex="-1"></a>                  <span class="st">&quot;die&quot;</span>, <span class="st">&quot;free&quot;</span>, <span class="st">&quot;new-hampshire&quot;</span>)             </span>
<span id="cb770-8"><a href="латентно-семантический-анализ-часть-1.html#cb770-8" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##               d1 d2 d3 d4 d5
## romeo          1  0  1  0  0
## juliet         1  1  0  0  0
## happy          0  1  0  0  0
## dagger         0  1  1  0  0
## live           0  0  0  1  0
## die            0  0  1  1  0
## free           0  0  0  1  0
## new-hampshire  0  0  0  1  1</code></pre>
<p>И применим SVD. В R для этого есть специальная функция (дальше мы увидим, что то же самое делают и другие функции).</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="латентно-семантический-анализ-часть-1.html#cb772-1" tabindex="-1"></a>result <span class="ot">=</span> <span class="fu">svd</span>(df)</span>
<span id="cb772-2"><a href="латентно-семантический-анализ-часть-1.html#cb772-2" tabindex="-1"></a>S <span class="ot">=</span> <span class="fu">round</span>((<span class="fu">diag</span>(result<span class="sc">$</span>d, <span class="at">nrow =</span> <span class="fu">length</span>(result<span class="sc">$</span>d))), <span class="dv">3</span>)</span>
<span id="cb772-3"><a href="латентно-семантический-анализ-часть-1.html#cb772-3" tabindex="-1"></a></span>
<span id="cb772-4"><a href="латентно-семантический-анализ-часть-1.html#cb772-4" tabindex="-1"></a>S</span></code></pre></div>
<pre><code>##       [,1] [,2]  [,3]  [,4]  [,5]
## [1,] 2.285 0.00 0.000 0.000 0.000
## [2,] 0.000 2.01 0.000 0.000 0.000
## [3,] 0.000 0.00 1.361 0.000 0.000
## [4,] 0.000 0.00 0.000 1.118 0.000
## [5,] 0.000 0.00 0.000 0.000 0.797</code></pre>
<p>Сингулярные значения меньше двух убираем, остается два сингулярных значения.</p>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="латентно-семантический-анализ-часть-1.html#cb774-1" tabindex="-1"></a>S_truncated <span class="ot">&lt;-</span> S[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb774-2"><a href="латентно-семантический-анализ-часть-1.html#cb774-2" tabindex="-1"></a></span>
<span id="cb774-3"><a href="латентно-семантический-анализ-часть-1.html#cb774-3" tabindex="-1"></a>S_truncated</span></code></pre></div>
<pre><code>##       [,1] [,2]
## [1,] 2.285 0.00
## [2,] 0.000 2.01</code></pre>
<p>Матрица левых сингулярных векторов выглядит так:</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="латентно-семантический-анализ-часть-1.html#cb776-1" tabindex="-1"></a>U <span class="ot">&lt;-</span> <span class="fu">round</span>((result<span class="sc">$</span>u), <span class="dv">3</span>)</span>
<span id="cb776-2"><a href="латентно-семантический-анализ-часть-1.html#cb776-2" tabindex="-1"></a></span>
<span id="cb776-3"><a href="латентно-семантический-анализ-часть-1.html#cb776-3" tabindex="-1"></a>U</span></code></pre></div>
<pre><code>##        [,1]   [,2]   [,3]   [,4]   [,5]
## [1,] -0.396  0.280 -0.571  0.450 -0.102
## [2,] -0.314  0.450  0.411  0.513  0.204
## [3,] -0.178  0.269  0.497 -0.257  0.043
## [4,] -0.438  0.369  0.013 -0.577 -0.220
## [5,] -0.264 -0.346  0.146  0.047  0.417
## [6,] -0.524 -0.246 -0.339 -0.273  0.155
## [7,] -0.264 -0.346  0.146  0.047  0.417
## [8,] -0.326 -0.460  0.317  0.237 -0.725</code></pre>
<p>От нее отсекаем все столбцы, кроме первых двух:</p>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="латентно-семантический-анализ-часть-1.html#cb778-1" tabindex="-1"></a>U_truncated <span class="ot">&lt;-</span> U[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb778-2"><a href="латентно-семантический-анализ-часть-1.html#cb778-2" tabindex="-1"></a></span>
<span id="cb778-3"><a href="латентно-семантический-анализ-часть-1.html#cb778-3" tabindex="-1"></a>U_truncated</span></code></pre></div>
<pre><code>##        [,1]   [,2]
## [1,] -0.396  0.280
## [2,] -0.314  0.450
## [3,] -0.178  0.269
## [4,] -0.438  0.369
## [5,] -0.264 -0.346
## [6,] -0.524 -0.246
## [7,] -0.264 -0.346
## [8,] -0.326 -0.460</code></pre>
<p>Матрица правых сингулярных векторов тоже усекается; не забудем ее транспонировать.</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="латентно-семантический-анализ-часть-1.html#cb780-1" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">round</span>((result<span class="sc">$</span>v), <span class="dv">3</span>)</span>
<span id="cb780-2"><a href="латентно-семантический-анализ-часть-1.html#cb780-2" tabindex="-1"></a></span>
<span id="cb780-3"><a href="латентно-семантический-анализ-часть-1.html#cb780-3" tabindex="-1"></a>Vt_truncated <span class="ot">&lt;-</span> <span class="fu">t</span>(V[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb780-4"><a href="латентно-семантический-анализ-часть-1.html#cb780-4" tabindex="-1"></a></span>
<span id="cb780-5"><a href="латентно-семантический-анализ-часть-1.html#cb780-5" tabindex="-1"></a>Vt_truncated</span></code></pre></div>
<pre><code>##        [,1]   [,2]   [,3]   [,4]   [,5]
## [1,] -0.311 -0.407 -0.594 -0.603 -0.143
## [2,]  0.363  0.541  0.200 -0.695 -0.229</code></pre>
<p>Каждый столбец в этой матрице соответствует одному документу.</p>
<p>Умножим U и Vt на S_truncated (усеченную сигму).</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb782-1"><a href="латентно-семантический-анализ-часть-1.html#cb782-1" tabindex="-1"></a><span class="co"># эмбеддинги слов</span></span>
<span id="cb782-2"><a href="латентно-семантический-анализ-часть-1.html#cb782-2" tabindex="-1"></a>word_emb <span class="ot">&lt;-</span> <span class="fu">round</span>((U_truncated <span class="sc">%*%</span> S_truncated), <span class="dv">3</span>)</span>
<span id="cb782-3"><a href="латентно-семантический-анализ-часть-1.html#cb782-3" tabindex="-1"></a></span>
<span id="cb782-4"><a href="латентно-семантический-анализ-часть-1.html#cb782-4" tabindex="-1"></a><span class="fu">rownames</span>(word_emb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;romeo&quot;</span>, <span class="st">&quot;juliet&quot;</span>, <span class="st">&quot;happy&quot;</span>, <span class="st">&quot;dagger&quot;</span>, <span class="st">&quot;live&quot;</span>, <span class="st">&quot;die&quot;</span>, <span class="st">&quot;free&quot;</span>, <span class="st">&quot;new-hampshire&quot;</span>) </span>
<span id="cb782-5"><a href="латентно-семантический-анализ-часть-1.html#cb782-5" tabindex="-1"></a></span>
<span id="cb782-6"><a href="латентно-семантический-анализ-часть-1.html#cb782-6" tabindex="-1"></a>word_emb</span></code></pre></div>
<pre><code>##                 [,1]   [,2]
## romeo         -0.905  0.563
## juliet        -0.717  0.904
## happy         -0.407  0.541
## dagger        -1.001  0.742
## live          -0.603 -0.695
## die           -1.197 -0.494
## free          -0.603 -0.695
## new-hampshire -0.745 -0.925</code></pre>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="латентно-семантический-анализ-часть-1.html#cb784-1" tabindex="-1"></a><span class="co"># эмбеддинги документов</span></span>
<span id="cb784-2"><a href="латентно-семантический-анализ-часть-1.html#cb784-2" tabindex="-1"></a>doc_emb <span class="ot">&lt;-</span> <span class="fu">round</span>((S_truncated <span class="sc">%*%</span> Vt_truncated), <span class="dv">3</span>)</span>
<span id="cb784-3"><a href="латентно-семантический-анализ-часть-1.html#cb784-3" tabindex="-1"></a><span class="fu">colnames</span>(doc_emb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;d1&quot;</span>, <span class="st">&quot;d2&quot;</span>, <span class="st">&quot;d3&quot;</span>, <span class="st">&quot;d4&quot;</span>, <span class="st">&quot;d5&quot;</span>)</span>
<span id="cb784-4"><a href="латентно-семантический-анализ-часть-1.html#cb784-4" tabindex="-1"></a></span>
<span id="cb784-5"><a href="латентно-семантический-анализ-часть-1.html#cb784-5" tabindex="-1"></a>doc_emb </span></code></pre></div>
<pre><code>##          d1     d2     d3     d4     d5
## [1,] -0.711 -0.930 -1.357 -1.378 -0.327
## [2,]  0.730  1.087  0.402 -1.397 -0.460</code></pre>
<p>Или, что то же самое:</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="латентно-семантический-анализ-часть-1.html#cb786-1" tabindex="-1"></a>V[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">%*%</span> S_truncated</span></code></pre></div>
<pre><code>##           [,1]     [,2]
## [1,] -0.710635  0.72963
## [2,] -0.929995  1.08741
## [3,] -1.357290  0.40200
## [4,] -1.377855 -1.39695
## [5,] -0.326755 -0.46029</code></pre>
<div class="infobox">
<p>Умножить матрицу А на В можно лишь в том случае, если число рядов в В равно числу столбцов в А 🤯🤯🤯</p>
</div>
<p>Координаты поискового запроса (который рассматриваем как псевдодокумент) считаем как среднее арифметическое координат:</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb788-1"><a href="латентно-семантический-анализ-часть-1.html#cb788-1" tabindex="-1"></a>q <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;die&quot;</span>, <span class="st">&quot;dagger&quot;</span>)</span>
<span id="cb788-2"><a href="латентно-семантический-анализ-часть-1.html#cb788-2" tabindex="-1"></a>q_doc <span class="ot">&lt;-</span>  <span class="fu">colSums</span>(word_emb[<span class="fu">rownames</span>(word_emb) <span class="sc">%in%</span> q, ]) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb788-3"><a href="латентно-семантический-анализ-часть-1.html#cb788-3" tabindex="-1"></a>q_doc</span></code></pre></div>
<pre><code>## [1] -1.099  0.124</code></pre>
<p>Объединив все в единый датафрейм, можем визуализировать.</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="латентно-семантический-анализ-часть-1.html#cb790-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb790-2"><a href="латентно-семантический-анализ-часть-1.html#cb790-2" tabindex="-1"></a></span>
<span id="cb790-3"><a href="латентно-семантический-анализ-часть-1.html#cb790-3" tabindex="-1"></a>all_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rbind</span>(word_emb, <span class="fu">t</span>(doc_emb), q_doc))</span>
<span id="cb790-4"><a href="латентно-семантический-анализ-часть-1.html#cb790-4" tabindex="-1"></a></span>
<span id="cb790-5"><a href="латентно-семантический-анализ-часть-1.html#cb790-5" tabindex="-1"></a>all_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(all_df, <span class="at">rownames =</span> <span class="st">&quot;item&quot;</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb790-6"><a href="латентно-семантический-анализ-часть-1.html#cb790-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;word&quot;</span>, <span class="dv">8</span>), <span class="fu">rep</span>(<span class="st">&quot;doc&quot;</span>, <span class="dv">6</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb790-7"><a href="латентно-семантический-анализ-часть-1.html#cb790-7" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">dim1 =</span> V1, <span class="at">dim2 =</span> V2)</span>
<span id="cb790-8"><a href="латентно-семантический-анализ-часть-1.html#cb790-8" tabindex="-1"></a></span>
<span id="cb790-9"><a href="латентно-семантический-анализ-часть-1.html#cb790-9" tabindex="-1"></a>all_tbl</span></code></pre></div>
<pre><code>## # A tibble: 14 × 4
##    item            dim1   dim2 type 
##    &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
##  1 romeo         -0.905  0.563 word 
##  2 juliet        -0.717  0.904 word 
##  3 happy         -0.407  0.541 word 
##  4 dagger        -1.00   0.742 word 
##  5 live          -0.603 -0.695 word 
##  6 die           -1.20  -0.494 word 
##  7 free          -0.603 -0.695 word 
##  8 new-hampshire -0.745 -0.925 word 
##  9 d1            -0.711  0.73  doc  
## 10 d2            -0.93   1.09  doc  
## 11 d3            -1.36   0.402 doc  
## 12 d4            -1.38  -1.40  doc  
## 13 d5            -0.327 -0.46  doc  
## 14 q_doc         -1.10   0.124 doc</code></pre>
<p>Теперь строим график.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-366-1.png" width="672" /></p>
<p>Как видно, поисковый запрос оказался ближе к d2, чем к d4, хотя в каждом из документов было одно слово из запроса. Более того: он оказался ближе к d1, в котором не было ни одного слова из запроса! Наш алгоритм оказался достаточно умен, чтобы понять, что d1 более релевантен, хотя и не содержит точных совпадений с поисковыми словами. Возможно, человек дал бы такую же рекомендацию.</p>
<p>Мы исследовали наш небольшой корпус графически, теперь посчитаем косинусное расстояние.</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="латентно-семантический-анализ-часть-1.html#cb792-1" tabindex="-1"></a>dist_mx <span class="ot">&lt;-</span> all_df <span class="sc">%&gt;%</span> </span>
<span id="cb792-2"><a href="латентно-семантический-анализ-часть-1.html#cb792-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">9</span><span class="sc">:</span><span class="dv">14</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb792-3"><a href="латентно-семантический-анализ-часть-1.html#cb792-3" tabindex="-1"></a>  philentropy<span class="sc">::</span><span class="fu">distance</span>(<span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>, <span class="at">use.row.names =</span> T) </span></code></pre></div>
<pre><code>## Metric: &#39;cosine&#39;; comparing: 6 vectors.</code></pre>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="латентно-семантический-анализ-часть-1.html#cb794-1" tabindex="-1"></a>dist_mx</span></code></pre></div>
<pre><code>##                d1          d2        d3          d4         d5     q_doc
## d1     1.00000000  0.99792078 0.8724625 -0.02002992 -0.1796188 0.7736415
## d2     0.99792078  1.00000000 0.8391517 -0.08442786 -0.2426496 0.7311943
## d3     0.87246248  0.83915171 1.0000000  0.47110771  0.3240227 0.9846131
## d4    -0.02002992 -0.08442786 0.4711077  1.00000000  0.9871367 0.6180004
## d5    -0.17961877 -0.24264957 0.3240227  0.98713669  1.0000000 0.4843579
## q_doc  0.77364153  0.73119433 0.9846131  0.61800043  0.4843579 1.0000000</code></pre>
</div>
<div id="векторы-слов" class="section level2 hasAnchor" number="14.5">
<h2><span class="header-section-number">14.5</span> Векторы слов<a href="латентно-семантический-анализ-часть-1.html#векторы-слов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Текст хранится в опрятном формате, если одному наблюдению (термину) соответствует один ряд:</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="латентно-семантический-анализ-часть-1.html#cb796-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb796-2"><a href="латентно-семантический-анализ-часть-1.html#cb796-2" tabindex="-1"></a></span>
<span id="cb796-3"><a href="латентно-семантический-анализ-часть-1.html#cb796-3" tabindex="-1"></a>tidy_corpus <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb796-4"><a href="латентно-семантический-анализ-часть-1.html#cb796-4" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">&quot;word&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb796-5"><a href="латентно-семантический-анализ-часть-1.html#cb796-5" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(d1<span class="sc">:</span>d5, <span class="at">names_to =</span> <span class="st">&quot;doc&quot;</span>)</span>
<span id="cb796-6"><a href="латентно-семантический-анализ-часть-1.html#cb796-6" tabindex="-1"></a></span>
<span id="cb796-7"><a href="латентно-семантический-анализ-часть-1.html#cb796-7" tabindex="-1"></a>tidy_corpus</span></code></pre></div>
<pre><code>## # A tibble: 40 × 3
##    word   doc   value
##    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
##  1 romeo  d1        1
##  2 romeo  d2        0
##  3 romeo  d3        1
##  4 romeo  d4        0
##  5 romeo  d5        0
##  6 juliet d1        1
##  7 juliet d2        1
##  8 juliet d3        0
##  9 juliet d4        0
## 10 juliet d5        0
## # ℹ 30 more rows</code></pre>
<p>Чтобы вычислить svd, такой корпус надо преобразовать в широкий формат, произвести все вычисления, а затем “тайдифицировать”. Для подобных операций существует пакет <code>widyr</code>. Функцию <code>pivot_wider()</code> я добавляю лишь для удобства сравнения с тем, что мы получили выше.</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="латентно-семантический-анализ-часть-1.html#cb798-1" tabindex="-1"></a><span class="fu">library</span>(widyr)</span>
<span id="cb798-2"><a href="латентно-семантический-анализ-часть-1.html#cb798-2" tabindex="-1"></a></span>
<span id="cb798-3"><a href="латентно-семантический-анализ-часть-1.html#cb798-3" tabindex="-1"></a>tidy_u <span class="ot">&lt;-</span> tidy_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb798-4"><a href="латентно-семантический-анализ-часть-1.html#cb798-4" tabindex="-1"></a>  <span class="fu">widely_svd</span>(word, doc, value,</span>
<span id="cb798-5"><a href="латентно-семантический-анализ-часть-1.html#cb798-5" tabindex="-1"></a>             <span class="at">nv =</span> <span class="dv">2</span>, <span class="at">maxit =</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb798-6"><a href="латентно-семантический-анализ-часть-1.html#cb798-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb798-7"><a href="латентно-семантический-анализ-часть-1.html#cb798-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> dimension, <span class="at">values_from =</span> value) </span>
<span id="cb798-8"><a href="латентно-семантический-анализ-часть-1.html#cb798-8" tabindex="-1"></a></span>
<span id="cb798-9"><a href="латентно-семантический-анализ-часть-1.html#cb798-9" tabindex="-1"></a>tidy_u</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##   word             `1`    `2`
##   &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 romeo         -0.396  0.28 
## 2 juliet        -0.314  0.45 
## 3 happy         -0.178  0.269
## 4 dagger        -0.438  0.369
## 5 live          -0.264 -0.346
## 6 die           -0.524 -0.246
## 7 free          -0.264 -0.346
## 8 new-hampshire -0.326 -0.46</code></pre>
<p>Сравним с тем, что у нас получилось выше.</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="латентно-семантический-анализ-часть-1.html#cb800-1" tabindex="-1"></a>U_truncated <span class="sc">==</span> tidy_u[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##         1    2
## [1,] TRUE TRUE
## [2,] TRUE TRUE
## [3,] TRUE TRUE
## [4,] TRUE TRUE
## [5,] TRUE TRUE
## [6,] TRUE TRUE
## [7,] TRUE TRUE
## [8,] TRUE TRUE</code></pre>
<p>Итак, мы получили только матрицу левых сингулярных векторов. Чтобы получить word_emb, используем аргумент <code>weight_d</code>:</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="латентно-семантический-анализ-часть-1.html#cb802-1" tabindex="-1"></a>tidy_word_emb <span class="ot">&lt;-</span> tidy_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb802-2"><a href="латентно-семантический-анализ-часть-1.html#cb802-2" tabindex="-1"></a>  <span class="fu">widely_svd</span>(word, doc, value, </span>
<span id="cb802-3"><a href="латентно-семантический-анализ-часть-1.html#cb802-3" tabindex="-1"></a>             <span class="at">nv =</span> <span class="dv">2</span>, <span class="at">maxit =</span> <span class="dv">100</span>, </span>
<span id="cb802-4"><a href="латентно-семантический-анализ-часть-1.html#cb802-4" tabindex="-1"></a>             <span class="at">weight_d =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb802-5"><a href="латентно-семантический-анализ-часть-1.html#cb802-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)) </span>
<span id="cb802-6"><a href="латентно-семантический-анализ-часть-1.html#cb802-6" tabindex="-1"></a></span>
<span id="cb802-7"><a href="латентно-семантический-анализ-часть-1.html#cb802-7" tabindex="-1"></a></span>
<span id="cb802-8"><a href="латентно-семантический-анализ-часть-1.html#cb802-8" tabindex="-1"></a>tidy_word_emb <span class="sc">%&gt;%</span> </span>
<span id="cb802-9"><a href="латентно-семантический-анализ-часть-1.html#cb802-9" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> dimension, <span class="at">values_from =</span> value)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##   word             `1`    `2`
##   &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 romeo         -0.905  0.563
## 2 juliet        -0.718  0.904
## 3 happy         -0.407  0.541
## 4 dagger        -1.00   0.741
## 5 live          -0.603 -0.695
## 6 die           -1.20  -0.495
## 7 free          -0.603 -0.695
## 8 new-hampshire -0.746 -0.924</code></pre>
<p>Сравнив с <code>word_emb</code> выше, видим, что округление не всегда с точностью до тысячных совпадает, но в остальном все ок.</p>
</div>
<div id="векторы-документов-опрятно" class="section level2 hasAnchor" number="14.6">
<h2><span class="header-section-number">14.6</span> Векторы документов: опрятно<a href="латентно-семантический-анализ-часть-1.html#векторы-документов-опрятно" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Осталось понять, как <em>опрятно</em> получить doc_emb. Здесь есть достаточно элегантное решение, которое заключается в том, чтобы рассматривать каждый документ как набор слов<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a>. Перемножив матрицу документ-термин и матрицу с эмбеддингами слов, получаем искомые эмбеддинги документов.</p>
<p>Частотность слов хранится в объекте <code>tidy_corpus</code>, преобразуем его.</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="латентно-семантический-анализ-часть-1.html#cb804-1" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb804-2"><a href="латентно-семантический-анализ-часть-1.html#cb804-2" tabindex="-1"></a></span>
<span id="cb804-3"><a href="латентно-семантический-анализ-часть-1.html#cb804-3" tabindex="-1"></a>dtm_mx <span class="ot">&lt;-</span> tidy_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb804-4"><a href="латентно-семантический-анализ-часть-1.html#cb804-4" tabindex="-1"></a>  <span class="fu">cast_sparse</span>(doc, word, value)</span>
<span id="cb804-5"><a href="латентно-семантический-анализ-часть-1.html#cb804-5" tabindex="-1"></a></span>
<span id="cb804-6"><a href="латентно-семантический-анализ-часть-1.html#cb804-6" tabindex="-1"></a>dtm_mx</span></code></pre></div>
<pre><code>## 5 x 8 sparse Matrix of class &quot;dgCMatrix&quot;
##    romeo juliet happy dagger live die free new-hampshire
## d1     1      1     0      0    0   0    0             0
## d2     0      1     1      1    0   0    0             0
## d3     1      0     0      1    0   1    0             0
## d4     0      0     0      0    1   1    1             1
## d5     0      0     0      0    0   0    0             1</code></pre>
<p>Эмбеддинги слов преобразуем в тот же формат.</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="латентно-семантический-анализ-часть-1.html#cb806-1" tabindex="-1"></a>embedding_mx <span class="ot">&lt;-</span> tidy_word_emb <span class="sc">%&gt;%</span></span>
<span id="cb806-2"><a href="латентно-семантический-анализ-часть-1.html#cb806-2" tabindex="-1"></a>  <span class="fu">cast_sparse</span>(word, dimension, value)</span>
<span id="cb806-3"><a href="латентно-семантический-анализ-часть-1.html#cb806-3" tabindex="-1"></a></span>
<span id="cb806-4"><a href="латентно-семантический-анализ-часть-1.html#cb806-4" tabindex="-1"></a>embedding_mx</span></code></pre></div>
<pre><code>## 8 x 2 sparse Matrix of class &quot;dgCMatrix&quot;
##                    1      2
## romeo         -0.905  0.563
## juliet        -0.718  0.904
## happy         -0.407  0.541
## dagger        -1.002  0.741
## live          -0.603 -0.695
## die           -1.198 -0.495
## free          -0.603 -0.695
## new-hampshire -0.746 -0.924</code></pre>
<p>Перемножаем частотности слов в документе и эмбеддинги слов.</p>
<div class="sourceCode" id="cb808"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb808-1"><a href="латентно-семантический-анализ-часть-1.html#cb808-1" tabindex="-1"></a>doc_mx <span class="ot">&lt;-</span> dtm_mx <span class="sc">%*%</span> embedding_mx</span>
<span id="cb808-2"><a href="латентно-семантический-анализ-часть-1.html#cb808-2" tabindex="-1"></a></span>
<span id="cb808-3"><a href="латентно-семантический-анализ-часть-1.html#cb808-3" tabindex="-1"></a>tidy_doc_emb <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.matrix</span>(doc_mx)) <span class="sc">%&gt;%</span> </span>
<span id="cb808-4"><a href="латентно-семантический-анализ-часть-1.html#cb808-4" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">&quot;item&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb808-5"><a href="латентно-семантический-анализ-часть-1.html#cb808-5" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">dim1 =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">dim2 =</span> <span class="st">`</span><span class="at">2</span><span class="st">`</span>)</span>
<span id="cb808-6"><a href="латентно-семантический-анализ-часть-1.html#cb808-6" tabindex="-1"></a></span>
<span id="cb808-7"><a href="латентно-семантический-анализ-часть-1.html#cb808-7" tabindex="-1"></a>tidy_doc_emb</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   item    dim1   dim2
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 d1    -1.62   1.47 
## 2 d2    -2.13   2.19 
## 3 d3    -3.10   0.809
## 4 d4    -3.15  -2.81 
## 5 d5    -0.746 -0.924</code></pre>
<p>Это не совпадает с тем результатом, которые мы получили выше, т.к. мы считали другим способом. Но легко убедиться, что слова и документы расположились осмысленно:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-376-1.png" width="672" /></p>
<p>Видно, что документы “уехали” влево, но при использовании косинусного сходства на результат это не влияет.</p>
</div>
<div id="пакет-lsa" class="section level2 hasAnchor" number="14.7">
<h2><span class="header-section-number">14.7</span> Пакет LSA<a href="латентно-семантический-анализ-часть-1.html#пакет-lsa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Имея матрицу документ-термин, мы можем быстро построить модель, воспользовавшись функцией <code>lsa()</code> из одноименного пакета. Она требует на входе матрицу документ-термин, которую мы создали выше.</p>
<div class="sourceCode" id="cb810"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb810-1"><a href="латентно-семантический-анализ-часть-1.html#cb810-1" tabindex="-1"></a><span class="fu">library</span>(lsa)</span>
<span id="cb810-2"><a href="латентно-семантический-анализ-часть-1.html#cb810-2" tabindex="-1"></a></span>
<span id="cb810-3"><a href="латентно-семантический-анализ-часть-1.html#cb810-3" tabindex="-1"></a>lsaSpace <span class="ot">&lt;-</span> <span class="fu">lsa</span>(dtm_mx, <span class="at">dims =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Функция вернет список, в котором хранятся элементы под названием <code>tk</code>, <code>dk</code>, <code>sk</code>. Они соответствуют матрице правых сингулярных векторов V, матрице правых сингулярных векторов U, а также сингулярным значениям. Убедимся в этом.</p>
<div class="sourceCode" id="cb811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb811-1"><a href="латентно-семантический-анализ-часть-1.html#cb811-1" tabindex="-1"></a><span class="fu">round</span>(lsaSpace<span class="sc">$</span>tk, <span class="dv">3</span>); <span class="fu">t</span>(Vt_truncated)</span></code></pre></div>
<pre><code>##     [,1]   [,2]
## d1 0.311  0.363
## d2 0.407  0.541
## d3 0.594  0.200
## d4 0.603 -0.695
## d5 0.143 -0.229</code></pre>
<pre><code>##        [,1]   [,2]
## [1,] -0.311  0.363
## [2,] -0.407  0.541
## [3,] -0.594  0.200
## [4,] -0.603 -0.695
## [5,] -0.143 -0.229</code></pre>
<p>Для матрицы <span class="math inline">\(V^t\)</span> результаты совпадают <em>за исключением знака в первом столбце</em>; это явление известно как <a href="https://www.educative.io/blog/sign-ambiguity-in-singular-value-decomposition">sign ambiguity</a>. Первый столбец матрицы U тоже меняет знак, так что при перемножении мы вновь получаем исходную матрицу. Убедимся в этом.</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="латентно-семантический-анализ-часть-1.html#cb814-1" tabindex="-1"></a><span class="fu">round</span>(lsaSpace<span class="sc">$</span>dk, <span class="dv">3</span>); U_truncated</span></code></pre></div>
<pre><code>##                [,1]   [,2]
## romeo         0.396  0.280
## juliet        0.314  0.450
## happy         0.178  0.269
## dagger        0.438  0.369
## live          0.264 -0.346
## die           0.524 -0.246
## free          0.264 -0.346
## new-hampshire 0.326 -0.460</code></pre>
<pre><code>##        [,1]   [,2]
## [1,] -0.396  0.280
## [2,] -0.314  0.450
## [3,] -0.178  0.269
## [4,] -0.438  0.369
## [5,] -0.264 -0.346
## [6,] -0.524 -0.246
## [7,] -0.264 -0.346
## [8,] -0.326 -0.460</code></pre>
<p>Чтобы построить эмбеддинги документов, перемножаем диагональную матрицу и <span class="math inline">\(V^t\)</span>:</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="латентно-семантический-анализ-часть-1.html#cb817-1" tabindex="-1"></a><span class="fu">diag</span>(lsaSpace<span class="sc">$</span>sk) <span class="sc">%*%</span> <span class="fu">t</span>(lsaSpace<span class="sc">$</span>tk)</span></code></pre></div>
<pre><code>##             d1        d2       d3        d4         d5
## [1,] 0.7104208 0.9308713 1.358521  1.378139  0.3263732
## [2,] 0.7295895 1.0870320 0.402161 -1.397916 -0.4596688</code></pre>
<p>Это совпадает с тем результатом, который мы получили ранее (за исключением знака, о чем уже было сказано):</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="латентно-семантический-анализ-часть-1.html#cb819-1" tabindex="-1"></a>doc_emb</span></code></pre></div>
<pre><code>##          d1     d2     d3     d4     d5
## [1,] -0.711 -0.930 -1.357 -1.378 -0.327
## [2,]  0.730  1.087  0.402 -1.397 -0.460</code></pre>
<p>Дальше это можно транспонировать и посчитать расстояние между документами, как мы уже делали, и проделать то же самое со словами.</p>
<p>Функция <code>cosine()</code> из пакета <code>lda</code> считает косинусное сходство между векторами или <em>столбцами</em> матрицы (будьте внимательны: многие функции для подсчета расстояния или сходства оперируют рядами!). Чтобы получить расстояние, вычитаем результат из единицы.</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="латентно-семантический-анализ-часть-1.html#cb821-1" tabindex="-1"></a>dist_cos <span class="ot">&lt;-</span> <span class="fu">as.dist</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">cosine</span>(doc_emb))</span></code></pre></div>
<p>Имея матрицу расстояния, можно найти кластеры документов:</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="латентно-семантический-анализ-часть-1.html#cb822-1" tabindex="-1"></a>hc <span class="ot">&lt;-</span> <span class="fu">hclust</span>(dist_cos)</span>
<span id="cb822-2"><a href="латентно-семантический-анализ-часть-1.html#cb822-2" tabindex="-1"></a><span class="fu">plot</span>(hc)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-383-1.png" width="672" /></p>
<p>“Бьютифицировать” это грустное деревце можно тысячью разных <a href="http://www.sthda.com/english/wiki/beautiful-dendrogram-visualizations-in-r-5-must-known-methods-unsupervised-machine-learning">способов</a>, в том числе с использованием специального пакета <a href="https://cran.r-project.org/web/packages/ggdendro/vignettes/ggdendro.html"><code>ggdendro</code></a>. К теме кластеризации вернемся в следующем уроке.</p>
<p>Еще одна полезная функция из пакет <code>lsa</code> перемножает все три матрицы:</p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="латентно-семантический-анализ-часть-1.html#cb823-1" tabindex="-1"></a><span class="fu">as.textmatrix</span>(lsaSpace)</span></code></pre></div>
<pre><code>##           romeo     juliet       happy      dagger        live       die
## d1 0.4857621003  0.5512365  0.32287847  0.58028254 -0.06491438 0.1924897
## d2 0.6731985780  0.7811989  0.45832047  0.80864057 -0.13038878 0.2199313
## d3 0.6508101580  0.6077242  0.35032011  0.74372620  0.21937129 0.6127774
## d4 0.1544569178 -0.1953032 -0.13038878  0.08898251  0.84723338 1.0666047
## d5 0.0005600299 -0.1040672 -0.06547441 -0.02632157  0.24513284 0.2842857
##           free new-hampshire
## d1 -0.06491438    -0.1035072
## d2 -0.13038878    -0.1958632
## d3  0.21937129     0.2585241
## d4  0.84723338     1.0923662
## d5  0.24513284     0.3178149</code></pre>
<p>Внутри у этой функции происходит следующее:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="латентно-семантический-анализ-часть-1.html#cb825-1" tabindex="-1"></a><span class="fu">t</span>(lsaSpace<span class="sc">$</span>dk <span class="sc">%*%</span> <span class="fu">diag</span>(lsaSpace<span class="sc">$</span>sk) <span class="sc">%*%</span> <span class="fu">t</span>(lsaSpace<span class="sc">$</span>tk))</span></code></pre></div>
<pre><code>##           romeo     juliet       happy      dagger        live       die
## d1 0.4857621003  0.5512365  0.32287847  0.58028254 -0.06491438 0.1924897
## d2 0.6731985780  0.7811989  0.45832047  0.80864057 -0.13038878 0.2199313
## d3 0.6508101580  0.6077242  0.35032011  0.74372620  0.21937129 0.6127774
## d4 0.1544569178 -0.1953032 -0.13038878  0.08898251  0.84723338 1.0666047
## d5 0.0005600299 -0.1040672 -0.06547441 -0.02632157  0.24513284 0.2842857
##           free new-hampshire
## d1 -0.06491438    -0.1035072
## d2 -0.13038878    -0.1958632
## d3  0.21937129     0.2585241
## d4  0.84723338     1.0923662
## d5  0.24513284     0.3178149</code></pre>
<p>Эту матрицу тоже можно использовать для вычисления косинусного расстояния между терминами или документами.</p>
</div>
<div id="визуализации-топиков" class="section level2 hasAnchor" number="14.8">
<h2><span class="header-section-number">14.8</span> Визуализации топиков<a href="латентно-семантический-анализ-часть-1.html#визуализации-топиков" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для лучшей интерпретируемости модели бывает полезно визуализировать сами топики. У нас игрушечный пример, поэтому выглядит это не очень интересно, подробнее можно почитать <a href="https://smltar.com/embeddings.html#exploring-cfpb-word-embeddings">здесь</a>.</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="латентно-семантический-анализ-часть-1.html#cb827-1" tabindex="-1"></a>tidy_word_emb <span class="sc">%&gt;%</span> </span>
<span id="cb827-2"><a href="латентно-семантический-анализ-часть-1.html#cb827-2" tabindex="-1"></a>  <span class="fu">group_by</span>(dimension) <span class="sc">%&gt;%</span></span>
<span id="cb827-3"><a href="латентно-семантический-анализ-часть-1.html#cb827-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">abs</span>(value)) <span class="sc">%&gt;%</span> </span>
<span id="cb827-4"><a href="латентно-семантический-анализ-часть-1.html#cb827-4" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb827-5"><a href="латентно-семантический-анализ-часть-1.html#cb827-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb827-6"><a href="латентно-семантический-анализ-часть-1.html#cb827-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder_within</span>(word, value, dimension)) <span class="sc">%&gt;%</span> </span>
<span id="cb827-7"><a href="латентно-семантический-анализ-часть-1.html#cb827-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(word, value, <span class="at">fill =</span> dimension)) <span class="sc">+</span></span>
<span id="cb827-8"><a href="латентно-семантический-анализ-часть-1.html#cb827-8" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb827-9"><a href="латентно-семантический-анализ-часть-1.html#cb827-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>dimension, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb827-10"><a href="латентно-семантический-анализ-часть-1.html#cb827-10" tabindex="-1"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb827-11"><a href="латентно-семантический-анализ-часть-1.html#cb827-11" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-386-1.png" width="672" /></p>
</div>
<div id="пакет-textminer" class="section level2 hasAnchor" number="14.9">
<h2><span class="header-section-number">14.9</span> Пакет TextmineR<a href="латентно-семантический-анализ-часть-1.html#пакет-textminer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Все те же задачи решает пакет textmineR, но могут быть проблемы с его установкой на MacOS. Как их решить, см. <a href="https://github.com/coatless-mac/macrtools">здесь</a>.</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="латентно-семантический-анализ-часть-1.html#cb828-1" tabindex="-1"></a><span class="co"># для MacOS</span></span>
<span id="cb828-2"><a href="латентно-семантический-анализ-часть-1.html#cb828-2" tabindex="-1"></a><span class="co"># remotes::install_github(&quot;coatless-mac/macrtools&quot;)</span></span>
<span id="cb828-3"><a href="латентно-семантический-анализ-часть-1.html#cb828-3" tabindex="-1"></a><span class="co"># macrtools::macos_rtools_install()</span></span></code></pre></div>
<p>Если справились с установкой:</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="латентно-семантический-анализ-часть-1.html#cb829-1" tabindex="-1"></a><span class="fu">library</span>(textmineR)</span>
<span id="cb829-2"><a href="латентно-семантический-анализ-часть-1.html#cb829-2" tabindex="-1"></a>lsa_model <span class="ot">&lt;-</span> <span class="fu">FitLsaModel</span>(dtm_mx, <span class="at">k =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Сингулярные значения:</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb830-1"><a href="латентно-семантический-анализ-часть-1.html#cb830-1" tabindex="-1"></a>lsa_model<span class="sc">$</span>sv</span></code></pre></div>
<pre><code>## [1] 2.285298 2.010258</code></pre>
<p>Правые сингулярные векторы здесь называются “тета” (см. <a href="https://cran.r-project.org/web/packages/textmineR/vignettes/c_topic_modeling.html">виньетку</a>): <span class="math inline">\(Θ = 𝑃(topik_k|document_d)\)</span></p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="латентно-семантический-анализ-часть-1.html#cb832-1" tabindex="-1"></a>lsa_model<span class="sc">$</span>theta</span></code></pre></div>
<pre><code>##           t_1        t_2
## d1 -0.3108657  0.3629332
## d2 -0.4073304  0.5407425
## d3 -0.5944614  0.2000544
## d4 -0.6030458 -0.6953914
## d5 -0.1428143 -0.2286616</code></pre>
<p>Левые сингулярные векторы здесь называются “фи”: <span class="math inline">\(Φ = P(token_v|topic_k)\)</span></p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="латентно-семантический-анализ-часть-1.html#cb834-1" tabindex="-1"></a>lsa_model<span class="sc">$</span>phi</span></code></pre></div>
<pre><code>##          romeo     juliet      happy     dagger       live        die
## t_1 -0.3961528 -0.3142681 -0.1782395 -0.4383638 -0.2638806 -0.5240048
## t_2  0.2800574  0.4495321  0.2689915  0.3685083 -0.3459214 -0.2464047
##           free new-hampshire
## t_1 -0.2638806    -0.3263732
## t_2 -0.3459214    -0.4596688</code></pre>
<p>Удобная функция позволяет достать главные термины для топиков.</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="латентно-семантический-анализ-часть-1.html#cb836-1" tabindex="-1"></a><span class="fu">GetTopTerms</span>(<span class="at">phi =</span> lsa_model<span class="sc">$</span>phi, <span class="at">M =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##      t_1     t_2     
## [1,] &quot;happy&quot; &quot;juliet&quot;
## [2,] &quot;live&quot;  &quot;dagger&quot;
## [3,] &quot;free&quot;  &quot;romeo&quot;</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="52">
<li id="fn52"><p><a href="https://smltar.com/embeddings.html#understand-word-embeddings-by-finding-them-yourself" class="uri">https://smltar.com/embeddings.html#understand-word-embeddings-by-finding-them-yourself</a><a href="латентно-семантический-анализ-часть-1.html#fnref52" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="тематическое-моделирование.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="поисковик-на-основе-lsa.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/13-lsa.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
