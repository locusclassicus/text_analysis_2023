<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-10-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="функциональное-программирование.html"/>
<link rel="next" href="воспроизводимые-исследования.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.29/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-чем-этот-курс"><i class="fa fa-check"></i><b>2.1</b> О чем этот курс</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.2</b> Что такое R?</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.3</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.5</b> RStudio</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.6</b> Установка</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.7</b> Начало работы</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.8</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.9</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.10</b> Векторы</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#отсутствующие-значения"><i class="fa fa-check"></i><b>2.11</b> Отсутствующие значения</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#практическое-задание"><i class="fa fa-check"></i><b>2.15</b> Практическое задание</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#работа-с-цветом"><i class="fa fa-check"></i><b>3.4</b> Работа с цветом</a></li>
<li class="chapter" data-level="3.5" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.5</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-семейство-_apply"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: семейство <code>_apply</code></a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#map"><i class="fa fa-check"></i><b>5.7.1</b> <code>map()</code></a></li>
<li class="chapter" data-level="5.7.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#map2"><i class="fa fa-check"></i><b>5.7.2</b> <code>map2()</code></a></li>
<li class="chapter" data-level="5.7.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#дополнительные-возможности-purrr"><i class="fa fa-check"></i><b>5.7.3</b> Дополнительные возможности purrr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#работа-с-табличными-данными"><i class="fa fa-check"></i><b>6.1</b> Работа с табличными данными</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-табличных-данных"><i class="fa fa-check"></i><b>6.2</b> Чтение табличных данных</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.2.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.2.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.2.2</b> xls и xlsx</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-текстовых-данных"><i class="fa fa-check"></i><b>6.3</b> Чтение текстовых данных</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.3.1</b> txt</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.3.2</b> doc</a></li>
<li class="chapter" data-level="6.3.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.3.3</b> pdf</a></li>
<li class="chapter" data-level="6.3.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#png"><i class="fa fa-check"></i><b>6.3.4</b> png</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#архивы"><i class="fa fa-check"></i><b>6.4</b> Архивы</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.4.1</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#структурированные-данные"><i class="fa fa-check"></i><b>6.5</b> Структурированные данные</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5.1</b> json</a></li>
<li class="chapter" data-level="6.5.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml"><i class="fa fa-check"></i><b>6.5.2</b> xml</a></li>
<li class="chapter" data-level="6.5.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#tei"><i class="fa fa-check"></i><b>6.5.3</b> tei</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html"><i class="fa fa-check"></i><b>9</b> Веб-скрапинг</a>
<ul>
<li class="chapter" data-level="9.1" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#структура-html"><i class="fa fa-check"></i><b>9.1</b> Структура html</a></li>
<li class="chapter" data-level="9.2" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#каскадные-таблицы-стилей"><i class="fa fa-check"></i><b>9.2</b> Каскадные таблицы стилей</a></li>
<li class="chapter" data-level="9.3" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-данных"><i class="fa fa-check"></i><b>9.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="9.4" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#извлечение-в-тиббл"><i class="fa fa-check"></i><b>9.4</b> Извлечение в тиббл</a></li>
<li class="chapter" data-level="9.5" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#скрапим-телеграм-канал"><i class="fa fa-check"></i><b>9.5</b> Скрапим телеграм-канал</a></li>
<li class="chapter" data-level="9.6" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#эмотиконы"><i class="fa fa-check"></i><b>9.6</b> Эмотиконы</a></li>
<li class="chapter" data-level="9.7" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#рутинная-уборка"><i class="fa fa-check"></i><b>9.7</b> Рутинная уборка</a></li>
<li class="chapter" data-level="9.8" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#лемматизация"><i class="fa fa-check"></i><b>9.8</b> Лемматизация</a></li>
<li class="chapter" data-level="9.9" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#html-таблицы"><i class="fa fa-check"></i><b>9.9</b> Html таблицы</a></li>
<li class="chapter" data-level="9.10" data-path="веб-скрапинг.html"><a href="веб-скрапинг.html#wikisource"><i class="fa fa-check"></i><b>9.10</b> Wikisource</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>10</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="10.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>10.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="10.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>10.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="10.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>10.3</b> Скипграмы</a></li>
<li class="chapter" data-level="10.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>10.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="10.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>10.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="10.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>10.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="10.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>10.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="10.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>10.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html"><i class="fa fa-check"></i><b>11</b> Распределения слов и анализ частотностей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#извлечение-источников"><i class="fa fa-check"></i><b>11.1</b> Извлечение источников</a></li>
<li class="chapter" data-level="11.2" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#подготовка-источников"><i class="fa fa-check"></i><b>11.2</b> Подготовка источников</a></li>
<li class="chapter" data-level="11.3" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#токенизация"><i class="fa fa-check"></i><b>11.3</b> Токенизация</a></li>
<li class="chapter" data-level="11.4" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#cтоп-слова"><i class="fa fa-check"></i><b>11.4</b> Cтоп-слова</a></li>
<li class="chapter" data-level="11.5" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#абсолютная-частотность"><i class="fa fa-check"></i><b>11.5</b> Абсолютная частотность</a></li>
<li class="chapter" data-level="11.6" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#стемминг"><i class="fa fa-check"></i><b>11.6</b> Стемминг</a></li>
<li class="chapter" data-level="11.7" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#относительная-частотность"><i class="fa fa-check"></i><b>11.7</b> Относительная частотность</a></li>
<li class="chapter" data-level="11.8" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#распределения-слов-токенов"><i class="fa fa-check"></i><b>11.8</b> Распределения слов (токенов)</a></li>
<li class="chapter" data-level="11.9" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#закон-ципфа"><i class="fa fa-check"></i><b>11.9</b> Закон Ципфа</a></li>
<li class="chapter" data-level="11.10" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#ttr-type-token-ratio"><i class="fa fa-check"></i><b>11.10</b> TTR (type-token ratio)</a></li>
<li class="chapter" data-level="11.11" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#tf-idf"><i class="fa fa-check"></i><b>11.11</b> TF-IDF</a></li>
<li class="chapter" data-level="11.12" data-path="распределения-слов-и-анализ-частотностей.html"><a href="распределения-слов-и-анализ-частотностей.html#сравнение-при-помощи-диаграммы-рассеяния"><i class="fa fa-check"></i><b>11.12</b> Сравнение при помощи диаграммы рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>12</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="12.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>12.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="12.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>12.2</b> Подходы</a></li>
<li class="chapter" data-level="12.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>12.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="12.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>12.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>12.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="12.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>12.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="12.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>12.4.3</b> AFINN</a></li>
<li class="chapter" data-level="12.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>12.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>12.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="12.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подготовка-текста"><i class="fa fa-check"></i><b>12.6</b> Подготовка текста</a></li>
<li class="chapter" data-level="12.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#модификация-лексикона"><i class="fa fa-check"></i><b>12.7</b> Модификация лексикона</a></li>
<li class="chapter" data-level="12.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#соединение-лексикона-и-текста"><i class="fa fa-check"></i><b>12.8</b> Соединение лексикона и текста</a></li>
<li class="chapter" data-level="12.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-на-оси-времени"><i class="fa fa-check"></i><b>12.9</b> Тональность на оси времени</a></li>
<li class="chapter" data-level="12.10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#для-других-языков"><i class="fa fa-check"></i><b>12.10</b> Для других языков</a></li>
<li class="chapter" data-level="12.11" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#виды-эмоций"><i class="fa fa-check"></i><b>12.11</b> Виды эмоций</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html"><i class="fa fa-check"></i><b>13</b> Тематическое моделирование</a>
<ul>
<li class="chapter" data-level="13.1" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#что-такое-lda"><i class="fa fa-check"></i><b>13.1</b> Что такое LDA</a></li>
<li class="chapter" data-level="13.2" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределение-дирихле"><i class="fa fa-check"></i><b>13.2</b> Распределение Дирихле</a></li>
<li class="chapter" data-level="13.3" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#подтоговка-данных"><i class="fa fa-check"></i><b>13.3</b> Подтоговка данных</a></li>
<li class="chapter" data-level="13.4" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#матрица-встречаемости"><i class="fa fa-check"></i><b>13.4</b> Матрица встречаемости</a></li>
<li class="chapter" data-level="13.5" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#число-тем"><i class="fa fa-check"></i><b>13.5</b> Число тем</a></li>
<li class="chapter" data-level="13.6" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#модель-lda"><i class="fa fa-check"></i><b>13.6</b> Модель LDA</a></li>
<li class="chapter" data-level="13.7" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#слова-и-темы"><i class="fa fa-check"></i><b>13.7</b> Слова и темы</a></li>
<li class="chapter" data-level="13.8" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#сравнение-топиков"><i class="fa fa-check"></i><b>13.8</b> Сравнение топиков</a></li>
<li class="chapter" data-level="13.9" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#темы-и-документы"><i class="fa fa-check"></i><b>13.9</b> Темы и документы</a></li>
<li class="chapter" data-level="13.10" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#распределения-вероятности-для-топиков"><i class="fa fa-check"></i><b>13.10</b> Распределения вероятности для топиков</a></li>
<li class="chapter" data-level="13.11" data-path="тематическое-моделирование.html"><a href="тематическое-моделирование.html#интерактивные-визуализации"><i class="fa fa-check"></i><b>13.11</b> Интерактивные визуализации</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html"><i class="fa fa-check"></i><b>14</b> Латентно-семантический анализ</a>
<ul>
<li class="chapter" data-level="14.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#что-это-такое"><i class="fa fa-check"></i><b>14.1</b> Что это такое</a></li>
<li class="chapter" data-level="14.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторное-представление-слов"><i class="fa fa-check"></i><b>14.2</b> Векторное представление слов</a></li>
<li class="chapter" data-level="14.3" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#сингулярное-разложение-матрицы"><i class="fa fa-check"></i><b>14.3</b> Сингулярное разложение матрицы</a></li>
<li class="chapter" data-level="14.4" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#простой-пример"><i class="fa fa-check"></i><b>14.4</b> Простой пример</a></li>
<li class="chapter" data-level="14.5" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#векторы-слов"><i class="fa fa-check"></i><b>14.5</b> Векторы слов</a></li>
<li class="chapter" data-level="14.6" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#пакеты-для-работы-с-lsa"><i class="fa fa-check"></i><b>14.6</b> Пакеты для работы с LSA</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa"><i class="fa fa-check"></i><b>14.6.1</b> lsa</a></li>
<li class="chapter" data-level="14.6.2" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#textminer"><i class="fa fa-check"></i><b>14.6.2</b> TextmineR</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="латентно-семантический-анализ.html"><a href="латентно-семантический-анализ.html#lsa-c-использованием-tidy-data"><i class="fa fa-check"></i><b>14.7</b> LSA c использованием Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html"><i class="fa fa-check"></i><b>15</b> Кластеризация и метод главных компонент</a>
<ul>
<li class="chapter" data-level="15.1" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#виды-кластерного-анализа"><i class="fa fa-check"></i><b>15.1</b> Виды кластерного анализа</a></li>
<li class="chapter" data-level="15.2" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#кластеризация-по-методу-k-средних"><i class="fa fa-check"></i><b>15.2</b> Кластеризация по методу K средних</a></li>
<li class="chapter" data-level="15.3" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-в-r"><i class="fa fa-check"></i><b>15.3</b> K-means в R</a></li>
<li class="chapter" data-level="15.4" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#k-means-для-кластеризации-текстов"><i class="fa fa-check"></i><b>15.4</b> K-means для кластеризации текстов</a></li>
<li class="chapter" data-level="15.5" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#нормализация-данных"><i class="fa fa-check"></i><b>15.5</b> Нормализация данных</a></li>
<li class="chapter" data-level="15.6" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.6</b> Иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.7" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#алгоритм-иерархической-кластеризации"><i class="fa fa-check"></i><b>15.7</b> Алгоритм иерархической кластеризации</a></li>
<li class="chapter" data-level="15.8" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-в-r"><i class="fa fa-check"></i><b>15.8</b> Иерархическая кластеризация в R</a></li>
<li class="chapter" data-level="15.9" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#иерархическая-кластеризация-текстов"><i class="fa fa-check"></i><b>15.9</b> Иерархическая кластеризация текстов</a></li>
<li class="chapter" data-level="15.10" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#метод-главных-компонент"><i class="fa fa-check"></i><b>15.10</b> Метод главных компонент</a></li>
<li class="chapter" data-level="15.11" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-для-визуализации-кластеров-k-means"><i class="fa fa-check"></i><b>15.11</b> PCA для визуализации кластеров K-means</a></li>
<li class="chapter" data-level="15.12" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-и-иерархическая-кластеризация"><i class="fa fa-check"></i><b>15.12</b> PCA и иерархическая кластеризация</a></li>
<li class="chapter" data-level="15.13" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#многомерное-шкалирование"><i class="fa fa-check"></i><b>15.13</b> Многомерное шкалирование</a></li>
<li class="chapter" data-level="15.14" data-path="кластеризация-и-метод-главных-компонент.html"><a href="кластеризация-и-метод-главных-компонент.html#pca-с-factominer"><i class="fa fa-check"></i><b>15.14</b> PCA с FactoMineR</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html"><i class="fa fa-check"></i><b>16</b> Сетевые данные и графы</a>
<ul>
<li class="chapter" data-level="16.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#базовое-описание"><i class="fa fa-check"></i><b>16.1</b> Базовое описание</a></li>
<li class="chapter" data-level="16.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#создание-сетевых-данных"><i class="fa fa-check"></i><b>16.2</b> Создание сетевых данных</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#социоматрица"><i class="fa fa-check"></i><b>16.2.1</b> Социоматрица</a></li>
<li class="chapter" data-level="16.2.2" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#список-ребер"><i class="fa fa-check"></i><b>16.2.2</b> Список ребер</a></li>
<li class="chapter" data-level="16.2.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#формула"><i class="fa fa-check"></i><b>16.2.3</b> Формула</a></li>
<li class="chapter" data-level="16.2.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-данных"><i class="fa fa-check"></i><b>16.2.4</b> Импорт данных</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-вершин-узлов"><i class="fa fa-check"></i><b>16.3</b> Атрибуты вершин (узлов)</a></li>
<li class="chapter" data-level="16.4" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-узлу"><i class="fa fa-check"></i><b>16.4</b> Фильтрация по узлу</a></li>
<li class="chapter" data-level="16.5" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#атрибуты-ребер"><i class="fa fa-check"></i><b>16.5</b> Атрибуты ребер</a></li>
<li class="chapter" data-level="16.6" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#импорт-из-gexf"><i class="fa fa-check"></i><b>16.6</b> Импорт из gexf</a></li>
<li class="chapter" data-level="16.7" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#визуализация-с-ggraph"><i class="fa fa-check"></i><b>16.7</b> Визуализация с ggraph</a></li>
<li class="chapter" data-level="16.8" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#фильтрация-по-атрибутам-ребер"><i class="fa fa-check"></i><b>16.8</b> Фильтрация по атрибутам ребер</a></li>
<li class="chapter" data-level="16.9" data-path="сетевые-данные-и-графы.html"><a href="сетевые-данные-и-графы.html#укладка-сети"><i class="fa fa-check"></i><b>16.9</b> Укладка сети</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="анализ-сетей.html"><a href="анализ-сетей.html"><i class="fa fa-check"></i><b>17</b> Анализ сетей</a>
<ul>
<li class="chapter" data-level="17.1" data-path="анализ-сетей.html"><a href="анализ-сетей.html#от-conllu-к-совместной-встречаемости"><i class="fa fa-check"></i><b>17.1</b> От conllu к совместной встречаемости</a></li>
<li class="chapter" data-level="17.2" data-path="анализ-сетей.html"><a href="анализ-сетей.html#граф-слов-с-igraph"><i class="fa fa-check"></i><b>17.2</b> Граф слов с igraph</a></li>
<li class="chapter" data-level="17.3" data-path="анализ-сетей.html"><a href="анализ-сетей.html#важность-узлов"><i class="fa fa-check"></i><b>17.3</b> Важность узлов</a></li>
<li class="chapter" data-level="17.4" data-path="анализ-сетей.html"><a href="анализ-сетей.html#централизация"><i class="fa fa-check"></i><b>17.4</b> Централизация</a></li>
<li class="chapter" data-level="17.5" data-path="анализ-сетей.html"><a href="анализ-сетей.html#центральность-на-графике"><i class="fa fa-check"></i><b>17.5</b> Центральность на графике</a></li>
<li class="chapter" data-level="17.6" data-path="анализ-сетей.html"><a href="анализ-сетей.html#интерактивный-граф"><i class="fa fa-check"></i><b>17.6</b> Интерактивный граф</a></li>
<li class="chapter" data-level="17.7" data-path="анализ-сетей.html"><a href="анализ-сетей.html#точки-сочленения"><i class="fa fa-check"></i><b>17.7</b> Точки сочленения</a></li>
<li class="chapter" data-level="17.8" data-path="анализ-сетей.html"><a href="анализ-сетей.html#подгруппы"><i class="fa fa-check"></i><b>17.8</b> Подгруппы</a>
<ul>
<li class="chapter" data-level="17.8.1" data-path="анализ-сетей.html"><a href="анализ-сетей.html#клики"><i class="fa fa-check"></i><b>17.8.1</b> Клики</a></li>
<li class="chapter" data-level="17.8.2" data-path="анализ-сетей.html"><a href="анализ-сетей.html#k-ядра"><i class="fa fa-check"></i><b>17.8.2</b> K-ядра</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dracor.html"><a href="dracor.html"><i class="fa fa-check"></i><b>18</b> Dracor</a>
<ul>
<li class="chapter" data-level="18.1" data-path="dracor.html"><a href="dracor.html#о-корпусе-dracor"><i class="fa fa-check"></i><b>18.1</b> О корпусе Dracor</a></li>
<li class="chapter" data-level="18.2" data-path="dracor.html"><a href="dracor.html#начало-работы-с-dracor"><i class="fa fa-check"></i><b>18.2</b> Начало работы с Dracor</a></li>
<li class="chapter" data-level="18.3" data-path="dracor.html"><a href="dracor.html#сети-dracor"><i class="fa fa-check"></i><b>18.3</b> Сети Dracor</a></li>
<li class="chapter" data-level="18.4" data-path="dracor.html"><a href="dracor.html#модулярность"><i class="fa fa-check"></i><b>18.4</b> Модулярность</a></li>
<li class="chapter" data-level="18.5" data-path="dracor.html"><a href="dracor.html#алгоритмы-обнаружения-сообществ"><i class="fa fa-check"></i><b>18.5</b> Алгоритмы обнаружения сообществ</a></li>
<li class="chapter" data-level="18.6" data-path="dracor.html"><a href="dracor.html#двудольные-графы-биграфы"><i class="fa fa-check"></i><b>18.6</b> Двудольные графы (биграфы)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="импорт-и-экспорт-данных" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Тема 6</span> Импорт и экспорт данных<a href="импорт-и-экспорт-данных.html#импорт-и-экспорт-данных" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="работа-с-табличными-данными" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Работа с табличными данными<a href="импорт-и-экспорт-данных.html#работа-с-табличными-данными" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Любой анализ данных начинается с импорта данных. Прежде чем что-то делать, проверьте свою рабочую директорию при помощи <code>getwd()</code> (<a href="https://youtu.be/z7pOxe6dDG0">подробнее</a>). Для смены можно использовать как <strong>абсолютный</strong>, так и <strong>относительный</strong> путь:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="импорт-и-экспорт-данных.html#cb339-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/olga/R_Workflow/Text_Analysis_2023&quot;</span>)</span>
<span id="cb339-2"><a href="импорт-и-экспорт-данных.html#cb339-2" tabindex="-1"></a></span>
<span id="cb339-3"><a href="импорт-и-экспорт-данных.html#cb339-3" tabindex="-1"></a><span class="co"># искать в текущей директории</span></span>
<span id="cb339-4"><a href="импорт-и-экспорт-данных.html#cb339-4" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;./Text_Analysis_2023&quot;</span>)</span>
<span id="cb339-5"><a href="импорт-и-экспорт-данных.html#cb339-5" tabindex="-1"></a></span>
<span id="cb339-6"><a href="импорт-и-экспорт-данных.html#cb339-6" tabindex="-1"></a><span class="co"># перейти на уровень вверх</span></span>
<span id="cb339-7"><a href="импорт-и-экспорт-данных.html#cb339-7" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;../&quot;</span>)</span></code></pre></div>
<p>Основная функция для скачивания файлов из Сети – <code>download.file()</code>, которой необходимо задать в качестве аргументов url, название сохраняемого файла, иногда также метод.</p>
<p>Попробуем скачать датасет из <a href="https://dataverse.pushdom.ru/dataverse/openlit">Репозитория открытых данных по русской литературе и фольклору</a> под названием <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2019.11-R002">“Байрон в русских переводах 1810–1860-х годов”</a>.</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="импорт-и-экспорт-данных.html#cb340-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dataverse.pushdom.ru/api/access/datafile/:persistentId?persistentId=doi:10.5072/openlit-2019.11-R002/VQRXXK&quot;</span></span>
<span id="cb340-2"><a href="импорт-и-экспорт-данных.html#cb340-2" tabindex="-1"></a></span>
<span id="cb340-3"><a href="импорт-и-экспорт-данных.html#cb340-3" tabindex="-1"></a><span class="co"># если url начинается с https, на Mac _может_ потребоваться указать method = &quot;curl&quot;</span></span>
<span id="cb340-4"><a href="импорт-и-экспорт-данных.html#cb340-4" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="at">destfile =</span> <span class="st">&quot;files/Byron.tab&quot;</span>) </span></code></pre></div>
<p>После этого в папке files появится новый файл. Получить список скачанных файлов можно при помощи <code>list.files()</code>.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="импорт-и-экспорт-данных.html#cb341-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;./files&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.tab&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Byron.tab&quot;</code></pre>
</div>
<div id="чтение-табличных-данных" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Чтение табличных данных<a href="импорт-и-экспорт-данных.html#чтение-табличных-данных" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Основные функции для чтения табличных данных в базовом R - это <code>read.table()</code> и <code>read.csv()</code>.</p>
<div id="csv-и-tsv" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> csv и tsv<a href="импорт-и-экспорт-данных.html#csv-и-tsv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Файл, который мы скачали, имеет расширение <code>.tab</code>. Такие файлы по структуре аналогичны файлам <code>.tsv</code> (tab separated values). Чтобы его прочитать, используем <code>read.table()</code>, указав тип разделителя:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="импорт-и-экспорт-данных.html#cb343-1" tabindex="-1"></a>Byron <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;files/Byron.tab&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb343-2"><a href="импорт-и-экспорт-данных.html#cb343-2" tabindex="-1"></a></span>
<span id="cb343-3"><a href="импорт-и-экспорт-данных.html#cb343-3" tabindex="-1"></a><span class="fu">head</span>(Byron[,<span class="dv">5</span>])</span></code></pre></div>
<pre><code>## [1] &quot;б.п.&quot;                     &quot;б.п., с пометой: Варшава&quot;
## [3] &quot;К. П. Б.&quot;                 &quot;И. Козлов&quot;               
## [5] &quot;К.&quot;                       &quot;NN&quot;</code></pre>
<p>Функция <code>read.csv()</code> отличается лишь тем, что автоматически выставляет значения аргументов <code>sep = ","</code>, header = TRUE.</p>
<p>В диалекте tidyverse для импорта подобных файлов используется функция read_csv из пакета <code>readr</code><a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>.</p>
<p>Вернемся к нашему датасету про буккроссинг, файлы которого имеют расширение csv. К сожалению, это не всегда гарантия того, что перед вами действительно csv:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="импорт-и-экспорт-данных.html#cb345-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb345-2"><a href="импорт-и-экспорт-данных.html#cb345-2" tabindex="-1"></a>users <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/BX/BX-Users.csv&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb345-3"><a href="импорт-и-экспорт-данных.html#cb345-3" tabindex="-1"></a><span class="fu">head</span>(users)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 1
##   `User-ID;Location;Age`                   
##   &lt;chr&gt;                                    
## 1 1;nyc, new york, usa;NULL                
## 2 2;stockton, california, usa;18           
## 3 3;moscow, yukon territory, russia;NULL   
## 4 4;porto, v.n.gaia, portugal;17           
## 5 5;farnborough, hants, united kingdom;NULL
## 6 6;santa monica, california, usa;61</code></pre>
<p>Чтобы исправить дело, воспользуемся другой функцией из того же пакета:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="импорт-и-экспорт-данных.html#cb347-1" tabindex="-1"></a>users <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;files/BX/BX-Users.csv&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;;&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb347-2"><a href="импорт-и-экспорт-данных.html#cb347-2" tabindex="-1"></a>users</span></code></pre></div>
<pre><code>## # A tibble: 246,666 × 3
##    `User-ID` Location                           Age  
##        &lt;dbl&gt; &lt;chr&gt;                              &lt;chr&gt;
##  1         1 nyc, new york, usa                 NULL 
##  2         2 stockton, california, usa          18   
##  3         3 moscow, yukon territory, russia    NULL 
##  4         4 porto, v.n.gaia, portugal          17   
##  5         5 farnborough, hants, united kingdom NULL 
##  6         6 santa monica, california, usa      61   
##  7         7 washington, dc, usa                NULL 
##  8         8 timmins, ontario, canada           NULL 
##  9         9 germantown, tennessee, usa         NULL 
## 10        10 albacete, wisconsin, spain         26   
## # ℹ 246,656 more rows</code></pre>
<p>Очевидно, это не решает всех проблем, но как справиться с оставшимися, мы рассказывали в уроке об опрятных данных.</p>
</div>
<div id="xls-и-xlsx" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> xls и xlsx<a href="импорт-и-экспорт-данных.html#xls-и-xlsx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Не самый любимый аналитиками, но очень распространенный тип файлов. Чтобы с ним работать, нужно установить пакет <code>readxl</code> из семейства tidyverse<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a>. Это не единственный пакет для работы с Excel, но, пожалуй, самый удобный. Файл с самыми популярными на Amazon книгами можно взять <a href="https://www.kaggle.com/datasets/palanjali007/amazons-top-50-bestselling-novels-20092020">здесь</a>.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="импорт-и-экспорт-данных.html#cb349-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb349-2"><a href="импорт-и-экспорт-данных.html#cb349-2" tabindex="-1"></a>amazon <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;files/AmazonBooks.xlsx&quot;</span>)</span>
<span id="cb349-3"><a href="импорт-и-экспорт-данных.html#cb349-3" tabindex="-1"></a><span class="fu">head</span>(amazon)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   Name                            Author `User Rating` Reviews Price  Year Genre
##   &lt;chr&gt;                           &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1 10-Day Green Smoothie Cleanse   JJ Sm…           4.7   17350     8  2016 Non …
## 2 11/22/63: A Novel               Steph…           4.6    2052    22  2011 Fict…
## 3 12 Rules for Life: An Antidote… Jorda…           4.7   18979    15  2018 Non …
## 4 1984 (Signet Classics)          Georg…           4.7   21424     6  2017 Fict…
## 5 5,000 Awesome Facts (About Eve… Natio…           4.8    7665    12  2019 Non …
## 6 A Dance with Dragons (A Song o… Georg…           4.4   12643    11  2011 Fict…</code></pre>
<p>Можно указать отдельные листы, которые необходимо прочитать.<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
</div>
</div>
<div id="чтение-текстовых-данных" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Чтение текстовых данных<a href="импорт-и-экспорт-данных.html#чтение-текстовых-данных" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="txt" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> txt<a href="импорт-и-экспорт-данных.html#txt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для чтения текстовых файлов в базовом R есть функция <code>readlines()</code>. Аргумент <code>n</code> указывает, сколько строк прочитать; при <code>n = 1</code> функция дойдет до первого переноса строки или параграфа.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="импорт-и-экспорт-данных.html#cb351-1" tabindex="-1"></a><span class="fu">readLines</span>(<span class="at">con =</span> <span class="st">&quot;files/karamzin_liza.txt&quot;</span>, <span class="at">n =</span> <span class="dv">1</span>) </span></code></pre></div>
<pre><code>## [1] &quot;    Может быть, никто из живущих в Москве не знает так хорошо окрестностей города сего, как я, потому что никто чаще моего не бывает в поле, никто более моего не бродит пешком, без плана, без цели -- куда глаза глядят -- по лугам и рощам, по холмам и равнинам. Всякое лето нахожу новые приятные места или в старых новые красоты. Но всего приятнее для меня то место, на котором возвышаются мрачные, готические башни Си...нова монастыря. Стоя на сей горе, видишь на правой стороне почти всю Москву, сию ужасную громаду домов и церквей, которая представляется глазам в образе величественного амфитеатра: великолепная картина, особливо когда светит на нее солнце, когда вечерние лучи его пылают на бесчисленных златых куполах, на бесчисленных крестах, к небу возносящихся! Внизу расстилаются тучные, густо-зеленые цветущие луга, а за ними, по желтым пескам, течет светлая река, волнуемая легкими веслами рыбачьих лодок или шумящая под рулем грузных стругов, которые плывут от плодоноснейших стран Российской империи и наделяют алчную Москву хлебом. &quot;</code></pre>
</div>
<div id="doc" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> doc<a href="импорт-и-экспорт-данных.html#doc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Если есть возможность конвертировать документ Word в простой текстовый формат, то лучше так и сделать. Если нет, то устанавливаем пакет <code>officer</code>.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="импорт-и-экспорт-данных.html#cb353-1" tabindex="-1"></a><span class="fu">library</span>(officer)</span>
<span id="cb353-2"><a href="импорт-и-экспорт-данных.html#cb353-2" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;files&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;docx&quot;</span>) </span>
<span id="cb353-3"><a href="импорт-и-экспорт-данных.html#cb353-3" tabindex="-1"></a></span>
<span id="cb353-4"><a href="импорт-и-экспорт-данных.html#cb353-4" tabindex="-1"></a><span class="co"># read file</span></span>
<span id="cb353-5"><a href="импорт-и-экспорт-данных.html#cb353-5" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">read_docx</span>(<span class="fu">paste0</span>(<span class="st">&quot;files/&quot;</span>, files[<span class="dv">1</span>]))</span>
<span id="cb353-6"><a href="импорт-и-экспорт-данных.html#cb353-6" tabindex="-1"></a>content <span class="ot">&lt;-</span> <span class="fu">docx_summary</span>(doc) </span>
<span id="cb353-7"><a href="импорт-и-экспорт-данных.html#cb353-7" tabindex="-1"></a><span class="fu">head</span>(content, <span class="dv">2</span>) <span class="co"># весь текст доступен в столбце text</span></span></code></pre></div>
<pre><code>##   doc_index content_type style_name          text level num_id
## 1         1    paragraph         NA Chapter Title    NA     NA
## 2         2    paragraph         NA Author’s Name    NA     NA</code></pre>
<p>Таким образом, однако, мы теряем все сноски. Следующий код позволяет их достать:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="импорт-и-экспорт-данных.html#cb355-1" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb355-2"><a href="импорт-и-экспорт-данных.html#cb355-2" tabindex="-1"></a><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(doc<span class="sc">$</span>footnotes<span class="sc">$</span><span class="fu">get</span>(), <span class="st">&quot;*&quot;</span>))</span></code></pre></div>
<p>Тут уже применяются функции для работы с xml. Поэтому лишний раз подумайте, не проще ли конвертировать документ Word в .txt.</p>
</div>
<div id="pdf" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> pdf<a href="импорт-и-экспорт-данных.html#pdf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>С pdf тоже без нужды лучше не иметь дела. Но если все-таки пришлось читать pdf, для этого есть пакет <code>pdftools</code><a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>.</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="импорт-и-экспорт-данных.html#cb356-1" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb356-2"><a href="импорт-и-экспорт-данных.html#cb356-2" tabindex="-1"></a></span>
<span id="cb356-3"><a href="импорт-и-экспорт-данных.html#cb356-3" tabindex="-1"></a><span class="co"># длинющий вектор, который придется очищать от \n (новая строка)</span></span>
<span id="cb356-4"><a href="импорт-и-экспорт-данных.html#cb356-4" tabindex="-1"></a>liza <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="at">pdf =</span> <span class="st">&quot;files/karamzin_liza.pdf&quot;</span>)</span>
<span id="cb356-5"><a href="импорт-и-экспорт-данных.html#cb356-5" tabindex="-1"></a></span>
<span id="cb356-6"><a href="импорт-и-экспорт-данных.html#cb356-6" tabindex="-1"></a><span class="co"># метаданные в виде списка</span></span>
<span id="cb356-7"><a href="импорт-и-экспорт-данных.html#cb356-7" tabindex="-1"></a>meta <span class="ot">&lt;-</span> <span class="fu">pdf_info</span>(<span class="at">pdf =</span> <span class="st">&quot;files/karamzin_liza.pdf&quot;</span>)</span>
<span id="cb356-8"><a href="импорт-и-экспорт-данных.html#cb356-8" tabindex="-1"></a>meta<span class="sc">$</span>created</span></code></pre></div>
<pre><code>## [1] &quot;2023-07-16 19:36:09 MSK&quot;</code></pre>
<p>Разработчики утверждают, что пакет справится и с распознаванием текста, но для этого должен быть установлен пакет <code>tesseract</code>.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="импорт-и-экспорт-данных.html#cb358-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tesseract&quot;</span>)</span></code></pre></div>
<p>Возможно, сначала вам придется установить нужные языки. Код ниже вы можете попробовать выполнить самостоятельно, указав актуальный путь до файла.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="импорт-и-экспорт-данных.html#cb359-1" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="cb359-2"><a href="импорт-и-экспорт-данных.html#cb359-2" tabindex="-1"></a><span class="fu">tesseract_download</span>(<span class="st">&quot;deu&quot;</span>)</span>
<span id="cb359-3"><a href="импорт-и-экспорт-данных.html#cb359-3" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">pdf_ocr_text</span>(<span class="st">&quot;./files/German.pdf&quot;</span>, <span class="at">language =</span> <span class="st">&quot;deu&quot;</span>)</span>
<span id="cb359-4"><a href="импорт-и-экспорт-данных.html#cb359-4" tabindex="-1"></a><span class="fu">cat</span>(text)</span></code></pre></div>
</div>
<div id="png" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> png<a href="импорт-и-экспорт-данных.html#png" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Тот же фокус сработает и с изображениями. Но точность распознавания сильно зависит от качества картинки.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="импорт-и-экспорт-данных.html#cb360-1" tabindex="-1"></a><span class="co"># tesseract_download(&quot;lat&quot;)</span></span>
<span id="cb360-2"><a href="импорт-и-экспорт-данных.html#cb360-2" tabindex="-1"></a>lat <span class="ot">&lt;-</span> tesseract<span class="sc">::</span><span class="fu">tesseract</span>(<span class="st">&quot;lat&quot;</span>)</span>
<span id="cb360-3"><a href="импорт-и-экспорт-данных.html#cb360-3" tabindex="-1"></a>text <span class="ot">&lt;-</span> tesseract<span class="sc">::</span><span class="fu">ocr</span>(<span class="st">&quot;./images/latin.png&quot;</span>, <span class="at">engine =</span> lat)</span>
<span id="cb360-4"><a href="импорт-и-экспорт-данных.html#cb360-4" tabindex="-1"></a><span class="fu">cat</span>(text)</span></code></pre></div>
<pre><code>## PROLEGOMENA
## | OGN |
## PHEILENEUM.. |
## MPhilebum Platonis qui recte interpretari voluerint, iis
## nostra sententia ante omnia duo sedulo agenda sunt.
## Primum enim omnis disputationis ordinem rationemque
## diligentissime debent considerare accurateque videre,
## quidnam illud sit quod in eo libro exponatur et quo id
## modo fiat. Quod quidem in hoc libro inprimis putamus
## necessarium propterea, quod quae sit universae dispu-
## tationis via et ratio, utique difficilius intellectu est.</code></pre>
<p><img src="images/latin.png" /></p>
</div>
</div>
<div id="архивы" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Архивы<a href="импорт-и-экспорт-данных.html#архивы" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="zip" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> zip<a href="импорт-и-экспорт-данных.html#zip" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для работы с архивами есть функция <code>unzip()</code>. Полезно помнить, что большой архив не обязательно распечатывать полностью. Если выставить аргумент <code>list = TRUE</code>, то функция вернет список всех файлов в архиве, из которых можно прочитать в память лишь избранные:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="импорт-и-экспорт-данных.html#cb362-1" tabindex="-1"></a>archive <span class="ot">&lt;-</span> <span class="fu">unzip</span>(<span class="st">&quot;files/archive.zip&quot;</span>, <span class="at">files =</span> <span class="cn">NULL</span>, <span class="at">list =</span> <span class="cn">TRUE</span>) </span>
<span id="cb362-2"><a href="импорт-и-экспорт-данных.html#cb362-2" tabindex="-1"></a>archive</span></code></pre></div>
<pre><code>##                       Name Length                Date
## 1 AmazonBooks - Sheet1.csv  55367 2021-02-18 19:58:00
## 2         AmazonBooks.xlsx  36021 2021-02-18 19:58:00</code></pre>
<p>Код ниже позволяет извлечь из архива только нужный файл:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="импорт-и-экспорт-данных.html#cb364-1" tabindex="-1"></a><span class="fu">unzip</span>(<span class="st">&quot;files/archive.zip&quot;</span>, <span class="at">files =</span> <span class="st">&quot;AmazonBooks.xlsx&quot;</span>)</span></code></pre></div>
<p>После этого файл можно прочитать в R, как указано выше.</p>
</div>
</div>
<div id="структурированные-данные" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Структурированные данные<a href="импорт-и-экспорт-данных.html#структурированные-данные" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="json" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> json<a href="импорт-и-экспорт-данных.html#json" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Формат JSON (JavaScript Object Notation) предназначен для представления структурированных данных. JSON имеет шесть основных типов данных<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>. Четыре из них - скаляры<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>:</p>
<ul>
<li>Самый простой тип - <code>null</code> (нуль), который играет ту же роль, что и <code>NA</code> в R. Он представляет собой отсутствие данных.</li>
<li>Строка (string) похожа на строку в R, но в ней всегда должны использоваться двойные кавычки.</li>
<li>Число аналогично числам в R; поддерживается целочисленная (например, 123), десятичная (например, 123.45) или научная (например, 1,23e3) нотация. JSON не поддерживает <code>Inf</code>, <code>-Inf</code> или <code>NaN</code>.</li>
<li>Логическое значение аналогично <code>TRUE</code> и <code>FALSE</code> в R, но использует строчные буквы <code>true</code> и <code>false</code>.</li>
</ul>
<p>Строки, числа и булевы значения в JSON очень похожи на символьные, числовые и логические векторы в R. Основное отличие заключается в том, что скаляры JSON могут представлять только одно значение. Для представления нескольких значений необходимо использовать один из двух оставшихся типов: массивы и объекты.</p>
<p>И массивы, и объекты похожи на списки в R, разница заключается в том, именованы они или нет. <strong>Массив</strong> подобен безымянному списку и записывается через <code>[]</code>. Например, <code>[1, 2, 3]</code> - это массив, содержащий 3 числа, а <code>[null, 1, "string", false]</code> - массив, содержащий ноль, число, строку и булево значение.</p>
<p><strong>Объект</strong> подобен именованному списку и записывается через <code>{}</code>. Имена (ключи в терминологии JSON) являются строками, поэтому должны быть заключены в кавычки. Например, {“x”: 1, “y”: 2} - это объект, который сопоставляет x с 1, а y – с 2.</p>
<p>Загрузим небольшой файл <code>TBBT.json</code>, хранящий данные о сериале “Теория большого взрыва” (<a href="https://gist.github.com/sahithyandev/540c82170a19f97deef9e23796083f01">источник</a>).</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="импорт-и-экспорт-данных.html#cb365-1" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb365-2"><a href="импорт-и-экспорт-данных.html#cb365-2" tabindex="-1"></a></span>
<span id="cb365-3"><a href="импорт-и-экспорт-данных.html#cb365-3" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;./files/TBBT.json&quot;</span></span>
<span id="cb365-4"><a href="импорт-и-экспорт-данных.html#cb365-4" tabindex="-1"></a>tbbt <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="at">txt =</span>  path,</span>
<span id="cb365-5"><a href="импорт-и-экспорт-данных.html#cb365-5" tabindex="-1"></a>                 <span class="at">simplifyVector =</span> T)</span></code></pre></div>
<p>Функция <code>fromJSON()</code> вернет нам список, который мы выборочно преобразуем в тиббл:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="импорт-и-экспорт-данных.html#cb366-1" tabindex="-1"></a>cast_tbl <span class="ot">&lt;-</span> tbbt<span class="sc">$</span>casting <span class="sc">%&gt;%</span> </span>
<span id="cb366-2"><a href="импорт-и-экспорт-данных.html#cb366-2" tabindex="-1"></a>  <span class="fu">transpose</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb366-3"><a href="импорт-и-экспорт-данных.html#cb366-3" tabindex="-1"></a>  <span class="fu">map</span>(as.character) <span class="sc">%&gt;%</span> </span>
<span id="cb366-4"><a href="импорт-и-экспорт-данных.html#cb366-4" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb366-5"><a href="импорт-и-экспорт-данных.html#cb366-5" tabindex="-1"></a></span>
<span id="cb366-6"><a href="импорт-и-экспорт-данных.html#cb366-6" tabindex="-1"></a>cast_tbl</span></code></pre></div>
<pre><code>## # A tibble: 11 × 3
##    character_name          actor_name      first_appearance
##    &lt;chr&gt;                   &lt;chr&gt;           &lt;chr&gt;           
##  1 Sheldon Cooper          Jim Parsons     S01E01          
##  2 Leonard Hofstadter      Johnny Galecki  S01E01          
##  3 Penny                   Kaley Cuoco     S01E01          
##  4 Raj Kooththirapll       Kunal Nayyar    S01E01          
##  5 Howard Wolowitz         Simon Helberg   S01E01          
##  6 Bernadette Rostenkowski Melissa Rauch   S03E05          
##  7 Amy Farrah Fowler       Mayim Bialik    S03E23          
##  8 Stuart Bloom            Kevin Sussman   NULL            
##  9 Wil Wheaton             Wil Wheaton     NULL            
## 10 Barry Kripke            John Ross Bowie NULL            
## 11 Zack                    NULL            NULL</code></pre>
<p>Проделаем то же самое для списка эпизодов, но немного другим способом.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="импорт-и-экспорт-данных.html#cb368-1" tabindex="-1"></a>episodes_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb368-2"><a href="импорт-и-экспорт-данных.html#cb368-2" tabindex="-1"></a>  <span class="at">episode_id =</span> <span class="fu">map_chr</span>(tbbt<span class="sc">$</span>episode_list, pluck, <span class="st">&quot;episode_id&quot;</span>),</span>
<span id="cb368-3"><a href="импорт-и-экспорт-данных.html#cb368-3" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">map_chr</span>(tbbt<span class="sc">$</span>episode_list, pluck, <span class="st">&quot;title&quot;</span>))</span>
<span id="cb368-4"><a href="импорт-и-экспорт-данных.html#cb368-4" tabindex="-1"></a></span>
<span id="cb368-5"><a href="импорт-и-экспорт-данных.html#cb368-5" tabindex="-1"></a>episodes_tbl</span></code></pre></div>
<pre><code>## # A tibble: 280 × 2
##    episode_id title                             
##    &lt;chr&gt;      &lt;chr&gt;                             
##  1 S01E01     Pilot                             
##  2 S01E02     The Big Bran Hypothesis           
##  3 S01E03     The Fuzzy Boots Corollary         
##  4 S01E04     The Luminous Fish Effect          
##  5 S01E05     The Hamburger Postulate           
##  6 S01E06     The Middle-Earth Paradigm         
##  7 S01E07     The Dumpling Paradox              
##  8 S01E08     The Grasshopper Experiment        
##  9 S01E09     The Cooper-Hofstadter Polarization
## 10 S01E10     The Loobenfeld Decay              
## # ℹ 270 more rows</code></pre>
<p></br></p>
<div class="task code">
<p>Самостоятельно создайте тиббл, в котором будет храниться количество серий для каждого сезона.</p>
</div>
<p><img src="https://i.redd.it/brhcksszl1k61.jpg" style="width:50.0%" /></p>
</div>
<div id="xml" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> xml<a href="импорт-и-экспорт-данных.html#xml" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>XML</strong> (от англ. eXtensible Markup Language) — расширяемый язык разметки. Слово “расширяемый” означает, что список тегов не зафиксирован раз и навсегда: пользователи могут вводить свои собственные теги и создавать так называемые <strong>настраиваемые языки разметки</strong> <span class="citation">(<a href="#ref-xml2004">Холзнер 2004, 29</a>)</span>. Один из таких настраиваемых языков – это <strong>TEI</strong> (Text Encoding Initiative), о котором будет сказано дальше.</p>
<p>Назначение языков разметки заключается в описании структурированных документов. Структура документа представляется в виде набора вложенных в друг друга элементов (<strong>дерева XML</strong>). У элементов есть открывающие и закрывающие теги.</p>
<p>Все составляющие части документа обобщаются в пролог и корневой элемент. <strong>Корневой элемент</strong> — обязательная часть документа, в которую вложены все остальные элементы. <strong>Пролог</strong> может включать объявления, инструкции обработки, комментарии.</p>
<p>В правильно сформированном XML открывающий и закрывающий тег вложенного элемента всегда находятся внутри одного родительского элемента.</p>
<p>Создадим простой XML из строки. Сначала идет инструкция по обработке XML (со знаком вопроса), за ней следует объявление типа документа (с восклицательным знаком) и открывающий тег корневого элемента. В этот корневой элемент вложены все остальные элементы.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="импорт-и-экспорт-данных.html#cb370-1" tabindex="-1"></a>string_xml <span class="ot">&lt;-</span> <span class="st">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span id="cb370-2"><a href="импорт-и-экспорт-данных.html#cb370-2" tabindex="-1"></a><span class="st">&lt;!DOCTYPE recipe&gt;</span></span>
<span id="cb370-3"><a href="импорт-и-экспорт-данных.html#cb370-3" tabindex="-1"></a><span class="st">&lt;recipe name=&quot;хлеб&quot; preptime=&quot;5min&quot; cooktime=&quot;180min&quot;&gt;</span></span>
<span id="cb370-4"><a href="импорт-и-экспорт-данных.html#cb370-4" tabindex="-1"></a><span class="st">   &lt;title&gt;</span></span>
<span id="cb370-5"><a href="импорт-и-экспорт-данных.html#cb370-5" tabindex="-1"></a><span class="st">      Простой хлеб</span></span>
<span id="cb370-6"><a href="импорт-и-экспорт-данных.html#cb370-6" tabindex="-1"></a><span class="st">   &lt;/title&gt;</span></span>
<span id="cb370-7"><a href="импорт-и-экспорт-данных.html#cb370-7" tabindex="-1"></a><span class="st">   &lt;composition&gt;</span></span>
<span id="cb370-8"><a href="импорт-и-экспорт-данных.html#cb370-8" tabindex="-1"></a><span class="st">      &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;</span></span>
<span id="cb370-9"><a href="импорт-и-экспорт-данных.html#cb370-9" tabindex="-1"></a><span class="st">      &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;</span></span>
<span id="cb370-10"><a href="импорт-и-экспорт-данных.html#cb370-10" tabindex="-1"></a><span class="st">      &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;</span></span>
<span id="cb370-11"><a href="импорт-и-экспорт-данных.html#cb370-11" tabindex="-1"></a><span class="st">   &lt;/composition&gt;</span></span>
<span id="cb370-12"><a href="импорт-и-экспорт-данных.html#cb370-12" tabindex="-1"></a><span class="st">   &lt;instructions&gt;</span></span>
<span id="cb370-13"><a href="импорт-и-экспорт-данных.html#cb370-13" tabindex="-1"></a><span class="st">     &lt;step&gt;</span></span>
<span id="cb370-14"><a href="импорт-и-экспорт-данных.html#cb370-14" tabindex="-1"></a><span class="st">        Смешать все ингредиенты и тщательно замесить. </span></span>
<span id="cb370-15"><a href="импорт-и-экспорт-данных.html#cb370-15" tabindex="-1"></a><span class="st">     &lt;/step&gt;</span></span>
<span id="cb370-16"><a href="импорт-и-экспорт-данных.html#cb370-16" tabindex="-1"></a><span class="st">     &lt;step&gt;</span></span>
<span id="cb370-17"><a href="импорт-и-экспорт-данных.html#cb370-17" tabindex="-1"></a><span class="st">        Закрыть тканью и оставить на один час в тёплом помещении. </span></span>
<span id="cb370-18"><a href="импорт-и-экспорт-данных.html#cb370-18" tabindex="-1"></a><span class="st">     &lt;/step&gt;</span></span>
<span id="cb370-19"><a href="импорт-и-экспорт-данных.html#cb370-19" tabindex="-1"></a><span class="st">     &lt;step&gt;</span></span>
<span id="cb370-20"><a href="импорт-и-экспорт-данных.html#cb370-20" tabindex="-1"></a><span class="st">        Замесить ещё раз, положить на противень и поставить в духовку.</span></span>
<span id="cb370-21"><a href="импорт-и-экспорт-данных.html#cb370-21" tabindex="-1"></a><span class="st">     &lt;/step&gt;</span></span>
<span id="cb370-22"><a href="импорт-и-экспорт-данных.html#cb370-22" tabindex="-1"></a><span class="st">   &lt;/instructions&gt;</span></span>
<span id="cb370-23"><a href="импорт-и-экспорт-данных.html#cb370-23" tabindex="-1"></a><span class="st">&lt;/recipe&gt;&#39;</span></span></code></pre></div>
<p>Для работы с xml понадобится установить одноименную библиотеку. Функция <code>xmlTreeParse()</code> создаст R-структуру, представляющую дерево XML.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="импорт-и-экспорт-данных.html#cb371-1" tabindex="-1"></a><span class="fu">library</span>(XML)</span>
<span id="cb371-2"><a href="импорт-и-экспорт-данных.html#cb371-2" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">xmlTreeParse</span>(string_xml)</span>
<span id="cb371-3"><a href="импорт-и-экспорт-данных.html#cb371-3" tabindex="-1"></a><span class="fu">class</span>(doc)</span></code></pre></div>
<pre><code>## [1] &quot;XMLDocument&quot;         &quot;XMLAbstractDocument&quot;</code></pre>
<p>Функция xmlRoot позволяет извлечь корневой элемент вместе со всеми детьми.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="импорт-и-экспорт-данных.html#cb373-1" tabindex="-1"></a>rootnode <span class="ot">&lt;-</span> <span class="fu">xmlRoot</span>(doc)</span>
<span id="cb373-2"><a href="импорт-и-экспорт-данных.html#cb373-2" tabindex="-1"></a>rootnode</span></code></pre></div>
<pre><code>## &lt;recipe name=&quot;хлеб&quot; preptime=&quot;5min&quot; cooktime=&quot;180min&quot;&gt;
##  &lt;title&gt;Простой хлеб&lt;/title&gt;
##  &lt;composition&gt;
##   &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
##   &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;
##   &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;
##  &lt;/composition&gt;
##  &lt;instructions&gt;
##   &lt;step&gt;Смешать все ингредиенты и тщательно замесить.&lt;/step&gt;
##   &lt;step&gt;Закрыть тканью и оставить на один час в тёплом помещении.&lt;/step&gt;
##   &lt;step&gt;Замесить ещё раз, положить на противень и поставить в духовку.&lt;/step&gt;
##  &lt;/instructions&gt;
## &lt;/recipe&gt;</code></pre>
<p>Если документ большой, бывает удобнее не распечатывать все дерево, а вывести имена дочерних элементов.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="импорт-и-экспорт-данных.html#cb375-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">xmlChildren</span>(rootnode))</span></code></pre></div>
<pre><code>## [1] &quot;title&quot;        &quot;composition&quot;  &quot;instructions&quot;</code></pre>
<p>Размер узла – это число вложенных в него “детей”. Его можно узнать, применив к узлу функцию <code>xmlSize()</code> – или подсчитав число “детей”.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="импорт-и-экспорт-данных.html#cb377-1" tabindex="-1"></a><span class="fu">xmlSize</span>(rootnode) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">xmlChildren</span>(rootnode))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Работать с xml можно как с обычным списком, то есть индексировать узлы по имени или по номеру элемента при помощи квадратных скобок. Так мы достаем узел по имени:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="импорт-и-экспорт-данных.html#cb379-1" tabindex="-1"></a>rootnode[[<span class="st">&quot;composition&quot;</span>]]</span></code></pre></div>
<pre><code>## &lt;composition&gt;
##  &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
##  &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;
##  &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;
## &lt;/composition&gt;</code></pre>
<p>А так – по индексу:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="импорт-и-экспорт-данных.html#cb381-1" tabindex="-1"></a>rootnode[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## &lt;composition&gt;
##  &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
##  &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;
##  &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;
## &lt;/composition&gt;</code></pre>
<p>Как и с обычными списками, мы можем использовать последовательности квадратных скобок:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="импорт-и-экспорт-данных.html#cb383-1" tabindex="-1"></a>ingr_node <span class="ot">&lt;-</span> rootnode[[<span class="dv">2</span>]][[<span class="st">&quot;ingredient&quot;</span>]]</span>
<span id="cb383-2"><a href="импорт-и-экспорт-данных.html#cb383-2" tabindex="-1"></a>ingr_node</span></code></pre></div>
<pre><code>## &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;</code></pre>
<p>Но обычно нам нужен не элемент как таковой, а его содержание (значение). Чтобы добраться до него, используем функцию <code>xmlValue()</code>:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="импорт-и-экспорт-данных.html#cb385-1" tabindex="-1"></a><span class="fu">xmlValue</span>(ingr_node)</span></code></pre></div>
<pre><code>## [1] &quot;Мука&quot;</code></pre>
<p>Можно уточнить атрибуты узла при помощи <code>xmlAttrs()</code>:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="импорт-и-экспорт-данных.html#cb387-1" tabindex="-1"></a><span class="fu">xmlAttrs</span>(ingr_node)</span></code></pre></div>
<pre><code>##   amount     unit 
##      &quot;3&quot; &quot;стакан&quot;</code></pre>
<p>Чтобы извлечь значение атрибута, используем функцию <code>xmlGetAttr()</code>. Первым аргументом функции передаем xml-узел, вторым – имя атрибута.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="импорт-и-экспорт-данных.html#cb389-1" tabindex="-1"></a><span class="fu">xmlGetAttr</span>(ingr_node, <span class="st">&quot;unit&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;стакан&quot;</code></pre>
<p>Как насчет того, чтобы применить функцию к набору узлов – например, ко всем инредиентам? Вспоминаем функции для работы со списками – <code>sapply()</code> из базового R или <code>map()</code> из пакета <code>purrr</code>:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="импорт-и-экспорт-данных.html#cb391-1" tabindex="-1"></a>ingr_nodes <span class="ot">&lt;-</span> <span class="fu">xmlChildren</span>(rootnode[[<span class="dv">2</span>]])</span>
<span id="cb391-2"><a href="импорт-и-экспорт-данных.html#cb391-2" tabindex="-1"></a></span>
<span id="cb391-3"><a href="импорт-и-экспорт-данных.html#cb391-3" tabindex="-1"></a><span class="fu">sapply</span>(ingr_nodes, xmlValue)</span></code></pre></div>
<pre><code>##    ingredient    ingredient    ingredient 
##        &quot;Мука&quot;      &quot;Дрожжи&quot; &quot;Тёплая вода&quot;</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="импорт-и-экспорт-данных.html#cb393-1" tabindex="-1"></a><span class="fu">sapply</span>(ingr_nodes, xmlGetAttr, <span class="st">&quot;unit&quot;</span>)</span></code></pre></div>
<pre><code>## ingredient ingredient ingredient 
##   &quot;стакан&quot;    &quot;грамм&quot;   &quot;стакан&quot;</code></pre>
<p>Добраться до узлов определенного уровня можно также при помощи синтаксиса <a href="https://ru.wikipedia.org/wiki/XPath">XPath</a>. XPath – это язык запросов к элементам XML-документа. С его помощью можно описать “путь” до нужного узла: <strong>абсолютный</strong> (начиная с корневого элемента) или <strong>относительный</strong>. В пакете <code>XML</code> синтаксис XPath поддерживает функция <code>getNodeSet()</code>.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="импорт-и-экспорт-данных.html#cb395-1" tabindex="-1"></a><span class="co"># абсолютный путь</span></span>
<span id="cb395-2"><a href="импорт-и-экспорт-данных.html#cb395-2" tabindex="-1"></a>ingr_nodes <span class="ot">&lt;-</span> <span class="fu">getNodeSet</span>(rootnode, <span class="st">&quot;/recipe//composition//ingredient&quot;</span>)</span>
<span id="cb395-3"><a href="импорт-и-экспорт-данных.html#cb395-3" tabindex="-1"></a></span>
<span id="cb395-4"><a href="импорт-и-экспорт-данных.html#cb395-4" tabindex="-1"></a>ingr_nodes</span></code></pre></div>
<pre><code>## [[1]]
## &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
## 
## [[2]]
## &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;
## 
## [[3]]
## &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="импорт-и-экспорт-данных.html#cb397-1" tabindex="-1"></a><span class="co"># относительный путь</span></span>
<span id="cb397-2"><a href="импорт-и-экспорт-данных.html#cb397-2" tabindex="-1"></a>ingr_nodes <span class="ot">&lt;-</span> <span class="fu">getNodeSet</span>(rootnode, <span class="st">&quot;//composition//ingredient&quot;</span>)</span>
<span id="cb397-3"><a href="импорт-и-экспорт-данных.html#cb397-3" tabindex="-1"></a></span>
<span id="cb397-4"><a href="импорт-и-экспорт-данных.html#cb397-4" tabindex="-1"></a>ingr_nodes</span></code></pre></div>
<pre><code>## [[1]]
## &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
## 
## [[2]]
## &lt;ingredient amount=&quot;0.25&quot; unit=&quot;грамм&quot;&gt;Дрожжи&lt;/ingredient&gt;
## 
## [[3]]
## &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;</code></pre>
<p></br></p>
<div class="infobox info">
<p>В большинстве случаев функция <code>getNodeSet()</code> требует задать <strong>пространство имен</strong> (namespace), но в нашем случае оно не определено, поэтому пока передаем только дерево и путь до узла. С пространством имен встретимся чуть позже!</p>
</div>
<p>Синтаксис XPath позволяет отбирать узлы с определенными атрибутами. Допустим, нам нужны только те узлы, где значение атрибута unit = “стакан”:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="импорт-и-экспорт-данных.html#cb399-1" tabindex="-1"></a><span class="fu">getNodeSet</span>(rootnode, <span class="st">&quot;//composition//ingredient[@unit=&#39;стакан&#39;]&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## &lt;ingredient amount=&quot;3&quot; unit=&quot;стакан&quot;&gt;Мука&lt;/ingredient&gt;
## 
## [[2]]
## &lt;ingredient amount=&quot;1.5&quot; unit=&quot;стакан&quot;&gt;Тёплая вода&lt;/ingredient&gt;</code></pre>
<p>При работе с xml в большинстве случаев наша задача – извлечь значения определеннных узлов или их атрибутов и сохранить их в прямоугольном формате.</p>
<p>В нашем простом примере это можно сделать несколькими способами. Первый: просто связать воедино несколько векторов.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="импорт-и-экспорт-данных.html#cb401-1" tabindex="-1"></a>title <span class="ot">&lt;-</span> <span class="fu">xmlValue</span>(rootnode[[<span class="st">&quot;title&quot;</span>]])</span>
<span id="cb401-2"><a href="импорт-и-экспорт-данных.html#cb401-2" tabindex="-1"></a>ingredients <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(<span class="fu">xmlChildren</span>(rootnode[[<span class="st">&quot;composition&quot;</span>]]), xmlValue)</span>
<span id="cb401-3"><a href="импорт-и-экспорт-данных.html#cb401-3" tabindex="-1"></a>unit <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(<span class="fu">xmlChildren</span>(rootnode[[<span class="st">&quot;composition&quot;</span>]]), xmlGetAttr, <span class="st">&quot;unit&quot;</span>)</span>
<span id="cb401-4"><a href="импорт-и-экспорт-данных.html#cb401-4" tabindex="-1"></a>amount <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(<span class="fu">xmlChildren</span>(rootnode[[<span class="st">&quot;composition&quot;</span>]]), xmlGetAttr, <span class="st">&quot;amount&quot;</span>)</span>
<span id="cb401-5"><a href="импорт-и-экспорт-данных.html#cb401-5" tabindex="-1"></a></span>
<span id="cb401-6"><a href="импорт-и-экспорт-данных.html#cb401-6" tabindex="-1"></a></span>
<span id="cb401-7"><a href="импорт-и-экспорт-данных.html#cb401-7" tabindex="-1"></a><span class="fu">tibble</span>(title, ingredients, unit, amount)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   title        ingredients unit   amount
##   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt; 
## 1 Простой хлеб Мука        стакан 3     
## 2 Простой хлеб Дрожжи      грамм  0.25  
## 3 Простой хлеб Тёплая вода стакан 1.5</code></pre>
<p>В некоторых случаях бывает удобно также воспользоваться функциями из пакета <code>xml2</code> в сочетании с функциями семейства <code>unnest_</code> из <code>tidyr</code>.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="импорт-и-экспорт-данных.html#cb403-1" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb403-2"><a href="импорт-и-экспорт-данных.html#cb403-2" tabindex="-1"></a></span>
<span id="cb403-3"><a href="импорт-и-экспорт-данных.html#cb403-3" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">as_list</span>(<span class="fu">read_xml</span>(string_xml))</span>
<span id="cb403-4"><a href="импорт-и-экспорт-данных.html#cb403-4" tabindex="-1"></a></span>
<span id="cb403-5"><a href="импорт-и-экспорт-данных.html#cb403-5" tabindex="-1"></a><span class="co"># попробуем достать атрибуты</span></span>
<span id="cb403-6"><a href="импорт-и-экспорт-данных.html#cb403-6" tabindex="-1"></a>doc <span class="sc">%&gt;%</span> </span>
<span id="cb403-7"><a href="импорт-и-экспорт-данных.html#cb403-7" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb403-8"><a href="импорт-и-экспорт-данных.html#cb403-8" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(recipe) <span class="sc">%&gt;%</span> </span>
<span id="cb403-9"><a href="импорт-и-экспорт-данных.html#cb403-9" tabindex="-1"></a>  <span class="fu">filter</span>(recipe_id <span class="sc">==</span> <span class="st">&quot;ingredient&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb403-10"><a href="импорт-и-экспорт-данных.html#cb403-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unit =</span> <span class="fu">map_chr</span>(recipe, attr, <span class="st">&quot;unit&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb403-11"><a href="импорт-и-экспорт-данных.html#cb403-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">amount =</span> <span class="fu">map_chr</span>(recipe, attr, <span class="st">&quot;amount&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb403-12"><a href="импорт-и-экспорт-данных.html#cb403-12" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>recipe_id) <span class="sc">%&gt;%</span> </span>
<span id="cb403-13"><a href="импорт-и-экспорт-данных.html#cb403-13" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(recipe)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   recipe      unit   amount
##   &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt; 
## 1 Мука        стакан 3     
## 2 Дрожжи      грамм  0.25  
## 3 Тёплая вода стакан 1.5</code></pre>
</div>
<div id="tei" class="section level3 hasAnchor" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> tei<a href="импорт-и-экспорт-данных.html#tei" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Большая часть размеченных литературных корпусов хранится именно в формате XML. Это очень удобно, и вот почему: документы в формате XML, как и документы в формате HTML, содержат данные, заключенные в теги, но если в формате HTML теги определяют оформление данных, то в формате XML теги нередко <em>определяют структуру и смысл данных</em>. С их помощью мы можем достать из документа именно то, что нам интересно: определенную главу, речи конкретных персонажей, слова на иностранных языках и т.п.</p>
<p>Добавлять и удалять разметку может любой пользователь в редакторе XML кода или даже в простом текстовом редакторе. При этом в качестве универсального языка разметки в гуманитарных дисциплинах используется язык TEI <span class="citation">(<a href="#ref-skorinkin2016">Скоринкин 2016</a>)</span>. Корневой элемент в документах TEI называется TEI, внутри него располагается элемент teiHeader с метаинформацией о документе и элемент text. Последний содержит текст документа с элементами, определяющими его структурное членение.</p>
<pre><code>&lt;TEI&gt;
  &lt;teiHeader&gt;&lt;/teiHeader&gt;
  &lt;text&gt;&lt;/text&gt;
&lt;/TEI&gt;</code></pre>
<p>Пример оформления документа можно посмотреть <a href="https://github.com/dracor-org/rusdracor/blob/main/tei/fonvizin-nedorosl.xml">по ссылке</a>.</p>
<p>У teiHeader есть четыре главных дочерних элемента:</p>
<ul>
<li>fileDesc (описание документа c библиографической информацией)</li>
<li>encodingDesc (описание способа кодирование первоисточника)</li>
<li>profileDesc (“досье” на текст, например отправитель и получатель для писем, жанр, используемые языки, обстоятельства создания, место написания и т.п.)</li>
<li>revisionDesc (история изменений документа)</li>
</ul>
<p>В самом тексте язык TEI дает возможность представлять разные варианты (авторские, редакторские, корректорские и др.) Основным средством параллельного представления является элемент choice. Например, в <a href="https://github.com/PerseusDL/canonical-latinLit/blob/master/data/phi0550/phi001/phi0550.phi001.perseus-lat1.xml">тексте Лукреция</a> вы можете увидеть такое:</p>
<pre><code>sic calor atque &lt;choice&gt;&lt;reg&gt;aer&lt;/reg&gt;&lt;orig&gt;aër&lt;/orig&gt;&lt;/choice&gt; et venti caeca potestas</code></pre>
<p>Здесь reg указывает на нормализованное написание, а orig – на оригинальное.</p>
<p>В качестве примера загрузим датасет “Пушкинского дома”, подготовленный Д.А. Скоринкиным: <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2022.1-C005">“Персонажи «Войны и мира» Л. Н. Толстого: вхождения в тексте, прямая речь и семантические роли”</a>.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="импорт-и-экспорт-данных.html#cb407-1" tabindex="-1"></a>filename <span class="ot">=</span> <span class="st">&quot;files/War_and_Peace.xml&quot;</span></span>
<span id="cb407-2"><a href="импорт-и-экспорт-данных.html#cb407-2" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">xmlTreeParse</span>(filename, <span class="at">useInternalNodes =</span> T)</span>
<span id="cb407-3"><a href="импорт-и-экспорт-данных.html#cb407-3" tabindex="-1"></a>rootnode <span class="ot">&lt;-</span> <span class="fu">xmlRoot</span>(doc)</span></code></pre></div>
<p>Теперь можно внимательнее взглянуть на структуру xml. Корневой элемент расходится на две ветви. Полностью они нам пока не нужны, узнаем только имена:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="импорт-и-экспорт-данных.html#cb408-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">xmlChildren</span>(rootnode)) </span></code></pre></div>
<pre><code>## [1] &quot;teiHeader&quot; &quot;text&quot;</code></pre>
<p>Очевидно, что что-то для нас интересное будет спрятано в ветке text, глядим на нее:</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="импорт-и-экспорт-данных.html#cb410-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">xmlChildren</span>(rootnode[[<span class="st">&quot;text&quot;</span>]])) </span></code></pre></div>
<pre><code>## [1] &quot;div&quot; &quot;div&quot; &quot;div&quot; &quot;div&quot; &quot;div&quot;</code></pre>
<p>Итак, текст делится на какие-то пять частей. Функция <code>xmlGetAttr()</code> позволяет узнать значение атрибута <code>type</code>: как выясняется, это четыре тома и эпилог.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="импорт-и-экспорт-данных.html#cb412-1" tabindex="-1"></a><span class="co"># это список</span></span>
<span id="cb412-2"><a href="импорт-и-экспорт-данных.html#cb412-2" tabindex="-1"></a>divs <span class="ot">&lt;-</span>  rootnode[[<span class="st">&quot;text&quot;</span>]][<span class="st">&quot;div&quot;</span>]</span>
<span id="cb412-3"><a href="импорт-и-экспорт-данных.html#cb412-3" tabindex="-1"></a></span>
<span id="cb412-4"><a href="импорт-и-экспорт-данных.html#cb412-4" tabindex="-1"></a><span class="fu">sapply</span>(divs, xmlGetAttr, <span class="st">&quot;type&quot;</span>)</span></code></pre></div>
<pre><code>##        div        div        div        div        div 
##   &quot;volume&quot;   &quot;volume&quot;   &quot;volume&quot;   &quot;volume&quot; &quot;epilogue&quot;</code></pre>
<p>Как мы уже знаем, добраться до определенного узла можно не только путем индексирования, но и – гораздо удобнее – при помощи синтаксиса XPath. Для этого просто указываем путь до узла. Попробуем спуститься на два уровня ниже: там тоже будет тег div, но с другим атрибутом. Как легко убедиться, теперь это главы, всего их 358.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="импорт-и-экспорт-данных.html#cb414-1" tabindex="-1"></a>divs <span class="ot">&lt;-</span> <span class="fu">getNodeSet</span>(doc, <span class="st">&quot;/tei:TEI//tei:text//tei:div//tei:div//tei:div&quot;</span>,</span>
<span id="cb414-2"><a href="импорт-и-экспорт-данных.html#cb414-2" tabindex="-1"></a>                     <span class="at">namespaces =</span> <span class="fu">c</span>(<span class="at">tei =</span> <span class="st">&quot;http://www.tei-c.org/ns/1.0&quot;</span>)) </span>
<span id="cb414-3"><a href="импорт-и-экспорт-данных.html#cb414-3" tabindex="-1"></a></span>
<span id="cb414-4"><a href="импорт-и-экспорт-данных.html#cb414-4" tabindex="-1"></a><span class="fu">length</span>(divs)</span></code></pre></div>
<pre><code>## [1] 358</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="импорт-и-экспорт-данных.html#cb416-1" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">sapply</span>(divs, xmlGetAttr, <span class="st">&quot;type&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;chapter&quot;</code></pre>
<p>Обратите внимание, что в данном случае надо прямо прописать пространство имен (namespaces). Это можно посмотреть в самом xml, а можно воспользоваться специальной функцией:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="импорт-и-экспорт-данных.html#cb418-1" tabindex="-1"></a><span class="fu">xmlNamespace</span>(rootnode)</span></code></pre></div>
<pre><code>## [1] &quot;http://www.tei-c.org/ns/1.0&quot;
## attr(,&quot;class&quot;)
## [1] &quot;XMLNamespace&quot;</code></pre>
<p>Забрать конкретную главу можно путем индексации, но лучше – по значению соответствующего атрибута.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="импорт-и-экспорт-данных.html#cb420-1" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">map</span>(divs, xmlGetAttr, <span class="st">&quot;xml:id&quot;</span>) <span class="sc">==</span> <span class="st">&quot;chapter1part1Volume1&quot;</span>)</span>
<span id="cb420-2"><a href="импорт-и-экспорт-данных.html#cb420-2" tabindex="-1"></a>ch1 <span class="ot">&lt;-</span> divs[[idx]]</span></code></pre></div>
<p>Чтобы извлечь текст, понадобится функция <code>xmlValue</code>.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="импорт-и-экспорт-данных.html#cb421-1" tabindex="-1"></a>chapter_1 <span class="ot">&lt;-</span> <span class="fu">xmlValue</span>(ch1)</span></code></pre></div>
<p>Распечатывать весь текст первой главы не будем (это очень длинный вектор); разобъем текст на параграфы и выведем первый и последний:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="импорт-и-экспорт-данных.html#cb422-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb422-2"><a href="импорт-и-экспорт-данных.html#cb422-2" tabindex="-1"></a>chapter_lines <span class="ot">&lt;-</span> <span class="fu">str_split</span>(chapter_1, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb422-3"><a href="импорт-и-экспорт-данных.html#cb422-3" tabindex="-1"></a></span>
<span id="cb422-4"><a href="импорт-и-экспорт-данных.html#cb422-4" tabindex="-1"></a>chapter_lines[[<span class="dv">1</span>]][[<span class="dv">5</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;        — Eh bien, mon prince. Gênes et Lueques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j&#39;y crois) — je ne vous connais plus, vous n&#39;êtes plus mon ami, vous n&#39;êtes plus мой верный раб, comme vous dites. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur, садитесь и рассказывайте.&quot;</code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="импорт-и-экспорт-данных.html#cb424-1" tabindex="-1"></a>chapter_lines[[<span class="dv">1</span>]][[<span class="dv">838</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;       Ce sera dans votre famille que je ferai mon apprentissage de vieille fille.&quot;</code></pre>
<p>Первая и последняя реплика по-французски: все правильно!</p>
<p></br></p>
<div class="task code">
<p>Скачайте по <a href="https://raw.githubusercontent.com/dracor-org/rusdracor/main/tei/griboyedov-gore-ot-uma.xml">ссылке</a> “Горе от ума” Грибоедова и преобразуйте xml в прямоугольный формат таким образом, чтобы для каждой реплики был указан акт, сцена и действующее лицо.</p>
</div>
<p></br></p>
<p>Подбробнее о структуре XML документов и способах работы с ними вы можете прочитать в книгах: <span class="citation">(<a href="#ref-nolan2014">Nolan and Lang 2014</a>)</span> и <span class="citation">(<a href="#ref-xml2004">Холзнер 2004</a>)</span>.</p>
</div>
</div>
<div id="gutenbergr" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> GutenbergR<a href="импорт-и-экспорт-данных.html#gutenbergr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Пакет <code>GutenbergR</code>[^05-import-7] поможет достать тексты из библиотеки <a href="https://www.gutenberg.org/ebooks/">Gutenberg</a>, но будьте осторожны: распознаны они не всегда хорошо и порой содержат много разного шума, например примечания редактора, номера страниц и т.п. В билингвах источник и перевод могут идти вперемешку. И если в XML подобные элементы будут окружены соответствующими тегами, которые позволят их легко отбросить при анализе, то Gutenberg дает вам сырой текст. Часто его надо хорошенько чистить при помощи регулярных выражений или даже вручную.</p>
<p>Работать с метаданными GutenbergR вы уже научились, теперь можете пользоваться пакетом и для скачивания текстов. Сначала узнаем id нужных текстов
[^05-import-7]: <a href="https://cran.r-project.org/web/packages/gutenbergr/vignettes/intro.html" class="uri">https://cran.r-project.org/web/packages/gutenbergr/vignettes/intro.html</a></p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="импорт-и-экспорт-данных.html#cb426-1" tabindex="-1"></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb426-2"><a href="импорт-и-экспорт-данных.html#cb426-2" tabindex="-1"></a></span>
<span id="cb426-3"><a href="импорт-и-экспорт-данных.html#cb426-3" tabindex="-1"></a>caesar <span class="ot">&lt;-</span> <span class="fu">gutenberg_works</span>(author <span class="sc">==</span> <span class="st">&quot;Caesar, Julius&quot;</span>, <span class="at">languages =</span> <span class="st">&quot;la&quot;</span>) </span>
<span id="cb426-4"><a href="импорт-и-экспорт-данных.html#cb426-4" tabindex="-1"></a></span>
<span id="cb426-5"><a href="импорт-и-экспорт-данных.html#cb426-5" tabindex="-1"></a>caesar </span></code></pre></div>
<pre><code>## # A tibble: 2 × 8
##   gutenberg_id title     author gutenberg_author_id language gutenberg_bookshelf
##          &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;              
## 1          218 C. Iuli … Caesa…                3621 la       Classical Antiquity
## 2        18837 Commenta… Caesa…                3621 la       Classical Antiquity
## # ℹ 2 more variables: rights &lt;chr&gt;, has_text &lt;lgl&gt;</code></pre>
<p>Чтобы извлечь отдельный текст (тексты):</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="импорт-и-экспорт-данных.html#cb428-1" tabindex="-1"></a>de_bello_gallico <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="dv">218</span>, <span class="at">meta_fields =</span> <span class="st">&quot;title&quot;</span>, <span class="at">mirror =</span> <span class="st">&quot;ftp://mirrors.xmission.com/gutenberg/&quot;</span>)</span>
<span id="cb428-2"><a href="импорт-и-экспорт-данных.html#cb428-2" tabindex="-1"></a>de_bello_gallico</span></code></pre></div>
<pre><code>## # A tibble: 2,552 × 3
##    gutenberg_id text                             title                          
##           &lt;int&gt; &lt;chr&gt;                            &lt;chr&gt;                          
##  1          218 &quot;CAESAR&#39;S COMMENTARIES IN LATIN&quot; C. Iuli Caesaris De Bello Gall…
##  2          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  3          218 &quot;Books I-IV&quot;                     C. Iuli Caesaris De Bello Gall…
##  4          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  5          218 &quot;By Julius Caesar&quot;               C. Iuli Caesaris De Bello Gall…
##  6          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  7          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  8          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  9          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
## 10          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
## # ℹ 2,542 more rows</code></pre>
<div class="infobox">
<p>Существует несколько зеркал библиотеки Gutenberg, и, если при выполнении функции <code>gutenberg_download()</code> возникает ошибка “could not download a book at <a href="http://aleph.gutenberg.org/" class="uri">http://aleph.gutenberg.org/</a>”, то следует использовать аргумент mirror. Список зеркал доступен по ссылке: <a href="https://www.gutenberg.org/MIRRORS.ALL" class="uri">https://www.gutenberg.org/MIRRORS.ALL</a></p>
</div>

</div>
</div>
<h3>Литература<a href="литература.html#литература" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-nolan2014" class="csl-entry">
Nolan, D., and D. T. Lang. 2014. <em>XML and Web Technologies for Data Science with r</em>. Springer.
</div>
<div id="ref-skorinkin2016" class="csl-entry">
Скоринкин, Даниил. 2016. <span>“Электронное Представление Текста с Помощью Стандарта Разметки TEI,”</span> 90–108.
</div>
<div id="ref-xml2004" class="csl-entry">
Холзнер, Стивен. 2004. <em><span>Энциклопедия XML</span></em>. Питер.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="23">
<li id="fn23"><p><a href="https://r4ds.had.co.nz/data-import.html" class="uri">https://r4ds.had.co.nz/data-import.html</a><a href="импорт-и-экспорт-данных.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p><a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a><a href="импорт-и-экспорт-данных.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p><a href="https://r4ds.hadley.nz/spreadsheets" class="uri">https://r4ds.hadley.nz/spreadsheets</a><a href="импорт-и-экспорт-данных.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p><a href="https://rpubs.com/kbodwin/pdftools" class="uri">https://rpubs.com/kbodwin/pdftools</a><a href="импорт-и-экспорт-данных.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p><a href="https://r4ds.hadley.nz/rectangling#json" class="uri">https://r4ds.hadley.nz/rectangling#json</a><a href="импорт-и-экспорт-данных.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>Массив строк, который имеет только один элемент, также называется строковым скаляром.<a href="импорт-и-экспорт-данных.html#fnref28" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="функциональное-программирование.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="воспроизводимые-исследования.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/locusclassicus/text_analysis_2023/edit/main/05-import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
