<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R</title>
  <meta name="description" content="Все прекрасное трудно." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Все прекрасное трудно." />
  <meta name="github-repo" content="https://github.com/locusclassicus/text_analysis_r_bookdown_2023/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Тема 6 Импорт и экспорт данных | Компьютерный анализ текста в R" />
  
  <meta name="twitter:description" content="Все прекрасное трудно." />
  

<meta name="author" content="Ольга Алиева" />


<meta name="date" content="2023-07-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="функциональное-программирование.html"/>
<link rel="next" href="воспроизводимые-исследования.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Компьютерный анализ текста в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i><b>1.1</b> Благодарности</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html"><i class="fa fa-check"></i><b>2</b> Начало работы с R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-такое-r"><i class="fa fa-check"></i><b>2.1</b> Что такое R?</a></li>
<li class="chapter" data-level="2.2" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#пакеты-и-виньетки"><i class="fa fa-check"></i><b>2.2</b> Пакеты и виньетки</a></li>
<li class="chapter" data-level="2.3" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#если-не-хватает-пакетов"><i class="fa fa-check"></i><b>2.3</b> Если не хватает пакетов</a></li>
<li class="chapter" data-level="2.4" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#о-воспроизводимости"><i class="fa fa-check"></i><b>2.4</b> О воспроизводимости</a></li>
<li class="chapter" data-level="2.5" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#что-мы-не-будем-делать"><i class="fa fa-check"></i><b>2.5</b> Что мы (не) будем делать?</a></li>
<li class="chapter" data-level="2.6" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#rstudio"><i class="fa fa-check"></i><b>2.6</b> RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#установка"><i class="fa fa-check"></i><b>2.7</b> Установка</a></li>
<li class="chapter" data-level="2.8" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#начало-работы"><i class="fa fa-check"></i><b>2.8</b> Начало работы</a></li>
<li class="chapter" data-level="2.9" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#r-как-калькулятор"><i class="fa fa-check"></i><b>2.9</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.10" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#операторы-присваивания"><i class="fa fa-check"></i><b>2.10</b> Операторы присваивания</a></li>
<li class="chapter" data-level="2.11" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#векторы"><i class="fa fa-check"></i><b>2.11</b> Векторы</a></li>
<li class="chapter" data-level="2.12" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#списки"><i class="fa fa-check"></i><b>2.12</b> Списки</a></li>
<li class="chapter" data-level="2.13" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#матрицы"><i class="fa fa-check"></i><b>2.13</b> Матрицы</a></li>
<li class="chapter" data-level="2.14" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#таблицы"><i class="fa fa-check"></i><b>2.14</b> Таблицы</a></li>
<li class="chapter" data-level="2.15" data-path="начало-работы-с-r.html"><a href="начало-работы-с-r.html#шорткаты"><i class="fa fa-check"></i><b>2.15</b> Шорткаты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="визуализации.html"><a href="визуализации.html"><i class="fa fa-check"></i><b>3</b> Визуализации</a>
<ul>
<li class="chapter" data-level="3.1" data-path="визуализации.html"><a href="визуализации.html#базовый-r"><i class="fa fa-check"></i><b>3.1</b> Базовый R</a></li>
<li class="chapter" data-level="3.2" data-path="визуализации.html"><a href="визуализации.html#lattice"><i class="fa fa-check"></i><b>3.2</b> Lattice</a></li>
<li class="chapter" data-level="3.3" data-path="визуализации.html"><a href="визуализации.html#ggplot2"><i class="fa fa-check"></i><b>3.3</b> Ggplot2</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="визуализации.html"><a href="визуализации.html#быстрое-решение-qplot"><i class="fa fa-check"></i><b>3.3.1</b> Быстрое решение: qplot()</a></li>
<li class="chapter" data-level="3.3.2" data-path="визуализации.html"><a href="визуализации.html#слой-за-слоем-ggplot"><i class="fa fa-check"></i><b>3.3.2</b> Слой за слоем: ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="визуализации.html"><a href="визуализации.html#экспорт-графиков-из-среды-r"><i class="fa fa-check"></i><b>3.4</b> Экспорт графиков из среды R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="опрятные-данные.html"><a href="опрятные-данные.html"><i class="fa fa-check"></i><b>4</b> Опрятные данные</a>
<ul>
<li class="chapter" data-level="4.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#синтаксис-tidyverse"><i class="fa fa-check"></i><b>4.1</b> Синтаксис tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#tibble"><i class="fa fa-check"></i><b>4.1.1</b> Tibble</a></li>
<li class="chapter" data-level="4.1.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#dplyr"><i class="fa fa-check"></i><b>4.1.2</b> Dplyr</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#опрятные-данные-1"><i class="fa fa-check"></i><b>4.2</b> Опрятные данные</a></li>
<li class="chapter" data-level="4.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#пример-буккроссинг"><i class="fa fa-check"></i><b>4.3</b> Пример: буккроссинг</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="опрятные-данные.html"><a href="опрятные-данные.html#смотрим-на-данные"><i class="fa fa-check"></i><b>4.3.1</b> Смотрим на данные</a></li>
<li class="chapter" data-level="4.3.2" data-path="опрятные-данные.html"><a href="опрятные-данные.html#трансформируем-данные"><i class="fa fa-check"></i><b>4.3.2</b> Трансформируем данные</a></li>
<li class="chapter" data-level="4.3.3" data-path="опрятные-данные.html"><a href="опрятные-данные.html#объединяем-данные"><i class="fa fa-check"></i><b>4.3.3</b> Объединяем данные</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html"><i class="fa fa-check"></i><b>5</b> Функциональное программирование</a>
<ul>
<li class="chapter" data-level="5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#зачем-писать-функции"><i class="fa fa-check"></i><b>5.1</b> Зачем писать функции?</a></li>
<li class="chapter" data-level="5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#область-видимости-переменных"><i class="fa fa-check"></i><b>5.2</b> Область видимости переменных</a></li>
<li class="chapter" data-level="5.3" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#аргументы-функции"><i class="fa fa-check"></i><b>5.3</b> Аргументы функции</a></li>
<li class="chapter" data-level="5.4" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизируй-это"><i class="fa fa-check"></i><b>5.4</b> Векторизируй это</a></li>
<li class="chapter" data-level="5.5" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#векторизованные-конструкции"><i class="fa fa-check"></i><b>5.5</b> Векторизованные конструкции</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#циклы"><i class="fa fa-check"></i><b>5.5.1</b> Циклы</a></li>
<li class="chapter" data-level="5.5.2" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#условия"><i class="fa fa-check"></i><b>5.5.2</b> Условия</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#вместо-циклов-базовый-r-и-tidyverse"><i class="fa fa-check"></i><b>5.6</b> Вместо циклов: базовый R и tidyverse</a></li>
<li class="chapter" data-level="5.7" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#purrr"><i class="fa fa-check"></i><b>5.7</b> Purrr</a></li>
<li class="chapter" data-level="5.8" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#пример-итерации"><i class="fa fa-check"></i><b>5.8</b> Пример итерации</a></li>
<li class="chapter" data-level="5.9" data-path="функциональное-программирование.html"><a href="функциональное-программирование.html#furrr"><i class="fa fa-check"></i><b>5.9</b> Furrr</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-файлов-из-интернета"><i class="fa fa-check"></i><b>6.2</b> Чтение файлов из интернета</a></li>
<li class="chapter" data-level="6.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-локальных-файлов"><i class="fa fa-check"></i><b>6.3</b> Чтение локальных файлов</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#csv-и-tsv"><i class="fa fa-check"></i><b>6.3.1</b> csv и tsv</a></li>
<li class="chapter" data-level="6.3.2" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xls-и-xlsx"><i class="fa fa-check"></i><b>6.3.2</b> xls и xlsx</a></li>
<li class="chapter" data-level="6.3.3" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#txt"><i class="fa fa-check"></i><b>6.3.3</b> txt</a></li>
<li class="chapter" data-level="6.3.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#doc"><i class="fa fa-check"></i><b>6.3.4</b> doc</a></li>
<li class="chapter" data-level="6.3.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#pdf"><i class="fa fa-check"></i><b>6.3.5</b> pdf</a></li>
<li class="chapter" data-level="6.3.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#zip"><i class="fa fa-check"></i><b>6.3.6</b> zip</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#xml-и-html"><i class="fa fa-check"></i><b>6.4</b> xml и html</a></li>
<li class="chapter" data-level="6.5" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#json"><i class="fa fa-check"></i><b>6.5</b> json</a></li>
<li class="chapter" data-level="6.6" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#gutenbergr"><i class="fa fa-check"></i><b>6.6</b> GutenbergR</a></li>
<li class="chapter" data-level="6.7" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rperseus"><i class="fa fa-check"></i><b>6.7</b> RPerseus</a></li>
<li class="chapter" data-level="6.8" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#чтение-нескольких-файлов"><i class="fa fa-check"></i><b>6.8</b> Чтение нескольких файлов</a></li>
<li class="chapter" data-level="6.9" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#экспорт"><i class="fa fa-check"></i><b>6.9</b> Экспорт</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="импорт-и-экспорт-данных.html"><a href="импорт-и-экспорт-данных.html#rdata"><i class="fa fa-check"></i><b>6.9.1</b> Rdata</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html"><i class="fa fa-check"></i><b>7</b> Воспроизводимые исследования</a>
<ul>
<li class="chapter" data-level="7.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#о-воспроизводимости-1"><i class="fa fa-check"></i><b>7.1</b> О воспроизводимости</a></li>
<li class="chapter" data-level="7.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#markdown"><i class="fa fa-check"></i><b>7.2</b> Markdown</a></li>
<li class="chapter" data-level="7.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#синтаксис-markdown"><i class="fa fa-check"></i><b>7.3</b> Синтаксис Markdown</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#заголовки"><i class="fa fa-check"></i><b>7.3.1</b> Заголовки</a></li>
<li class="chapter" data-level="7.3.2" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#форматирование"><i class="fa fa-check"></i><b>7.3.2</b> Форматирование</a></li>
<li class="chapter" data-level="7.3.3" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#списки-1"><i class="fa fa-check"></i><b>7.3.3</b> Списки</a></li>
<li class="chapter" data-level="7.3.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#ссылки"><i class="fa fa-check"></i><b>7.3.4</b> Ссылки</a></li>
<li class="chapter" data-level="7.3.5" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#изображения"><i class="fa fa-check"></i><b>7.3.5</b> Изображения</a></li>
<li class="chapter" data-level="7.3.6" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#блоки-кода"><i class="fa fa-check"></i><b>7.3.6</b> Блоки кода</a></li>
<li class="chapter" data-level="7.3.7" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#цитаты"><i class="fa fa-check"></i><b>7.3.7</b> Цитаты</a></li>
<li class="chapter" data-level="7.3.8" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#разделители"><i class="fa fa-check"></i><b>7.3.8</b> Разделители</a></li>
<li class="chapter" data-level="7.3.9" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#таблицы-1"><i class="fa fa-check"></i><b>7.3.9</b> Таблицы</a></li>
<li class="chapter" data-level="7.3.10" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#id"><i class="fa fa-check"></i><b>7.3.10</b> Чек-листы</a></li>
<li class="chapter" data-level="7.3.11" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#внутренние-ссылки"><i class="fa fa-check"></i><b>7.3.11</b> Внутренние ссылки</a></li>
<li class="chapter" data-level="7.3.12" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#графики"><i class="fa fa-check"></i><b>7.3.12</b> Графики</a></li>
<li class="chapter" data-level="7.3.13" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#математические-формулы"><i class="fa fa-check"></i><b>7.3.13</b> Математические формулы</a></li>
<li class="chapter" data-level="7.3.14" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#библиография"><i class="fa fa-check"></i><b>7.3.14</b> Библиография</a></li>
<li class="chapter" data-level="7.3.15" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#смайлы"><i class="fa fa-check"></i><b>7.3.15</b> Смайлы</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="воспроизводимые-исследования.html"><a href="воспроизводимые-исследования.html#публикация-html"><i class="fa fa-check"></i><b>7.4</b> Публикация html</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html"><i class="fa fa-check"></i><b>8</b> Регулярные выражения</a>
<ul>
<li class="chapter" data-level="8.1" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-базовом-r"><i class="fa fa-check"></i><b>8.1</b> Regex в базовом R</a></li>
<li class="chapter" data-level="8.2" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#литералы-и-классы"><i class="fa fa-check"></i><b>8.2</b> Литералы и классы</a></li>
<li class="chapter" data-level="8.3" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#якоря"><i class="fa fa-check"></i><b>8.3</b> Якоря</a></li>
<li class="chapter" data-level="8.4" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#метасимволы"><i class="fa fa-check"></i><b>8.4</b> Метасимволы</a></li>
<li class="chapter" data-level="8.5" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#экранирование"><i class="fa fa-check"></i><b>8.5</b> Экранирование</a></li>
<li class="chapter" data-level="8.6" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#квантификация"><i class="fa fa-check"></i><b>8.6</b> Квантификация</a></li>
<li class="chapter" data-level="8.7" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#жадная-и-ленивая-квантификация"><i class="fa fa-check"></i><b>8.7</b> Жадная и ленивая квантификация</a></li>
<li class="chapter" data-level="8.8" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#regex-в-stringr-основы"><i class="fa fa-check"></i><b>8.8</b> Regex в stringr: основы</a></li>
<li class="chapter" data-level="8.9" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_detect-и-str_count"><i class="fa fa-check"></i><b>8.9</b> str_detect() и str_count()</a></li>
<li class="chapter" data-level="8.10" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_extract"><i class="fa fa-check"></i><b>8.10</b> str_extract()</a></li>
<li class="chapter" data-level="8.11" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_subset-и-str_match"><i class="fa fa-check"></i><b>8.11</b> str_subset() и str_match()</a></li>
<li class="chapter" data-level="8.12" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_replace"><i class="fa fa-check"></i><b>8.12</b> str_replace</a></li>
<li class="chapter" data-level="8.13" data-path="регулярные-выражения.html"><a href="регулярные-выражения.html#str_split"><i class="fa fa-check"></i><b>8.13</b> str_split</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html"><i class="fa fa-check"></i><b>9</b> Токенизация и лемматизация</a>
<ul>
<li class="chapter" data-level="9.1" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tidytext"><i class="fa fa-check"></i><b>9.1</b> Токенизация в tidytext</a></li>
<li class="chapter" data-level="9.2" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#токенизация-в-tokenizers"><i class="fa fa-check"></i><b>9.2</b> Токенизация в tokenizers</a></li>
<li class="chapter" data-level="9.3" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#скипграмы"><i class="fa fa-check"></i><b>9.3</b> Скипграмы</a></li>
<li class="chapter" data-level="9.4" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#лемматизация-и-частеречная-разметка"><i class="fa fa-check"></i><b>9.4</b> Лемматизация и частеречная разметка</a></li>
<li class="chapter" data-level="9.5" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#морфологическая-разметка"><i class="fa fa-check"></i><b>9.5</b> Морфологическая разметка</a></li>
<li class="chapter" data-level="9.6" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#распределение-частей-речи"><i class="fa fa-check"></i><b>9.6</b> Распределение частей речи</a></li>
<li class="chapter" data-level="9.7" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#совместная-встречаемость-слов"><i class="fa fa-check"></i><b>9.7</b> Совместная встречаемость слов</a></li>
<li class="chapter" data-level="9.8" data-path="токенизация-и-лемматизация.html"><a href="токенизация-и-лемматизация.html#синтаксическая-разметка"><i class="fa fa-check"></i><b>9.8</b> Синтаксическая разметка</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html"><i class="fa fa-check"></i><b>10</b> Эмоциональная тональность</a>
<ul>
<li class="chapter" data-level="10.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности"><i class="fa fa-check"></i><b>10.1</b> Анализ тональности</a></li>
<li class="chapter" data-level="10.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#подходы"><i class="fa fa-check"></i><b>10.2</b> Подходы</a></li>
<li class="chapter" data-level="10.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тезаурусы"><i class="fa fa-check"></i><b>10.3</b> Тезаурусы</a></li>
<li class="chapter" data-level="10.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#лексиконы-для-русского-языка"><i class="fa fa-check"></i><b>10.4</b> Лексиконы для русского языка</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#chen-skiena"><i class="fa fa-check"></i><b>10.4.1</b> Chen &amp; Skiena</a></li>
<li class="chapter" data-level="10.4.2" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#rusentlex-2016"><i class="fa fa-check"></i><b>10.4.2</b> RuSentLex 2016</a></li>
<li class="chapter" data-level="10.4.3" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#afinn"><i class="fa fa-check"></i><b>10.4.3</b> AFINN</a></li>
<li class="chapter" data-level="10.4.4" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#nrc"><i class="fa fa-check"></i><b>10.4.4</b> NRC</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#анализ-тональности-с-tidy-data"><i class="fa fa-check"></i><b>10.5</b> Анализ тональности с Tidy Data</a></li>
<li class="chapter" data-level="10.6" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#негативные-и-позитивные-слова"><i class="fa fa-check"></i><b>10.6</b> Негативные и позитивные слова</a></li>
<li class="chapter" data-level="10.7" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#облако-эмоций"><i class="fa fa-check"></i><b>10.7</b> Облако эмоций</a></li>
<li class="chapter" data-level="10.8" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#тональность-текста-в-целом"><i class="fa fa-check"></i><b>10.8</b> Тональность текста в целом</a></li>
<li class="chapter" data-level="10.9" data-path="эмоциональная-тональность.html"><a href="эмоциональная-тональность.html#эмоции-и-развитие-сюжета"><i class="fa fa-check"></i><b>10.9</b> Эмоции и развитие сюжета</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Компьютерный анализ текста в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="импорт-и-экспорт-данных" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Тема 6</span> Импорт и экспорт данных<a href="импорт-и-экспорт-данных.html#импорт-и-экспорт-данных" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="рабочая-директория" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Рабочая директория<a href="импорт-и-экспорт-данных.html#рабочая-директория" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Любой анализ данных начинается с импорта данных. Прежде чем что-то делать, проверьте свою рабочую директорию при помощи <code>getwd()</code> (<a href="https://youtu.be/z7pOxe6dDG0">подробнее</a>). Для смены можно использовать как <strong>абсолютный</strong>, так и <strong>относительный</strong> путь:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="импорт-и-экспорт-данных.html#cb288-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/olga/R_Workflow/Text_Analysis_2023&quot;</span>)</span>
<span id="cb288-2"><a href="импорт-и-экспорт-данных.html#cb288-2" tabindex="-1"></a></span>
<span id="cb288-3"><a href="импорт-и-экспорт-данных.html#cb288-3" tabindex="-1"></a><span class="co"># искать в текущей директории</span></span>
<span id="cb288-4"><a href="импорт-и-экспорт-данных.html#cb288-4" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;./Text_Analysis_2023&quot;</span>)</span>
<span id="cb288-5"><a href="импорт-и-экспорт-данных.html#cb288-5" tabindex="-1"></a></span>
<span id="cb288-6"><a href="импорт-и-экспорт-данных.html#cb288-6" tabindex="-1"></a><span class="co"># перейти на уровень вверх</span></span>
<span id="cb288-7"><a href="импорт-и-экспорт-данных.html#cb288-7" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;../&quot;</span>)</span></code></pre></div>
</div>
<div id="чтение-файлов-из-интернета" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Чтение файлов из интернета<a href="импорт-и-экспорт-данных.html#чтение-файлов-из-интернета" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Основная функция для скачивания файлов из Сети – <code>download.file()</code>, которой необходимо задать в качестве аргументов url, название сохраняемого файла, иногда также метод.</p>
<p>Попробуем скачать датасет из <a href="https://dataverse.pushdom.ru/dataverse/openlit">Репозитория открытых данных по русской литературе и фольклору</a> под названием <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2019.11-R002">“Байрон в русских переводах 1810–1860-х годов”</a>.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="импорт-и-экспорт-данных.html#cb289-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dataverse.pushdom.ru/api/access/datafile/:persistentId?persistentId=doi:10.5072/openlit-2019.11-R002/VQRXXK&quot;</span></span>
<span id="cb289-2"><a href="импорт-и-экспорт-данных.html#cb289-2" tabindex="-1"></a></span>
<span id="cb289-3"><a href="импорт-и-экспорт-данных.html#cb289-3" tabindex="-1"></a><span class="co"># если url начинается с https, на Mac _может_ потребоваться указать method = &quot;curl&quot;</span></span>
<span id="cb289-4"><a href="импорт-и-экспорт-данных.html#cb289-4" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="at">destfile =</span> <span class="st">&quot;files/Byron.tab&quot;</span>) </span></code></pre></div>
<p>После этого в папке files появится новый файл. Получить список скачанных файлов можно при помощи <code>list.files()</code>.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="импорт-и-экспорт-данных.html#cb290-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;./files&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;AmazonBooks.xlsx&quot;    &quot;antibarbari_archive&quot; &quot;archive.zip&quot;        
##  [4] &quot;BX-CSV-Dump&quot;         &quot;Byron.tab&quot;           &quot;CiceroOff.txt&quot;      
##  [7] &quot;karamzin_liza.pdf&quot;   &quot;karamzin_liza.txt&quot;   &quot;template.docx&quot;      
## [10] &quot;War_and_Peace.xml&quot;</code></pre>
</div>
<div id="чтение-локальных-файлов" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Чтение локальных файлов<a href="импорт-и-экспорт-данных.html#чтение-локальных-файлов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Основные функции для чтения локальных файлов в базовом R:</p>
<ul>
<li><code>read.table()</code></li>
<li>`read.csv()``</li>
</ul>
<div id="csv-и-tsv" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> csv и tsv<a href="импорт-и-экспорт-данных.html#csv-и-tsv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Файл, который мы скачали, имеет расширение .tab. Такие файлы по структуре аналогичны файлам .tsv (tab separated values). Чтобы его прочитать, используем <code>read.table()</code>, указав тип разделителя:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="импорт-и-экспорт-данных.html#cb292-1" tabindex="-1"></a>Byron <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;files/Byron.tab&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb292-2"><a href="импорт-и-экспорт-данных.html#cb292-2" tabindex="-1"></a><span class="fu">head</span>(Byron)</span></code></pre></div>
<p>Функция <code>read.csv()</code> отличается лишь тем, что автоматически выставляет значения аргументов <code>sep = ","</code>, header = TRUE.</p>
<p>В диалекте tidyverse для импорта подобных файлов используется пакет <code>readr</code><a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a>.</p>
<p>Вернемся к нашему датасету про буккроссинг, файлы которого имеют расширение csv. К сожалению, это не всегда гарантия того, что перед вами действительно csv:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="импорт-и-экспорт-данных.html#cb293-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb293-2"><a href="импорт-и-экспорт-данных.html#cb293-2" tabindex="-1"></a>users <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/BX-CSV-Dump/BX-Users.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 278858 Columns: 1
## ── Column specification ────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): User-ID;Location;Age
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="импорт-и-экспорт-данных.html#cb295-1" tabindex="-1"></a><span class="fu">head</span>(users)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 1
##   `User-ID;Location;Age`                   
##   &lt;chr&gt;                                    
## 1 1;nyc, new york, usa;NULL                
## 2 2;stockton, california, usa;18           
## 3 3;moscow, yukon territory, russia;NULL   
## 4 4;porto, v.n.gaia, portugal;17           
## 5 5;farnborough, hants, united kingdom;NULL
## 6 6;santa monica, california, usa;61</code></pre>
<p>Чтобы исправить дело, воспользуемся другой функцией из того же пакета:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="импорт-и-экспорт-данных.html#cb297-1" tabindex="-1"></a>users <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;files/BX-CSV-Dump/BX-Users.csv&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;;&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 246666 Columns: 3
## ── Column specification ────────────────────────────────────────────────────
## Delimiter: &quot;;&quot;
## chr (2): Location, Age
## dbl (1): User-ID
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="импорт-и-экспорт-данных.html#cb299-1" tabindex="-1"></a>users</span></code></pre></div>
<pre><code>## # A tibble: 246,666 × 3
##    `User-ID` Location                           Age  
##        &lt;dbl&gt; &lt;chr&gt;                              &lt;chr&gt;
##  1         1 nyc, new york, usa                 NULL 
##  2         2 stockton, california, usa          18   
##  3         3 moscow, yukon territory, russia    NULL 
##  4         4 porto, v.n.gaia, portugal          17   
##  5         5 farnborough, hants, united kingdom NULL 
##  6         6 santa monica, california, usa      61   
##  7         7 washington, dc, usa                NULL 
##  8         8 timmins, ontario, canada           NULL 
##  9         9 germantown, tennessee, usa         NULL 
## 10        10 albacete, wisconsin, spain         26   
## # ℹ 246,656 more rows</code></pre>
<p>Очевидно, это не решает всех проблем, но как справиться с оставшимися, мы рассказывали в уроке об опрятных данных.</p>
</div>
<div id="xls-и-xlsx" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> xls и xlsx<a href="импорт-и-экспорт-данных.html#xls-и-xlsx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Не самый любимый аналитиками, но очень распространенный тип файлов. Чтобы с ним работать, нужно установить пакет <code>readxl</code> из семейства tidyverse<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a>. Это не единственный пакет для работы с Excel, но, пожалуй, самый удобный. Файл с самыми популярными на Amazon книгами можно взять <a href="https://www.kaggle.com/datasets/palanjali007/amazons-top-50-bestselling-novels-20092020">здесь</a>.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="импорт-и-экспорт-данных.html#cb301-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb301-2"><a href="импорт-и-экспорт-данных.html#cb301-2" tabindex="-1"></a>amazon <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;files/AmazonBooks.xlsx&quot;</span>)</span>
<span id="cb301-3"><a href="импорт-и-экспорт-данных.html#cb301-3" tabindex="-1"></a><span class="fu">head</span>(amazon)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   Name                            Author `User Rating` Reviews Price  Year Genre
##   &lt;chr&gt;                           &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1 10-Day Green Smoothie Cleanse   JJ Sm…           4.7   17350     8  2016 Non …
## 2 11/22/63: A Novel               Steph…           4.6    2052    22  2011 Fict…
## 3 12 Rules for Life: An Antidote… Jorda…           4.7   18979    15  2018 Non …
## 4 1984 (Signet Classics)          Georg…           4.7   21424     6  2017 Fict…
## 5 5,000 Awesome Facts (About Eve… Natio…           4.8    7665    12  2019 Non …
## 6 A Dance with Dragons (A Song o… Georg…           4.4   12643    11  2011 Fict…</code></pre>
</div>
<div id="txt" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> txt<a href="импорт-и-экспорт-данных.html#txt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для чтения текстовых файлов в базовом R есть функция <code>readlines()</code>.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="импорт-и-экспорт-данных.html#cb303-1" tabindex="-1"></a><span class="fu">readLines</span>(<span class="at">con =</span> <span class="st">&quot;files/karamzin_liza.txt&quot;</span>, <span class="at">n =</span> <span class="dv">1</span>) </span></code></pre></div>
<pre><code>## [1] &quot;    Может быть, никто из живущих в Москве не знает так хорошо окрестностей города сего, как я, потому что никто чаще моего не бывает в поле, никто более моего не бродит пешком, без плана, без цели -- куда глаза глядят -- по лугам и рощам, по холмам и равнинам. Всякое лето нахожу новые приятные места или в старых новые красоты. Но всего приятнее для меня то место, на котором возвышаются мрачные, готические башни Си...нова монастыря. Стоя на сей горе, видишь на правой стороне почти всю Москву, сию ужасную громаду домов и церквей, которая представляется глазам в образе величественного амфитеатра: великолепная картина, особливо когда светит на нее солнце, когда вечерние лучи его пылают на бесчисленных златых куполах, на бесчисленных крестах, к небу возносящихся! Внизу расстилаются тучные, густо-зеленые цветущие луга, а за ними, по желтым пескам, течет светлая река, волнуемая легкими веслами рыбачьих лодок или шумящая под рулем грузных стругов, которые плывут от плодоноснейших стран Российской империи и наделяют алчную Москву хлебом. &quot;</code></pre>
</div>
<div id="doc" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> doc<a href="импорт-и-экспорт-данных.html#doc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Если есть возможность конвертировать документ Word в простой текстовый формат, то лучше так и сделать. Если нет, то устанавливаем пакет <code>officer</code>.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="импорт-и-экспорт-данных.html#cb305-1" tabindex="-1"></a><span class="fu">library</span>(officer)</span>
<span id="cb305-2"><a href="импорт-и-экспорт-данных.html#cb305-2" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;files&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;docx&quot;</span>) </span>
<span id="cb305-3"><a href="импорт-и-экспорт-данных.html#cb305-3" tabindex="-1"></a>files[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;template.docx&quot;</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="импорт-и-экспорт-данных.html#cb307-1" tabindex="-1"></a><span class="co"># read file</span></span>
<span id="cb307-2"><a href="импорт-и-экспорт-данных.html#cb307-2" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">read_docx</span>(<span class="fu">paste0</span>(<span class="st">&quot;files/&quot;</span>, files[<span class="dv">1</span>]))</span>
<span id="cb307-3"><a href="импорт-и-экспорт-данных.html#cb307-3" tabindex="-1"></a>content <span class="ot">&lt;-</span> <span class="fu">docx_summary</span>(doc) </span>
<span id="cb307-4"><a href="импорт-и-экспорт-данных.html#cb307-4" tabindex="-1"></a><span class="fu">head</span>(content, <span class="dv">2</span>) <span class="co"># весь текст доступен в столбце text</span></span></code></pre></div>
<pre><code>##   doc_index content_type style_name          text level num_id
## 1         1    paragraph         NA Chapter Title    NA     NA
## 2         2    paragraph         NA Author’s Name    NA     NA</code></pre>
<p>Таким образом, однако, мы теряем все сноски. Следующий код позволяет их достать:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="импорт-и-экспорт-данных.html#cb309-1" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb309-2"><a href="импорт-и-экспорт-данных.html#cb309-2" tabindex="-1"></a><span class="fu">xml_text</span>(<span class="fu">xml_find_all</span>(doc<span class="sc">$</span>footnotes<span class="sc">$</span><span class="fu">get</span>(), <span class="st">&quot;*&quot;</span>))</span></code></pre></div>
<p>Тут уже применяются функции для работы с xml. Поэтому лишний раз подумайте, не проще ли конвертировать документ Word в .txt.</p>
</div>
<div id="pdf" class="section level3 hasAnchor" number="6.3.5">
<h3><span class="header-section-number">6.3.5</span> pdf<a href="импорт-и-экспорт-данных.html#pdf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>С pdf тоже без нужды лучше не иметь дела. Но если все-таки пришлось читать pdf, для этого есть пакет <code>pdftools</code><a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="импорт-и-экспорт-данных.html#cb310-1" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span></code></pre></div>
<pre><code>## Using poppler version 22.02.0</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="импорт-и-экспорт-данных.html#cb312-1" tabindex="-1"></a><span class="co"># длинющий вектор, который придется очищать от \n (новая строка)</span></span>
<span id="cb312-2"><a href="импорт-и-экспорт-данных.html#cb312-2" tabindex="-1"></a>liza <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="at">pdf =</span> <span class="st">&quot;files/karamzin_liza.pdf&quot;</span>)</span>
<span id="cb312-3"><a href="импорт-и-экспорт-данных.html#cb312-3" tabindex="-1"></a></span>
<span id="cb312-4"><a href="импорт-и-экспорт-данных.html#cb312-4" tabindex="-1"></a><span class="co"># метаданные в виде списка</span></span>
<span id="cb312-5"><a href="импорт-и-экспорт-данных.html#cb312-5" tabindex="-1"></a>meta <span class="ot">&lt;-</span> <span class="fu">pdf_info</span>(<span class="at">pdf =</span> <span class="st">&quot;files/karamzin_liza.pdf&quot;</span>)</span>
<span id="cb312-6"><a href="импорт-и-экспорт-данных.html#cb312-6" tabindex="-1"></a>meta<span class="sc">$</span>created</span></code></pre></div>
<pre><code>## [1] &quot;2023-07-16 19:36:09 MSK&quot;</code></pre>
<p>Разработчики утверждают, что пакет справится и с распознаванием текста, но установка нужных для этого зависимостей может быть сопряжена с такими трудостями, что вы, вероятно, захотите решить эту задачу за пределами R. Например, <a href="https://rescribe.xyz/rescribe/">тут</a>.</p>
</div>
<div id="zip" class="section level3 hasAnchor" number="6.3.6">
<h3><span class="header-section-number">6.3.6</span> zip<a href="импорт-и-экспорт-данных.html#zip" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для работы с архивами есть функция <code>unzip()</code>. Полезно помнить, что большой архив не обязательно распечатывать полностью. Если выставить аргумент <code>list = TRUE</code>, то функция вернет список всех файлов в архиве, из которых можно прочитать в память лишь избранные:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="импорт-и-экспорт-данных.html#cb314-1" tabindex="-1"></a>archive <span class="ot">&lt;-</span> <span class="fu">unzip</span>(<span class="st">&quot;files/archive.zip&quot;</span>, <span class="at">files =</span> <span class="cn">NULL</span>, <span class="at">list =</span> <span class="cn">TRUE</span>) </span>
<span id="cb314-2"><a href="импорт-и-экспорт-данных.html#cb314-2" tabindex="-1"></a>archive</span></code></pre></div>
<pre><code>##                       Name     Length                Date
## 1 AmazonBooks - Sheet1.csv 4294967295 2021-02-18 19:58:00
## 2         AmazonBooks.xlsx 4294967295 2021-02-18 19:58:00</code></pre>
<p>Код ниже позволяет извлечь из архива только нужный файл:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="импорт-и-экспорт-данных.html#cb316-1" tabindex="-1"></a><span class="fu">unzip</span>(<span class="st">&quot;files/archive.zip&quot;</span>, <span class="at">files =</span> <span class="st">&quot;AmazonBooks.xlsx&quot;</span>)</span></code></pre></div>
<p>После этого файл можно прочитать в R, как указано выше.</p>
</div>
</div>
<div id="xml-и-html" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> xml и html<a href="импорт-и-экспорт-данных.html#xml-и-html" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>XML и HTML – это языки разметки.</p>
<p>Язык <strong>HTML</strong> применяется для создания стандартных веб-страниц, поэтому если вы хотите достать некий текст из Интернета, то скорее всего вместе с текстом утащите еще так называемые <strong>теги</strong> (в треугольных скобках), то есть элементы этой самой разметки:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="импорт-и-экспорт-данных.html#cb317-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.thelatinlibrary.com/cicero/off1.shtml&quot;</span></span>
<span id="cb317-2"><a href="импорт-и-экспорт-данных.html#cb317-2" tabindex="-1"></a>doc_html <span class="ot">&lt;-</span> <span class="fu">scan</span>(url, <span class="at">what =</span> <span class="st">&quot;character&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb317-3"><a href="импорт-и-экспорт-данных.html#cb317-3" tabindex="-1"></a><span class="fu">head</span>(doc_html)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;html&gt;&quot;                                                                     
## [2] &quot;\t&lt;head&gt;&quot;                                                                   
## [3] &quot;\t\t&lt;title&gt;&quot;                                                                
## [4] &quot;\t\t\tCicero: de Officiis I&quot;                                                
## [5] &quot;\t\t&lt;/title&gt;&quot;                                                               
## [6] &quot;\t\t&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=utf-8\&quot;&gt;&quot;</code></pre>
<p>Для анализа текста эти, как правило, не нужны, так как отвечают за оформление. Они “сообщают” браузеру, как отображать тот или иной контент. Пакет <code>stylo</code> дает возможность легко от них избавиться. Текст возвращается без тегов и уже разделенным на слова.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="импорт-и-экспорт-данных.html#cb319-1" tabindex="-1"></a><span class="fu">library</span>(stylo)</span>
<span id="cb319-2"><a href="импорт-и-экспорт-данных.html#cb319-2" tabindex="-1"></a><span class="co"># download.file(url, destfile = &quot;files/CiceroOff.txt&quot;)</span></span>
<span id="cb319-3"><a href="импорт-и-экспорт-данных.html#cb319-3" tabindex="-1"></a></span>
<span id="cb319-4"><a href="импорт-и-экспорт-данных.html#cb319-4" tabindex="-1"></a>doc_text <span class="ot">&lt;-</span> <span class="fu">load.corpus.and.parse</span>(<span class="at">files =</span> <span class="st">&quot;CiceroOff.txt&quot;</span>, <span class="at">corpus.dir =</span> <span class="st">&quot;files&quot;</span>, <span class="at">markup.type =</span> <span class="st">&quot;html&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb319-5"><a href="импорт-и-экспорт-данных.html#cb319-5" tabindex="-1"></a></span>
<span id="cb319-6"><a href="импорт-и-экспорт-данных.html#cb319-6" tabindex="-1"></a>doc_vec <span class="ot">&lt;-</span> <span class="fu">unlist</span>(doc_text, <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb319-7"><a href="импорт-и-экспорт-данных.html#cb319-7" tabindex="-1"></a>doc_vec[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;m&quot;         &quot;tvlli&quot;     &quot;ciceronis&quot; &quot;de&quot;        &quot;officiis&quot;  &quot;liber&quot;    
##  [7] &quot;primvs&quot;    &quot;quamquam&quot;  &quot;te&quot;        &quot;marce&quot;</code></pre>
<p><strong>XML</strong> (от англ. eXtensible Markup Language) — расширяемый язык разметки. Слово “расширяемый” значит, что список тегов не зафиксирован раз и навсегда: пользователи могут вводить свои собственные теги и создавать так называемые <strong>настраиваемые языки разметки</strong>. Один из таких настраиваемых языков – это <strong>TEI</strong> (Text Encoding Initiative).</p>
<p>Большая часть размеченных литературных корпусов хранится именно в таком виде. Это очень удобно, и вот почему: документы в формате XML, как и документы в формате HTML, содержат данные, заключенные в теги, но если в формате HTML теги определяют оформление данных, то в формате XML теги нередко <em>определяют структуру и смысл данных</em>. С их помощью мы можем достать из документа именно то, что нам интересно: определенную главу, речи конкретных персонажей, слова на иностранных языках и т.п. Добавлять и удалять разметку может любой пользователь в редакторе XML кода. По сути, это просто текст, хотя и причудливо (на первый взгляд) оформленный.</p>
<p>Подбробнее о структуре XML документов и способах работы с ними вы можете прочитать в книгах: <span class="citation">(<a href="#ref-nolan2014">Nolan and Lang 2014</a>)</span> и <span class="citation">(<a href="#ref-xml2004">Холзнер 2004</a>)</span>. Здесь мы лишь кратко затронем вопрос о том, как <strong>парсить</strong> XML документ в R, то есть извлекать из него нужную нам информацию.</p>
<p>Главное, что надо понимать: любой XML документ представляет собой иерархически организованное дерево, у которого есть один и только один корневой элемент, из которого расходятся ветви.</p>
<p>С этим деревом в R можно работать двумя способами: либо как со списком, который содержит другие вложенные в него списки, либо при помощи синтаксиса XPath. В видео по <a href="https://vk.com/video/playlist/-211800158_1">ссылке</a> вы можете ближе познакомиться и с тем, и с другим подходом.</p>
<p>В качестве примера загрузим еще один датасет “Пушкинсого дома”, подготовленный Д.А. Скоринкиным: <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2022.1-C005">“Персонажи «Войны и мира» Л. Н. Толстого: вхождения в тексте, прямая речь и семантические роли”</a>. Функция <code>xmlTreeParse()</code> разбирает XML-файл и генерирует R-структуру, представляющую дерево XML. Парсинг xml начинается с поиска корневого элемента.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="импорт-и-экспорт-данных.html#cb321-1" tabindex="-1"></a><span class="fu">library</span>(XML)</span>
<span id="cb321-2"><a href="импорт-и-экспорт-данных.html#cb321-2" tabindex="-1"></a>filename <span class="ot">=</span> <span class="st">&quot;files/War_and_Peace.xml&quot;</span></span>
<span id="cb321-3"><a href="импорт-и-экспорт-данных.html#cb321-3" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">xmlTreeParse</span>(filename, <span class="at">useInternalNodes =</span> T)</span>
<span id="cb321-4"><a href="импорт-и-экспорт-данных.html#cb321-4" tabindex="-1"></a>rootnode <span class="ot">&lt;-</span> <span class="fu">xmlRoot</span>(doc)</span></code></pre></div>
<p>После этого можно внимательнее взглянуть на структуру xml. Корневой элемент расходится на две ветви. Полностью они нам пока не нужны, узнаем только имена:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="импорт-и-экспорт-данных.html#cb322-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">xmlChildren</span>(rootnode)) </span></code></pre></div>
<pre><code>## [1] &quot;teiHeader&quot; &quot;text&quot;</code></pre>
<p>Очевидно, что что-то для нас интересное будет спрятано в ветке text, глядим на нее (индексирование как для списков):</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="импорт-и-экспорт-данных.html#cb324-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">xmlChildren</span>(rootnode[[<span class="st">&quot;text&quot;</span>]])) </span></code></pre></div>
<pre><code>## [1] &quot;div&quot; &quot;div&quot; &quot;div&quot; &quot;div&quot; &quot;div&quot;</code></pre>
<p>Итак, текст делится на какие-то пять частей. Функция <code>xmlGetAttr()</code> позволяет узнать значение атрибута <code>type</code>: как выясняется, это том.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="импорт-и-экспорт-данных.html#cb326-1" tabindex="-1"></a><span class="co"># это список</span></span>
<span id="cb326-2"><a href="импорт-и-экспорт-данных.html#cb326-2" tabindex="-1"></a>divs_1 <span class="ot">&lt;-</span>  rootnode[[<span class="st">&quot;text&quot;</span>]][[<span class="st">&quot;div&quot;</span>]] </span>
<span id="cb326-3"><a href="импорт-и-экспорт-данных.html#cb326-3" tabindex="-1"></a><span class="fu">xmlGetAttr</span>(divs_1, <span class="st">&quot;type&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;volume&quot;</code></pre>
<p>Добраться до определенного узла можно не только путем индексирования, но и – гораздо удобнее – пр помощи синтаксиса XPath. Для этого просто указываем путь до узла. Попробуем спуститься на уровень ниже:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="импорт-и-экспорт-данных.html#cb328-1" tabindex="-1"></a>divs_2 <span class="ot">&lt;-</span> <span class="fu">getNodeSet</span>(doc, <span class="st">&quot;/tei:TEI//tei:text//tei:div//tei:div&quot;</span>, <span class="at">namespaces =</span> <span class="fu">c</span>(<span class="at">tei =</span> <span class="st">&quot;http://www.tei-c.org/ns/1.0&quot;</span>)) </span>
<span id="cb328-2"><a href="импорт-и-экспорт-данных.html#cb328-2" tabindex="-1"></a></span>
<span id="cb328-3"><a href="импорт-и-экспорт-данных.html#cb328-3" tabindex="-1"></a><span class="fu">length</span>(divs_2)</span></code></pre></div>
<pre><code>## [1] 375</code></pre>
<p>Теперь мы получили довольно длинный список (375 элементов), к которому снова можем применить <code>xmlGetAttr()</code>. Выясняем, что это, в основном, главы:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="импорт-и-экспорт-данных.html#cb330-1" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">sapply</span>(divs_2, xmlGetAttr, <span class="st">&quot;type&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;part&quot;    &quot;chapter&quot;</code></pre>
<p>Чтобы извлечь текст из конкретного узла, нужна функция <code>xmlValue</code>.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="импорт-и-экспорт-данных.html#cb332-1" tabindex="-1"></a><span class="co"># забираем 2, т.к. 1 -- это часть, а не глава</span></span>
<span id="cb332-2"><a href="импорт-и-экспорт-данных.html#cb332-2" tabindex="-1"></a>chapter_1 <span class="ot">&lt;-</span> <span class="fu">xmlValue</span>(divs_2[[<span class="dv">2</span>]])</span></code></pre></div>
<p>Распечатывать весь текст первой главы не будем (это очень длинный вектор); разобъем текст на строки и выведем первую и последнюю:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="импорт-и-экспорт-данных.html#cb333-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb333-2"><a href="импорт-и-экспорт-данных.html#cb333-2" tabindex="-1"></a>chapter_lines <span class="ot">&lt;-</span> <span class="fu">str_split</span>(chapter_1, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb333-3"><a href="импорт-и-экспорт-данных.html#cb333-3" tabindex="-1"></a></span>
<span id="cb333-4"><a href="импорт-и-экспорт-данных.html#cb333-4" tabindex="-1"></a>chapter_lines[[<span class="dv">1</span>]][[<span class="dv">5</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;        — Eh bien, mon prince. Gênes et Lueques ne sont plus que des apanages, des поместья, de la famille Buonaparte. Non, je vous préviens que si vous ne me dites pas que nous avons la guerre, si vous vous permettez encore de pallier toutes les infamies, toutes les atrocités de cet Antichrist (ma parole, j&#39;y crois) — je ne vous connais plus, vous n&#39;êtes plus mon ami, vous n&#39;êtes plus мой верный раб, comme vous dites. Ну, здравствуйте, здравствуйте. Je vois que je vous fais peur, садитесь и рассказывайте.&quot;</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="импорт-и-экспорт-данных.html#cb335-1" tabindex="-1"></a>chapter_lines[[<span class="dv">1</span>]][[<span class="dv">838</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;       Ce sera dans votre famille que je ferai mon apprentissage de vieille fille.&quot;</code></pre>
<p>Первая и последняя реплика по-французски: все правильно! Подробнее о работе с XML (и HTML) стоит посмотреть <a href="https://www.coursera.org/lecture/data-cleaning/reading-xml-cieIu">вот это</a> видео.</p>
<p>P.S. Для работы с XML также подходит пакет <code>xml2</code><a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a>.</p>
</div>
<div id="json" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> json<a href="импорт-и-экспорт-данных.html#json" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To be supplied.</p>
</div>
<div id="gutenbergr" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> GutenbergR<a href="импорт-и-экспорт-данных.html#gutenbergr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для R существуют пакеты, позволяющие извлекать тексты из онлайн-библиотек. Пакет <code>GutenbergR</code><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a> поможет достать тексты из библиотеки <a href="https://www.gutenberg.org/ebooks/">Gutenberg</a>, но будьте осторожны: распознаны они не всегда хорошо и порой содержат много разного шума, например примечания редактора, номера страниц и т.п. В билингвах источник и перевод могут идти вперемешку. И если в XML подобные элементы будут окружены соответствующими тегами, которые позволят их легко отбросить при анализе, то Gutenberg дает вам сырой текст. Часто его надо хорошенько чистить при помощи регулярных выражений или даже вручную. Поиск нужного текста лучше начать с изучения метаданных:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="импорт-и-экспорт-данных.html#cb337-1" tabindex="-1"></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb337-2"><a href="импорт-и-экспорт-данных.html#cb337-2" tabindex="-1"></a></span>
<span id="cb337-3"><a href="импорт-и-экспорт-данных.html#cb337-3" tabindex="-1"></a><span class="do">## метаданные содержат множество NA </span></span>
<span id="cb337-4"><a href="импорт-и-экспорт-данных.html#cb337-4" tabindex="-1"></a>gutenberg_authors</span></code></pre></div>
<pre><code>## # A tibble: 21,323 × 7
##    gutenberg_author_id author        alias birthdate deathdate wikipedia aliases
##                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;  
##  1                   1 United States U.S.…        NA        NA https://… &lt;NA&gt;   
##  2                   3 Lincoln, Abr… &lt;NA&gt;       1809      1865 https://… United…
##  3                   4 Henry, Patri… &lt;NA&gt;       1736      1799 https://… &lt;NA&gt;   
##  4                   5 Adam, Paul    &lt;NA&gt;       1849      1931 https://… &lt;NA&gt;   
##  5                   7 Carroll, Lew… Dodg…      1832      1898 https://… &lt;NA&gt;   
##  6                   8 United State… &lt;NA&gt;         NA        NA https://… Agency…
##  7                   9 Melville, He… Melv…      1819      1891 https://… &lt;NA&gt;   
##  8                  10 Barrie, J. M… &lt;NA&gt;       1860      1937 https://… Barrie…
##  9                  12 Smith, Josep… Smit…      1805      1844 https://… &lt;NA&gt;   
## 10                  14 Madison, Jam… Unit…      1751      1836 https://… &lt;NA&gt;   
## # ℹ 21,313 more rows</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="импорт-и-экспорт-данных.html#cb339-1" tabindex="-1"></a>gutenberg_metadata</span></code></pre></div>
<pre><code>## # A tibble: 69,199 × 8
##    gutenberg_id title    author gutenberg_author_id language gutenberg_bookshelf
##           &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;              
##  1            1 &quot;The De… Jeffe…                1638 en       Politics/American …
##  2            2 &quot;The Un… Unite…                   1 en       Politics/American …
##  3            3 &quot;John F… Kenne…                1666 en       &lt;NA&gt;               
##  4            4 &quot;Lincol… Linco…                   3 en       US Civil War       
##  5            5 &quot;The Un… Unite…                   1 en       United States/Poli…
##  6            6 &quot;Give M… Henry…                   4 en       American Revolutio…
##  7            7 &quot;The Ma… &lt;NA&gt;                    NA en       &lt;NA&gt;               
##  8            8 &quot;Abraha… Linco…                   3 en       US Civil War       
##  9            9 &quot;Abraha… Linco…                   3 en       US Civil War       
## 10           10 &quot;The Ki… &lt;NA&gt;                    NA en       Banned Books List …
## # ℹ 69,189 more rows
## # ℹ 2 more variables: rights &lt;chr&gt;, has_text &lt;lgl&gt;</code></pre>
<p>Функция <code>gutenberg_works()</code> позволяет уточнить, какие столбцы необходимо вернуть:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="импорт-и-экспорт-данных.html#cb341-1" tabindex="-1"></a>latin_works <span class="ot">&lt;-</span> <span class="fu">gutenberg_works</span>(<span class="at">languages =</span> <span class="st">&quot;la&quot;</span>) </span>
<span id="cb341-2"><a href="импорт-и-экспорт-данных.html#cb341-2" tabindex="-1"></a></span>
<span id="cb341-3"><a href="импорт-и-экспорт-данных.html#cb341-3" tabindex="-1"></a>latin_works</span></code></pre></div>
<pre><code>## # A tibble: 92 × 8
##    gutenberg_id title    author gutenberg_author_id language gutenberg_bookshelf
##           &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;              
##  1          218 C. Iuli… Caesa…                3621 la       Classical Antiquity
##  2          226 Cicero&#39;… Cicer…                 128 la       Classical Antiquity
##  3          227 Aeneidos Virgil                 129 la       Classical Antiquit…
##  4          229 The Buc… Virgil                 129 la       Classical Antiquity
##  5          231 Georgic… Virgil                 129 la       Classical Antiquity
##  6          237 Sexti P… Prope…                 133 la       &lt;NA&gt;               
##  7          825 Latin V… Anony…                 216 la       Christianity       
##  8          826 Latin V… Anony…                 216 la       Christianity       
##  9          828 Latin V… Anony…                 216 la       Christianity       
## 10         4317 Prophet… Anony…                 216 la       &lt;NA&gt;               
## # ℹ 82 more rows
## # ℹ 2 more variables: rights &lt;chr&gt;, has_text &lt;lgl&gt;</code></pre>
<p>Беглый взгляд на эту таблицу говорит о том, что в галактике Гутенберга царит полный хаос: например, в поле “название” хранится имя автора. Но после того, как нужный автор или нужное сочинение найдены, можно сделать так:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="импорт-и-экспорт-данных.html#cb343-1" tabindex="-1"></a>caesar <span class="ot">&lt;-</span> <span class="fu">gutenberg_works</span>(author <span class="sc">==</span> <span class="st">&quot;Caesar, Julius&quot;</span>, <span class="at">languages =</span> <span class="st">&quot;la&quot;</span>) </span>
<span id="cb343-2"><a href="импорт-и-экспорт-данных.html#cb343-2" tabindex="-1"></a>caesar </span></code></pre></div>
<pre><code>## # A tibble: 3 × 8
##   gutenberg_id title     author gutenberg_author_id language gutenberg_bookshelf
##          &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;              
## 1          218 C. Iuli … Caesa…                3621 la       Classical Antiquity
## 2        18837 Commenta… Caesa…                3621 la       Classical Antiquity
## 3        29645 The Gate… Caesa…                3621 la       &lt;NA&gt;               
## # ℹ 2 more variables: rights &lt;chr&gt;, has_text &lt;lgl&gt;</code></pre>
<p>Чтобы извлечь отдельный текст (тексты):</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="импорт-и-экспорт-данных.html#cb345-1" tabindex="-1"></a>de_bello_gallico <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="dv">218</span>, <span class="at">meta_fields =</span> <span class="st">&quot;title&quot;</span>, <span class="at">mirror =</span> <span class="st">&quot;ftp://mirrors.xmission.com/gutenberg/&quot;</span>)</span>
<span id="cb345-2"><a href="импорт-и-экспорт-данных.html#cb345-2" tabindex="-1"></a>de_bello_gallico</span></code></pre></div>
<pre><code>## # A tibble: 2,552 × 3
##    gutenberg_id text                             title                          
##           &lt;int&gt; &lt;chr&gt;                            &lt;chr&gt;                          
##  1          218 &quot;CAESAR&#39;S COMMENTARIES IN LATIN&quot; C. Iuli Caesaris De Bello Gall…
##  2          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  3          218 &quot;Books I-IV&quot;                     C. Iuli Caesaris De Bello Gall…
##  4          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  5          218 &quot;By Julius Caesar&quot;               C. Iuli Caesaris De Bello Gall…
##  6          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  7          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  8          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
##  9          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
## 10          218 &quot;&quot;                               C. Iuli Caesaris De Bello Gall…
## # ℹ 2,542 more rows</code></pre>
<div class="infobox">
<p>Существует несколько зеркал библиотеки Gutenberg, и, если при выполнении функции <code>gutenberg_download()</code> возникает ошибка “could not download a book at <a href="http://aleph.gutenberg.org/" class="uri">http://aleph.gutenberg.org/</a>”, то следует использовать аргумент mirror. Список зеркал доступен по ссылке: <a href="https://www.gutenberg.org/MIRRORS.ALL" class="uri">https://www.gutenberg.org/MIRRORS.ALL</a></p>
</div>
</div>
<div id="rperseus" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> RPerseus<a href="импорт-и-экспорт-данных.html#rperseus" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To be supplied.</p>
</div>
<div id="чтение-нескольких-файлов" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Чтение нескольких файлов<a href="импорт-и-экспорт-данных.html#чтение-нескольких-файлов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To be supplied.</p>
</div>
<div id="экспорт" class="section level2 hasAnchor" number="6.9">
<h2><span class="header-section-number">6.9</span> Экспорт<a href="импорт-и-экспорт-данных.html#экспорт" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To be supplied.</p>
<div id="rdata" class="section level3 hasAnchor" number="6.9.1">
<h3><span class="header-section-number">6.9.1</span> Rdata<a href="импорт-и-экспорт-данных.html#rdata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To be supplied.</p>

</div>
</div>
</div>
<h3>Литература<a href="литература.html#литература" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-nolan2014" class="csl-entry">
Nolan, D., and D. T. Lang. 2014. <em>XML and Web Technologies for Data Science with r</em>. Springer.
</div>
<div id="ref-xml2004" class="csl-entry">
Холзнер, Стивен. 2004. <em><span>Энциклопедия XML</span></em>. Питер.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="21">
<li id="fn21"><p><a href="https://r4ds.had.co.nz/data-import.html" class="uri">https://r4ds.had.co.nz/data-import.html</a><a href="импорт-и-экспорт-данных.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p><a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a><a href="импорт-и-экспорт-данных.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p><a href="https://rpubs.com/kbodwin/pdftools" class="uri">https://rpubs.com/kbodwin/pdftools</a><a href="импорт-и-экспорт-данных.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p> <a href="https://xml2.r-lib.org/" class="uri">https://xml2.r-lib.org/</a><a href="импорт-и-экспорт-данных.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p><a href="https://cran.r-project.org/web/packages/gutenbergr/vignettes/intro.html" class="uri">https://cran.r-project.org/web/packages/gutenbergr/vignettes/intro.html</a><a href="импорт-и-экспорт-данных.html#fnref25" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="функциональное-программирование.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="воспроизводимые-исследования.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/05-import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
